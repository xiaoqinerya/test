import{i as P}from"./index-B3KaCODP.js";import{d as C,a as $,r as m,o as I,c as W,e as t,f as e,A as F,j as S,i as p,g as x,k as T,l as j,y as A,x as K,s as B,B as R,h as w,D as L,E,cA as q}from"./index-BiiIy8BH.js";import{i as U}from"./index-CIoy1qQK.js";import{i as z}from"./index-BQNCTEdX.js";import"./index-DkgahQ27.js";import"./index-n3iKJaD_.js";import"./index-C6LSuDqi.js";import"./empty-B_ITTikW.js";import"./virtual-list-8KMurCcU.js";import"./index-ZMGHT5nN.js";import"./index-BQkjKN4u.js";import{E as G}from"./link-B4panqSh.js";import{E as H,a as J}from"./col-C4RHHrqY.js";import"./vuedraggable.umd-CNv-yK7O.js";const O=C({__name:"user-register-record-search",emits:["search"],setup(f,{emit:n}){const b=n,[s,_]=$({username:"",phone:"",status:null});m(!1);const g=()=>{b("search",{...s})},y=()=>{_(),g()};return(k,a)=>{const h=T,u=j,i=H,l=A,o=J,r=K,v=U;return I(),W(v,{"body-style":{paddingBottom:"2px"}},{default:t(()=>[e(r,{"label-width":"72px",onKeyup:F(g,["enter"]),onSubmit:a[3]||(a[3]=S(()=>{},["prevent"]))},{default:t(()=>[e(o,{gutter:8},{default:t(()=>[e(i,{lg:6,md:6,sm:12,xs:24},{default:t(()=>[e(u,{label:"用户名"},{default:t(()=>[e(h,{clearable:"",modelValue:p(s).username,"onUpdate:modelValue":a[0]||(a[0]=d=>p(s).username=d),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{lg:6,md:6,sm:12,xs:24},{default:t(()=>[e(u,{label:"联系电话"},{default:t(()=>[e(h,{clearable:"",modelValue:p(s).phone,"onUpdate:modelValue":a[1]||(a[1]=d=>p(s).phone=d),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{lg:6,md:6,sm:12,xs:24},{default:t(()=>[e(u,{label:"订单状态"},{default:t(()=>[e(h,{clearable:"",modelValue:p(s).status,"onUpdate:modelValue":a[2]||(a[2]=d=>p(s).status=d),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{lg:6,md:6,sm:12,xs:24},{default:t(()=>[e(u,{"label-width":"16px"},{default:t(()=>[e(l,{type:"primary",onClick:g},{default:t(()=>[x("查询")]),_:1}),e(l,{onClick:y},{default:t(()=>[x("重置")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});async function V(f){const n=await B.Post("/userRegisterRecord/list",f);return n.code===0?n.data:Promise.reject(new Error(n.message))}async function Q(f){const n=await B.Delete("/userRegisterRecord/"+f);return n.code===0?n.message:Promise.reject(new Error(n.message))}const me=C({__name:"index",setup(f){const n=m(null),b=m(null),s=m([{prop:"id",label:"ID",width:60,align:"left",fixed:"left"},{prop:"orderNo",label:"订单号",minWidth:110,align:"left"},{prop:"planName",label:"订单类型",minWidth:110,align:"left"},{prop:"userId",label:"用户",minWidth:110,align:"left",slot:"userId"},{prop:"phone",label:"联系电话",minWidth:110,align:"left"},{prop:"address",label:"就诊地址",minWidth:110,align:"left"},{prop:"expressAddress",label:"快递地址",minWidth:110,align:"left"},{prop:"payPrice",label:"支付金额",minWidth:110,align:"left"},{prop:"status",label:"订单状态",minWidth:110,align:"left"},{label:"时间",prop:"createTime",align:"left",minWidth:110},{label:"操作",width:200,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),_=m([]),g=m(null),y=m(!1),k=({pages:l,where:o,orders:r})=>V({...o,...r,...l}),a=l=>{var o,r;_.value=[],(r=(o=b.value)==null?void 0:o.reload)==null||r.call(o,{page:1,where:l})},h=l=>{g.value=l!=null?l:null,y.value=!0},u=l=>{L.confirm("确定要删除“"+l.id+"”吗?","系统提示",{type:"warning",draggable:!0}).then(()=>{const o=E.loading({message:"请求中..",plain:!0});Q(l.id).then(r=>{o.close(),E.success(r),a()}).catch(r=>{o.close(),E.error(r.message)})}).catch(()=>{})},i=({where:l,orders:o})=>V({...l,...o});return(l,o)=>{const r=G,v=q,d=z,D=U,M=P;return I(),W(M,null,{default:t(()=>[e(D,{"body-style":{paddingTop:"8px"}},{default:t(()=>[e(O,{ref_key:"searchRef",ref:n,style:{"margin-bottom":"-14px"},onSearch:a},null,512),e(d,{ref_key:"tableRef",ref:b,"row-key":"id",columns:s.value,datasource:k,"show-overflow-tooltip":!0,border:!0,selections:_.value,"onUpdate:selections":o[0]||(o[0]=c=>_.value=c),"highlight-current-row":!0,"export-config":{fileName:"用户挂号记录",datasource:i},"print-config":{datasource:i},"footer-style":{paddingBottom:"16px"},"cache-key":"systemUserTable"},{userId:t(({row:c})=>[R("div",null,w(c.userId),1),R("div",null,w(c.username),1)]),action:t(({row:c})=>[e(r,{type:"primary",underline:!1,onClick:N=>h(c)},{default:t(()=>[x(" 修改")]),_:2},1032,["onClick"]),e(v,{direction:"vertical"}),e(r,{type:"danger",underline:!1,onClick:N=>u(c)},{default:t(()=>[x(" 删除")]),_:2},1032,["onClick"])]),_:1},8,["columns","selections","export-config","print-config"])]),_:1})]),_:1})}}});export{me as default};
