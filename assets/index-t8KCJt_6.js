import{i as L}from"./index-B3KaCODP.js";import{s as U,d as M,m as $,u as z,r as f,a as A,b as H,o as R,c as W,e as t,f as e,g as b,i,j as K,E as I,n as q,k as J,l as Q,f5 as X,q as Y,x as Z,y as N,z as ee,P as te,B as oe,F as j,G as re,H as ae,D as le,cA as ne}from"./index-BiiIy8BH.js";import{i as se}from"./index-CIoy1qQK.js";import{i as ie}from"./index-BQNCTEdX.js";import"./index-DkgahQ27.js";import"./index-n3iKJaD_.js";import"./index-C6LSuDqi.js";import"./empty-B_ITTikW.js";import"./virtual-list-8KMurCcU.js";import"./index-ZMGHT5nN.js";import"./index-BQkjKN4u.js";import{E as de}from"./link-B4panqSh.js";import{E as ue}from"./input-number-DVnd-AS5.js";import{E as me,a as ce}from"./col-C4RHHrqY.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-BHYYbHid.js";import{_ as pe}from"./index.vue_vue_type_style_index_0_lang-Dv3ffOhN.js";import"./vuedraggable.umd-CNv-yK7O.js";import"./index-DwKLMxIz.js";import"./index.vue_vue_type_style_index_0_lang-B8Ks5WcW.js";import"./index-B9kzOIud.js";import"./tree-BvQcSpbV.js";import"./upload-BGO06KGh.js";import"./progress-CCLXG-1J.js";import"./throttle-DiptQJvM.js";import"./tree-select-B4mwEyeh.js";import"./message-box-D2dYDAIw.js";async function ge(p){const r=await U.Post("/doctorRegistration/list",p);return r.code===0?r.data:Promise.reject(new Error(r.message))}async function fe(p){const r=await U.Post("/doctorRegistration",p);return r.code===0?r.message:Promise.reject(new Error(r.message))}async function _e(p){const r=await U.Put("/doctorRegistration",p);return r.code===0?r.message:Promise.reject(new Error(r.message))}async function be(p){const r=await U.Delete("/doctorRegistration/"+p);return r.code===0?r.message:Promise.reject(new Error(r.message))}const ve=M({__name:"doctor-registration-edit",props:$({data:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:$(["done"],["update:modelValue"]),setup(p,{emit:r}){const k=p,V=r,v=z(p,"modelValue"),_=f(!1),y=f(!1),x=f(null),w=f({height:520,category:0}),[n,l,a]=A({registerId:void 0,title:void 0,address:void 0,mainImg:void 0,price:void 0,banner:void 0,content:void 0}),u=H({registerId:[{required:!0,type:"number",message:"请输入id",trigger:"blur"}],title:[{required:!0,type:"string",message:"请输入",trigger:"blur"}],address:[{required:!0,type:"number",message:"请输入地址",trigger:"blur"}],mainImg:[{required:!0,type:"string",message:"请输入主图",trigger:"blur"}],price:[{required:!0,type:"number",message:"请输入挂号费",trigger:"blur"}],banner:[{required:!0,type:"string",message:"请输入banner",trigger:"blur"}],content:[{required:!0,type:"string",message:"请输入内容",trigger:"blur"}]}),E=()=>{v.value=!1},C=()=>{var m,o;(o=(m=x.value)==null?void 0:m.validate)==null||o.call(m,s=>{if(!s)return;y.value=!0,(_.value?_e:fe)(n).then(c=>{y.value=!1,I.success(c),E(),V("done")}).catch(c=>{y.value=!1,I.error(c.message)})})},B=()=>{k.data?(a({...k.data}),_.value=!0):(l(),_.value=!1),q(()=>{q(()=>{var m,o;(o=(m=x.value)==null?void 0:m.clearValidate)==null||o.call(m)})})};return(m,o)=>{const s=J,g=Q,c=me,h=ce,P=X,O=Y,T=ue,S=Z,D=N,G=ee;return R(),W(G,{form:"",width:800,modelValue:v.value,"onUpdate:modelValue":o[7]||(o[7]=d=>v.value=d),title:_.value?"修改挂号配置":"新建挂号配置",onOpen:B},{footer:t(()=>[e(D,{onClick:E},{default:t(()=>[b("取消")]),_:1}),e(D,{type:"primary",loading:y.value,onClick:C},{default:t(()=>[b(" 保存")]),_:1},8,["loading"])]),default:t(()=>[e(S,{ref_key:"formRef",ref:x,model:i(n),rules:u,"label-width":"80px",onSubmit:o[6]||(o[6]=K(()=>{},["prevent"]))},{default:t(()=>[e(h,{gutter:16},{default:t(()=>[e(c,{sm:24,xs:24},{default:t(()=>[e(g,{label:"名称",name:"title"},{default:t(()=>[e(s,{clearable:"",maxlength:50,modelValue:i(n).title,"onUpdate:modelValue":o[0]||(o[0]=d=>i(n).title=d),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{gutter:16},{default:t(()=>[e(c,{sm:12,xs:12},{default:t(()=>[e(g,{label:"就诊地址",name:"address"},{default:t(()=>[e(O,{modelValue:i(n).address,"onUpdate:modelValue":o[1]||(o[1]=d=>i(n).address=d)},{default:t(()=>[e(P,{value:0},{default:t(()=>[b("成都")]),_:1}),e(P,{value:1},{default:t(()=>[b("乐至")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{sm:12,xs:12},{default:t(()=>[e(g,{label:"挂号费",name:"price"},{default:t(()=>[e(T,{modelValue:i(n).price,"onUpdate:modelValue":o[2]||(o[2]=d=>i(n).price=d),min:0,placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{gutter:16},{default:t(()=>[e(c,{sm:12,xs:12},{default:t(()=>[e(g,{label:"主图",name:"mainImg"},{default:t(()=>[e(F,{limit:1,modelValue:i(n).mainImg,"onUpdate:modelValue":o[3]||(o[3]=d=>i(n).mainImg=d),category:"register",drag:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{gutter:16},{default:t(()=>[e(c,{sm:24,xs:24},{default:t(()=>[e(g,{label:"banner",name:"banner"},{default:t(()=>[e(F,{limit:10,modelValue:i(n).banner,"onUpdate:modelValue":o[4]||(o[4]=d=>i(n).banner=d),category:"register",drag:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{gutter:16},{default:t(()=>[e(c,{sm:24,xs:24},{default:t(()=>[e(pe,{ref:"editorRef",init:w.value,modelValue:i(n).content,"onUpdate:modelValue":o[5]||(o[5]=d=>i(n).content=d),category:"register",disabled:!1},null,8,["init","modelValue"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),ye=["src"],xe=["src"],He=M({__name:"index",setup(p){const r=f(null),k=f([{prop:"registerId",label:"id",width:60,align:"left",fixed:"left"},{prop:"title",label:"类别",minWidth:110,align:"left"},{prop:"address",label:"地址",minWidth:110,align:"left",formatter:l=>["成都","乐至"][l.address]},{prop:"mainImg",label:"主图",minWidth:110,align:"left",slot:"mainImg"},{prop:"price",label:"挂号费",minWidth:110,align:"left"},{prop:"banner",label:"banner",minWidth:110,align:"left",slot:"banner"},{label:"时间",prop:"createTime",align:"left",minWidth:110},{columnKey:"action",label:"操作",width:200,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),V=f([]),v=f(null),_=f(!1),y=({pages:l,where:a,orders:u})=>ge({...a,...u,...l}),x=l=>{var a,u;V.value=[],(u=(a=r.value)==null?void 0:a.reload)==null||u.call(a,{page:1,where:l})},w=l=>{v.value=l!=null?l:null,_.value=!0},n=l=>{le.confirm("确定要删除“"+l.registerId+"”吗?","系统提示",{type:"warning",draggable:!0}).then(()=>{const a=I.loading({message:"请求中..",plain:!0});be(l.registerId).then(u=>{a.close(),I.success(u),x()}).catch(u=>{a.close(),I.error(u.message)})}).catch(()=>{})};return(l,a)=>{const u=N,E=de,C=ne,B=ie,m=se,o=L;return R(),W(o,null,{default:t(()=>[e(m,{"body-style":{paddingTop:"8px"}},{default:t(()=>[e(B,{ref_key:"tableRef",ref:r,"row-key":"registerId",columns:k.value,datasource:y,"show-overflow-tooltip":!0,border:!0,selections:V.value,"onUpdate:selections":a[1]||(a[1]=s=>V.value=s),"highlight-current-row":!0,"export-config":{fileName:"挂号配置",datasource:l.exportSource},"print-config":{datasource:l.exportSource},"footer-style":{paddingBottom:"16px"},"cache-key":"systemUserTable"},{toolbar:t(()=>[e(u,{type:"primary",class:"ele-btn-icon",icon:i(te),onClick:a[0]||(a[0]=s=>w())},{default:t(()=>[b(" 新建")]),_:1},8,["icon"])]),mainImg:t(({row:s})=>[oe("img",{src:s.mainImg,alt:"",style:{width:"50px",height:"50px","object-fit":"cover"}},null,8,ye)]),banner:t(({row:s})=>[(R(!0),j(re,null,ae(s.banner,(g,c)=>(R(),j("img",{src:g,key:c,style:{width:"50px",height:"50px","object-fit":"cover"}},null,8,xe))),128))]),action:t(({row:s})=>[e(E,{type:"primary",underline:!1,onClick:g=>w(s)},{default:t(()=>[b(" 修改")]),_:2},1032,["onClick"]),e(C,{direction:"vertical"}),e(E,{type:"danger",underline:!1,onClick:g=>n(s)},{default:t(()=>[b(" 删除")]),_:2},1032,["onClick"])]),_:1},8,["columns","selections","export-config","print-config"])]),_:1}),e(ve,{data:v.value,modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=s=>_.value=s),onDone:x},null,8,["data","modelValue"])]),_:1})}}});export{He as default};
