import{dr,ds as cr,dt as fr,du as gn,dv as Ml,dw as hr,dx as Ho,dy as Fo,dz as mr,dA as gr,dB as vr,dC as pr,dD as yr,dE as Io,dF as Cr,dG as br,dH as _l,dI as wr,dJ as Sr,dK as Rr,dL as _n,dM as xr,dN as kr,dO as Tr,dP as Er,dQ as Or,dR as Hr,d as Ne,X as nt,r as E,aV as at,K as F,i as T,bD as Ul,a4 as Ct,cj as Bt,b3 as Je,n as lt,dS as Fr,$ as Un,bL as ce,b0 as ql,G as $e,cJ as jt,ba as Mo,bH as Ir,dT as Mr,bC as Pt,f as D,bK as $o,cl as qn,dU as Gl,bQ as nl,w as ye,bJ as $r,dc as Nr,bF as ol,dV as Dr,a1 as No,cy as mt,bW as vn,aj as bt,dh as Ar,dg as Pr,dm as Lr,b4 as $l,O as W,dW as Do,o as P,c as se,e as G,F as Y,B as we,Z as ke,H as Pe,g as pt,h as Be,M as gl,Y as Oe,dX as pn,cI as zr,b9 as yn,b8 as gt,dY as xl,ck as Kr,dj as el,dZ as al,d_ as tl,aZ as Yl,bN as Wr,bw as Vr,a$ as Ao,C as Xe,a0 as de,N as Gn,d$ as Br,b7 as Cn,bX as jr,e0 as _r,a_ as Po,a2 as bn,bb as Ur,aY as Ht,cL as wn,d1 as vl,b2 as zt,dl as Yn,bv as Ee,cK as qr,W as Gt,e1 as Gr,bY as Te,e2 as Yr,e3 as Xr,e4 as Ke,al as Sn,cO as De,e5 as Jr,cP as yt,d4 as _t,c1 as Lo,aD as zo,e6 as Zr,ct as Ko,cu as Wo,d6 as Qr,y as Rn,cz as es,cs as xn,j as Nl,c2 as et,a6 as dt,ar as Vo,e7 as ts,b as rl,c3 as ht,e8 as ls,e9 as ns,bf as os,k as Bo,ea as as,aT as rs,aS as ss,aO as is,x as jo,l as _o,J as Uo,I as qo,z as Go,bl as us,ap as ds,eb as cs,cZ as fs,ec as hs,ed as ms,c6 as gs,b$ as vs,an as Pl,ee as ps,ef as ys,eg as Cs,eh as bs}from"./index-BiiIy8BH.js";import{i as ws}from"./index-n3iKJaD_.js";import{i as Ss}from"./index-C6LSuDqi.js";import{c as Rs,r as Yo,k as At,I as Xn,S as Jn,F as dl,u as xs,B as Zn,e as cl,A as Mt,R as ks,g as Qn,a as Ts,b as eo,l as to,d as lo,f as Es,C as Wt,E as Xl,h as Jl,j as Xo,D as no,v as Os,m as Hs}from"./virtual-list-8KMurCcU.js";import{E as kl}from"./empty-B_ITTikW.js";import{T as Fs,i as Is}from"./index-DkgahQ27.js";import{V as Ms}from"./vuedraggable.umd-CNv-yK7O.js";import{i as $s}from"./index-ZMGHT5nN.js";import{i as Ns}from"./index-BQkjKN4u.js";function Ds(e,t){return dr(cr(e,t,fr),e+"")}function As(e,t,l){if(!gn(l))return!1;var n=typeof t;return(n=="number"?Ml(l)&&hr(t,l.length):n=="string"&&t in l)?Ho(l[t],e):!1}function Ps(e){return Ds(function(t,l){var n=-1,o=l.length,r=o>1?l[o-1]:void 0,i=o>2?l[2]:void 0;for(r=e.length>3&&typeof r=="function"?(o--,r):void 0,i&&As(l[0],l[1],i)&&(r=o<3?void 0:r,o=1),t=Object(t);++n<o;){var a=l[n];a&&e(t,a,n,r)}return t})}var Ls="[object Object]",zs=Function.prototype,Ks=Object.prototype,Jo=zs.toString,Ws=Ks.hasOwnProperty,Vs=Jo.call(Object);function Bs(e){if(!Fo(e)||mr(e)!=Ls)return!1;var t=gr(e);if(t===null)return!0;var l=Ws.call(t,"constructor")&&t.constructor;return typeof l=="function"&&l instanceof l&&Jo.call(l)==Vs}function js(e){return function(t,l,n){for(var o=-1,r=Object(t),i=n(t),a=i.length;a--;){var s=i[++o];if(l(r[s],s,r)===!1)break}return t}}var Zo=js();function _s(e,t){return e&&Zo(e,t,vr)}function Us(e,t){return function(l,n){if(l==null)return l;if(!Ml(l))return e(l,n);for(var o=l.length,r=-1,i=Object(l);++r<o&&n(i[r],r,i)!==!1;);return l}}var qs=Us(_s);function Zl(e,t,l){(l!==void 0&&!Ho(e[t],l)||l===void 0&&!(t in e))&&pr(e,t,l)}function Gs(e){return Fo(e)&&Ml(e)}function Ql(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Ys(e){return yr(e,Io(e))}function Xs(e,t,l,n,o,r,i){var a=Ql(e,l),s=Ql(t,l),u=i.get(s);if(u){Zl(e,l,u);return}var c=r?r(a,s,l+"",e,t,i):void 0,f=c===void 0;if(f){var h=_l(s),m=!h&&Cr(s),g=!h&&!m&&br(s);c=s,h||m||g?_l(a)?c=a:Gs(a)?c=wr(a):m?(f=!1,c=Sr(s,!0)):g?(f=!1,c=Rr(s,!0)):c=[]:Bs(s)||_n(s)?(c=a,_n(a)?c=Ys(a):(!gn(a)||xr(a))&&(c=kr(s))):f=!1}f&&(i.set(s,c),o(c,s,n,r,i),i.delete(s)),Zl(e,l,c)}function Qo(e,t,l,n,o){e!==t&&Zo(t,function(r,i){if(o||(o=new Tr),gn(r))Xs(e,t,i,l,Qo,n,o);else{var a=n?n(Ql(e,i),r,i+"",e,t,o):void 0;a===void 0&&(a=r),Zl(e,i,a)}},Io)}function Js(e,t){var l=-1,n=Ml(e)?Array(e.length):[];return qs(e,function(o,r,i){n[++l]=t(o,r,i)}),n}function Zs(e,t){var l=_l(e)?Or:Js;return l(e,Er(t))}function Qs(e,t){return Hr(Zs(e,t))}var ei=Ps(function(e,t,l){Qo(e,t,l)}),oo=!1,Ft,en,tn,pl,yl,ea,Cl,ln,nn,on,ta,an,rn,la,na;function ot(){if(!oo){oo=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),l=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(an=/\b(iPhone|iP[ao]d)/.exec(e),rn=/\b(iP[ao]d)/.exec(e),on=/Android/i.exec(e),la=/FBAN\/\w+;/i.exec(e),na=/Mobile/i.exec(e),ta=!!/Win64/.exec(e),t){Ft=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,Ft&&document&&document.documentMode&&(Ft=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(e);ea=n?parseFloat(n[1])+4:Ft,en=t[2]?parseFloat(t[2]):NaN,tn=t[3]?parseFloat(t[3]):NaN,pl=t[4]?parseFloat(t[4]):NaN,pl?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),yl=t&&t[1]?parseFloat(t[1]):NaN):yl=NaN}else Ft=en=tn=yl=pl=NaN;if(l){if(l[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);Cl=o?parseFloat(o[1].replace("_",".")):!0}else Cl=!1;ln=!!l[2],nn=!!l[3]}else Cl=ln=nn=!1}}var sn={ie:function(){return ot()||Ft},ieCompatibilityMode:function(){return ot()||ea>Ft},ie64:function(){return sn.ie()&&ta},firefox:function(){return ot()||en},opera:function(){return ot()||tn},webkit:function(){return ot()||pl},safari:function(){return sn.webkit()},chrome:function(){return ot()||yl},windows:function(){return ot()||ln},osx:function(){return ot()||Cl},linux:function(){return ot()||nn},iphone:function(){return ot()||an},mobile:function(){return ot()||an||rn||on||na},nativeApp:function(){return ot()||la},android:function(){return ot()||on},ipad:function(){return ot()||rn}},ti=sn,fl=!!(typeof window<"u"&&window.document&&window.document.createElement),li={canUseDOM:fl,canUseWorkers:typeof Worker<"u",canUseEventListeners:fl&&!!(window.addEventListener||window.attachEvent),canUseViewport:fl&&!!window.screen,isInWorker:!fl},oa=li,aa;oa.canUseDOM&&(aa=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function ni(e,t){if(!oa.canUseDOM||t&&!("addEventListener"in document))return!1;var l="on"+e,n=l in document;if(!n){var o=document.createElement("div");o.setAttribute(l,"return;"),n=typeof o[l]=="function"}return!n&&aa&&e==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var oi=ni,ao=10,ro=40,so=800;function ra(e){var t=0,l=0,n=0,o=0;return"detail"in e&&(l=e.detail),"wheelDelta"in e&&(l=-e.wheelDelta/120),"wheelDeltaY"in e&&(l=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=l,l=0),n=t*ao,o=l*ao,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||o)&&e.deltaMode&&(e.deltaMode==1?(n*=ro,o*=ro):(n*=so,o*=so)),n&&!t&&(t=n<1?-1:1),o&&!l&&(l=o<1?-1:1),{spinX:t,spinY:l,pixelX:n,pixelY:o}}ra.getEventType=function(){return ti.firefox()?"DOMMouseScroll":oi("wheel")?"wheel":"mousewheel"};var ai=ra;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const ri=function(e,t){if(e&&e.addEventListener){const l=function(n){const o=ai(n);t&&Reflect.apply(t,this,[n,o])};e.addEventListener("wheel",l,{passive:!0})}},si={beforeMount(e,t){ri(e,t.value)}},ii=({atXEndEdge:e,atXStartEdge:t,atYEndEdge:l,atYStartEdge:n},o)=>{let r=null,i=0,a=0;const s=(c,f)=>{const h=c<=0&&t.value||c>=0&&e.value,m=f<=0&&n.value||f>=0&&l.value;return h&&m};return{hasReachedEdge:s,onWheel:c=>{Rs(r);let f=c.deltaX,h=c.deltaY;Math.abs(f)>Math.abs(h)?h=0:f=0,c.shiftKey&&h!==0&&(f=h,h=0),!(s(i,a)&&s(i+f,a+h))&&(i+=f,a+=h,c.preventDefault(),r=Yo(()=>{o(i,a),i=0,a=0}))}}},sa=({name:e,clearCache:t,getColumnPosition:l,getColumnStartIndexForOffset:n,getColumnStopIndexForStartIndex:o,getEstimatedTotalHeight:r,getEstimatedTotalWidth:i,getColumnOffset:a,getRowOffset:s,getRowPosition:u,getRowStartIndexForOffset:c,getRowStopIndexForStartIndex:f,initCache:h,injectToInstance:m,validateProps:g})=>Ne({name:e!=null?e:"ElVirtualList",props:At,emits:[Xn,Jn],setup(d,{emit:p,expose:w,slots:b}){const y=nt("vl");g(d);const v=Je(),C=E(h(d,v));m==null||m(v,C);const O=E(),M=E(),$=E(),S=E(null),R=E({isScrolling:!1,scrollLeft:at(d.initScrollLeft)?d.initScrollLeft:0,scrollTop:at(d.initScrollTop)?d.initScrollTop:0,updateRequested:!1,xAxisScrollDir:dl,yAxisScrollDir:dl}),k=xs(),A=F(()=>Number.parseInt(`${d.height}`,10)),N=F(()=>Number.parseInt(`${d.width}`,10)),B=F(()=>{const{totalColumn:Z,totalRow:J,columnCache:re}=d,{isScrolling:ve,xAxisScrollDir:pe,scrollLeft:I}=T(R);if(Z===0||J===0)return[0,0,0,0];const j=n(d,I,T(C)),ee=o(d,j,I,T(C)),be=!ve||pe===Zn?Math.max(1,re):1,Fe=!ve||pe===dl?Math.max(1,re):1;return[Math.max(0,j-be),Math.max(0,Math.min(Z-1,ee+Fe)),j,ee]}),V=F(()=>{const{totalColumn:Z,totalRow:J,rowCache:re}=d,{isScrolling:ve,yAxisScrollDir:pe,scrollTop:I}=T(R);if(Z===0||J===0)return[0,0,0,0];const j=c(d,I,T(C)),ee=f(d,j,I,T(C)),be=!ve||pe===Zn?Math.max(1,re):1,Fe=!ve||pe===dl?Math.max(1,re):1;return[Math.max(0,j-be),Math.max(0,Math.min(J-1,ee+Fe)),j,ee]}),q=F(()=>r(d,T(C))),le=F(()=>i(d,T(C))),he=F(()=>{var Z;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:d.direction,height:at(d.height)?`${d.height}px`:d.height,width:at(d.width)?`${d.width}px`:d.width},(Z=d.style)!=null?Z:{}]}),L=F(()=>{const Z=`${T(le)}px`;return{height:`${T(q)}px`,pointerEvents:T(R).isScrolling?"none":void 0,width:Z}}),U=()=>{const{totalColumn:Z,totalRow:J}=d;if(Z>0&&J>0){const[ee,be,Fe,_e]=T(B),[Ie,Me,X,ne]=T(V);p(Xn,{columnCacheStart:ee,columnCacheEnd:be,rowCacheStart:Ie,rowCacheEnd:Me,columnVisibleStart:Fe,columnVisibleEnd:_e,rowVisibleStart:X,rowVisibleEnd:ne})}const{scrollLeft:re,scrollTop:ve,updateRequested:pe,xAxisScrollDir:I,yAxisScrollDir:j}=T(R);p(Jn,{xAxisScrollDir:I,scrollLeft:re,yAxisScrollDir:j,scrollTop:ve,updateRequested:pe})},oe=Z=>{const{clientHeight:J,clientWidth:re,scrollHeight:ve,scrollLeft:pe,scrollTop:I,scrollWidth:j}=Z.currentTarget,ee=T(R);if(ee.scrollTop===I&&ee.scrollLeft===pe)return;let be=pe;if(to(d.direction))switch(Qn()){case eo:be=-pe;break;case Es:be=j-re-pe;break}R.value={...ee,isScrolling:!0,scrollLeft:be,scrollTop:Math.max(0,Math.min(I,ve-J)),updateRequested:!0,xAxisScrollDir:cl(ee.scrollLeft,be),yAxisScrollDir:cl(ee.scrollTop,I)},lt(()=>ge()),Se(),U()},ue=(Z,J)=>{const re=T(A),ve=(q.value-re)/J*Z;Q({scrollTop:Math.min(q.value-re,ve)})},x=(Z,J)=>{const re=T(N),ve=(le.value-re)/J*Z;Q({scrollLeft:Math.min(le.value-re,ve)})},{onWheel:K}=ii({atXStartEdge:F(()=>R.value.scrollLeft<=0),atXEndEdge:F(()=>R.value.scrollLeft>=le.value-T(N)),atYStartEdge:F(()=>R.value.scrollTop<=0),atYEndEdge:F(()=>R.value.scrollTop>=q.value-T(A))},(Z,J)=>{var re,ve,pe,I;(ve=(re=M.value)==null?void 0:re.onMouseUp)==null||ve.call(re),(I=(pe=$.value)==null?void 0:pe.onMouseUp)==null||I.call(pe);const j=T(N),ee=T(A);Q({scrollLeft:Math.min(R.value.scrollLeft+Z,le.value-j),scrollTop:Math.min(R.value.scrollTop+J,q.value-ee)})});Ul(O,"wheel",K,{passive:!1});const Q=({scrollLeft:Z=R.value.scrollLeft,scrollTop:J=R.value.scrollTop})=>{Z=Math.max(Z,0),J=Math.max(J,0);const re=T(R);J===re.scrollTop&&Z===re.scrollLeft||(R.value={...re,xAxisScrollDir:cl(re.scrollLeft,Z),yAxisScrollDir:cl(re.scrollTop,J),scrollLeft:Z,scrollTop:J,updateRequested:!0},lt(()=>ge()),Se(),U())},ie=(Z=0,J=0,re=Mt)=>{const ve=T(R);J=Math.max(0,Math.min(J,d.totalColumn-1)),Z=Math.max(0,Math.min(Z,d.totalRow-1));const pe=Fr(y.namespace.value),I=T(C),j=r(d,I),ee=i(d,I);Q({scrollLeft:a(d,J,re,ve.scrollLeft,I,ee>d.width?pe:0),scrollTop:s(d,Z,re,ve.scrollTop,I,j>d.height?pe:0)})},xe=(Z,J)=>{const{columnWidth:re,direction:ve,rowHeight:pe}=d,I=k.value(t&&re,t&&pe,t&&ve),j=`${Z},${J}`;if(jt(I,j))return I[j];{const[,ee]=l(d,J,T(C)),be=T(C),Fe=to(ve),[_e,Ie]=u(d,Z,be),[Me]=l(d,J,be);return I[j]={position:"absolute",left:Fe?void 0:`${ee}px`,right:Fe?`${ee}px`:void 0,top:`${Ie}px`,height:`${_e}px`,width:`${Me}px`},I[j]}},ge=()=>{R.value.isScrolling=!1,lt(()=>{k.value(-1,null,null)})};Ct(()=>{if(!Bt)return;const{initScrollLeft:Z,initScrollTop:J}=d,re=T(O);re&&(at(Z)&&(re.scrollLeft=Z),at(J)&&(re.scrollTop=J)),U()});const Se=()=>{const{direction:Z}=d,{scrollLeft:J,scrollTop:re,updateRequested:ve}=T(R),pe=T(O);if(ve&&pe){if(Z===ks)switch(Qn()){case eo:{pe.scrollLeft=-J;break}case Ts:{pe.scrollLeft=J;break}default:{const{clientWidth:I,scrollWidth:j}=pe;pe.scrollLeft=j-I-J;break}}else pe.scrollLeft=Math.max(0,J);pe.scrollTop=Math.max(0,re)}},{resetAfterColumnIndex:Ae,resetAfterRowIndex:Ye,resetAfter:je}=v.proxy;w({windowRef:O,innerRef:S,getItemStyleCache:k,scrollTo:Q,scrollToItem:ie,states:R,resetAfterColumnIndex:Ae,resetAfterRowIndex:Ye,resetAfter:je});const We=()=>{const{scrollbarAlwaysOn:Z,scrollbarStartGap:J,scrollbarEndGap:re,totalColumn:ve,totalRow:pe}=d,I=T(N),j=T(A),ee=T(le),be=T(q),{scrollLeft:Fe,scrollTop:_e}=T(R),Ie=ce(lo,{ref:M,alwaysOn:Z,startGap:J,endGap:re,class:y.e("horizontal"),clientSize:I,layout:"horizontal",onScroll:x,ratio:I*100/ee,scrollFrom:Fe/(ee-I),total:pe,visible:!0}),Me=ce(lo,{ref:$,alwaysOn:Z,startGap:J,endGap:re,class:y.e("vertical"),clientSize:j,layout:"vertical",onScroll:ue,ratio:j*100/be,scrollFrom:_e/(be-j),total:ve,visible:!0});return{horizontalScrollbar:Ie,verticalScrollbar:Me}},Ve=()=>{var Z;const[J,re]=T(B),[ve,pe]=T(V),{data:I,totalColumn:j,totalRow:ee,useIsScrolling:be,itemKey:Fe}=d,_e=[];if(ee>0&&j>0)for(let Ie=ve;Ie<=pe;Ie++)for(let Me=J;Me<=re;Me++){const X=Fe({columnIndex:Me,data:I,rowIndex:Ie});_e.push(ce($e,{key:X},(Z=b.default)==null?void 0:Z.call(b,{columnIndex:Me,data:I,isScrolling:be?T(R).isScrolling:void 0,style:xe(Ie,Me),rowIndex:Ie})))}return _e},He=()=>{const Z=Un(d.innerElement),J=Ve();return[ce(Z,{style:T(L),ref:S},ql(Z)?J:{default:()=>J})]};return()=>{const Z=Un(d.containerElement),{horizontalScrollbar:J,verticalScrollbar:re}=We(),ve=He();return ce("div",{key:0,class:y.e("wrapper"),role:d.role},[ce(Z,{class:d.className,style:T(he),onScroll:oe,ref:O},ql(Z)?ve:{default:()=>ve}),J,re])}}}),ui=sa({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},t)=>[e,t*e],getRowPosition:({rowHeight:e},t)=>[e,t*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:t})=>t*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:t})=>t*e,getColumnOffset:({totalColumn:e,columnWidth:t,width:l},n,o,r,i,a)=>{l=Number(l);const s=Math.max(0,e*t-l),u=Math.min(s,n*t),c=Math.max(0,n*t-l+a+t);switch(o==="smart"&&(r>=c-l&&r<=u+l?o=Mt:o=Wt),o){case Jl:return u;case Xl:return c;case Wt:{const f=Math.round(c+(u-c)/2);return f<Math.ceil(l/2)?0:f>s+Math.floor(l/2)?s:f}case Mt:default:return r>=c&&r<=u?r:c>u||r<c?c:u}},getRowOffset:({rowHeight:e,height:t,totalRow:l},n,o,r,i,a)=>{t=Number(t);const s=Math.max(0,l*e-t),u=Math.min(s,n*e),c=Math.max(0,n*e-t+a+e);switch(o===Xo&&(r>=c-t&&r<=u+t?o=Mt:o=Wt),o){case Jl:return u;case Xl:return c;case Wt:{const f=Math.round(c+(u-c)/2);return f<Math.ceil(t/2)?0:f>s+Math.floor(t/2)?s:f}case Mt:default:return r>=c&&r<=u?r:c>u||r<c?c:u}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:t},l)=>Math.max(0,Math.min(t-1,Math.floor(l/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:t,width:l},n,o)=>{const r=n*e,i=Math.ceil((l+o-r)/e);return Math.max(0,Math.min(t-1,n+i-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:t},l)=>Math.max(0,Math.min(t-1,Math.floor(l/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:t,height:l},n,o)=>{const r=n*e,i=Math.ceil((l+o-r)/e);return Math.max(0,Math.min(t-1,n+i-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:t})=>{}}),{max:Tl,min:ia,floor:ua}=Math,di={column:"columnWidth",row:"rowHeight"},un={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},Rt=(e,t,l,n)=>{const[o,r,i]=[l[n],e[di[n]],l[un[n]]];if(t>i){let a=0;if(i>=0){const s=o[i];a=s.offset+s.size}for(let s=i+1;s<=t;s++){const u=r(s);o[s]={offset:a,size:u},a+=u}l[un[n]]=t}return o[t]},da=(e,t,l,n,o,r)=>{for(;l<=n;){const i=l+ua((n-l)/2),a=Rt(e,i,t,r).offset;if(a===o)return i;a<o?l=i+1:n=i-1}return Tl(0,l-1)},ci=(e,t,l,n,o)=>{const r=o==="column"?e.totalColumn:e.totalRow;let i=1;for(;l<r&&Rt(e,l,t,o).offset<n;)l+=i,i*=2;return da(e,t,ua(l/2),ia(l,r-1),n,o)},io=(e,t,l,n)=>{const[o,r]=[t[n],t[un[n]]];return(r>0?o[r].offset:0)>=l?da(e,t,0,r,l,n):ci(e,t,Tl(0,r),l,n)},ca=({totalRow:e},{estimatedRowHeight:t,lastVisitedRowIndex:l,row:n})=>{let o=0;if(l>=e&&(l=e-1),l>=0){const a=n[l];o=a.offset+a.size}const i=(e-l-1)*t;return o+i},fa=({totalColumn:e},{column:t,estimatedColumnWidth:l,lastVisitedColumnIndex:n})=>{let o=0;if(n>e&&(n=e-1),n>=0){const a=t[n];o=a.offset+a.size}const i=(e-n-1)*l;return o+i},fi={column:fa,row:ca},uo=(e,t,l,n,o,r,i)=>{const[a,s]=[r==="row"?e.height:e.width,fi[r]],u=Rt(e,t,o,r),c=s(e,o),f=Tl(0,ia(c-a,u.offset)),h=Tl(0,u.offset-a+i+u.size);switch(l===Xo&&(n>=h-a&&n<=f+a?l=Mt:l=Wt),l){case Jl:return f;case Xl:return h;case Wt:return Math.round(h+(f-h)/2);case Mt:default:return n>=h&&n<=f?n:h>f||n<h?h:f}},hi=sa({name:"ElDynamicSizeGrid",getColumnPosition:(e,t,l)=>{const n=Rt(e,t,l,"column");return[n.size,n.offset]},getRowPosition:(e,t,l)=>{const n=Rt(e,t,l,"row");return[n.size,n.offset]},getColumnOffset:(e,t,l,n,o,r)=>uo(e,t,l,n,o,"column",r),getRowOffset:(e,t,l,n,o,r)=>uo(e,t,l,n,o,"row",r),getColumnStartIndexForOffset:(e,t,l)=>io(e,l,t,"column"),getColumnStopIndexForStartIndex:(e,t,l,n)=>{const o=Rt(e,t,n,"column"),r=l+e.width;let i=o.offset+o.size,a=t;for(;a<e.totalColumn-1&&i<r;)a++,i+=Rt(e,t,n,"column").size;return a},getEstimatedTotalHeight:ca,getEstimatedTotalWidth:fa,getRowStartIndexForOffset:(e,t,l)=>io(e,l,t,"row"),getRowStopIndexForStartIndex:(e,t,l,n)=>{const{totalRow:o,height:r}=e,i=Rt(e,t,n,"row"),a=l+r;let s=i.size+i.offset,u=t;for(;u<o-1&&s<a;)u++,s+=Rt(e,u,n,"row").size;return u},injectToInstance:(e,t)=>{const l=({columnIndex:r,rowIndex:i},a)=>{var s,u;a=Mo(a)?!0:a,at(r)&&(t.value.lastVisitedColumnIndex=Math.min(t.value.lastVisitedColumnIndex,r-1)),at(i)&&(t.value.lastVisitedRowIndex=Math.min(t.value.lastVisitedRowIndex,i-1)),(s=e.exposed)==null||s.getItemStyleCache.value(-1,null,null),a&&((u=e.proxy)==null||u.$forceUpdate())},n=(r,i)=>{l({columnIndex:r},i)},o=(r,i)=>{l({rowIndex:r},i)};Object.assign(e.proxy,{resetAfterColumnIndex:n,resetAfterRowIndex:o,resetAfter:l})},initCache:({estimatedColumnWidth:e=no,estimatedRowHeight:t=no})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:t,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:t})=>{}}),Ll=function(e){var t;return(t=e.target)==null?void 0:t.closest("td")},mi=function(e,t,l,n,o){if(!t&&!n&&(!o||Array.isArray(o)&&!o.length))return e;typeof l=="string"?l=l==="descending"?-1:1:l=l&&l<0?-1:1;const r=n?null:function(a,s){return o?(Array.isArray(o)||(o=[o]),o.map(u=>typeof u=="string"?Gl(a,u):u(a,s,e))):(t!=="$key"&&nl(a)&&"$value"in a&&(a=a.$value),[nl(a)?Gl(a,t):a])},i=function(a,s){if(n)return n(a.value,s.value);for(let u=0,c=a.key.length;u<c;u++){if(a.key[u]<s.key[u])return-1;if(a.key[u]>s.key[u])return 1}return 0};return e.map((a,s)=>({value:a,index:s,key:r?r(a,s):null})).sort((a,s)=>{let u=i(a,s);return u||(u=a.index-s.index),u*+l}).map(a=>a.value)},ha=function(e,t){let l=null;return e.columns.forEach(n=>{n.id===t&&(l=n)}),l},gi=function(e,t){let l=null;for(let n=0;n<e.columns.length;n++){const o=e.columns[n];if(o.columnKey===t){l=o;break}}return l||Ir("ElTable",`No column matching with column-key: ${t}`),l},co=function(e,t,l){const n=(t.className||"").match(new RegExp(`${l}-table_[^\\s]+`,"gm"));return n?ha(e,n[0]):null},tt=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof t=="string"){if(!t.includes("."))return`${e[t]}`;const l=t.split(".");let n=e;for(const o of l)n=n[o];return`${n}`}else if(typeof t=="function")return t.call(null,e)},$t=function(e,t){const l={};return(e||[]).forEach((n,o)=>{l[tt(n,t)]={row:n,index:o}}),l};function vi(e,t){const l={};let n;for(n in e)l[n]=e[n];for(n in t)if(jt(t,n)){const o=t[n];typeof o<"u"&&(l[n]=o)}return l}function kn(e){return e===""||e!==void 0&&(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function ma(e){return e===""||e!==void 0&&(e=kn(e),Number.isNaN(e)&&(e=80)),e}function pi(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function yi(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,l)=>(...n)=>t(l(...n)))}function El(e,t,l,n,o,r){let i=r!=null?r:0,a=!1;const s=e.indexOf(t),u=s!==-1,c=o==null?void 0:o.call(null,t,r),f=m=>{m==="add"?e.push(t):e.splice(s,1),a=!0},h=m=>{let g=0;const d=(n==null?void 0:n.children)&&m[n.children];return d&&Pt(d)&&(g+=d.length,d.forEach(p=>{g+=h(p)})),g};return(!o||c)&&(Mr(l)?l&&!u?f("add"):!l&&u&&f("remove"):f(u?"remove":"add")),!(n!=null&&n.checkStrictly)&&(n!=null&&n.children)&&Pt(t[n.children])&&t[n.children].forEach(m=>{El(e,m,l!=null?l:!u,n,o,i+1),i+=h(m)+1}),a}function Ci(e,t,l="children",n="hasChildren"){const o=i=>!(Array.isArray(i)&&i.length);function r(i,a,s){t(i,a,s),a.forEach(u=>{if(u[n]){t(u,null,s+1);return}const c=u[l];o(c)||r(u,c,s+1)})}e.forEach(i=>{if(i[n]){t(i,null,0);return}const a=i[l];o(a)||r(i,a,0)})}let ct=null;function bi(e,t,l,n){if((ct==null?void 0:ct.trigger)===l)return;ct==null||ct();const o=n==null?void 0:n.refs.tableWrapper,r=o==null?void 0:o.dataset.prefix,i={strategy:"fixed",...e.popperOptions},a=D($o,{content:t,virtualTriggering:!0,virtualRef:l,appendTo:o,placement:"top",transition:"none",offset:0,hideAfter:0,...e,popperOptions:i,onHide:()=>{ct==null||ct()}});a.appContext={...n.appContext,...n};const s=document.createElement("div");qn(a,s),a.component.exposed.onOpen();const u=o==null?void 0:o.querySelector(`.${r}-scrollbar__wrap`);ct=()=>{qn(null,s),u==null||u.removeEventListener("scroll",ct),ct=null},ct.trigger=l,u==null||u.addEventListener("scroll",ct)}function ga(e){return e.children?Qs(e.children,ga):[e]}function fo(e,t){return e+t.colSpan}const va=(e,t,l,n)=>{let o=0,r=e;const i=l.states.columns.value;if(n){const s=ga(n[e]);o=i.slice(0,i.indexOf(s[0])).reduce(fo,0),r=o+s.reduce(fo,0)-1}else o=e;let a;switch(t){case"left":r<l.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":o>=i.length-l.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:r<l.states.fixedLeafColumnsLength.value?a="left":o>=i.length-l.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:o,after:r}:{}},Tn=(e,t,l,n,o,r=0)=>{const i=[],{direction:a,start:s,after:u}=va(t,l,n,o);if(a){const c=a==="left";i.push(`${e}-fixed-column--${a}`),c&&u+r===n.states.fixedLeafColumnsLength.value-1?i.push("is-last-column"):!c&&s-r===n.states.columns.value.length-n.states.rightFixedLeafColumnsLength.value&&i.push("is-first-column")}return i};function ho(e,t){return e+(t.realWidth===null||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const En=(e,t,l,n)=>{const{direction:o,start:r=0,after:i=0}=va(e,t,l,n);if(!o)return;const a={},s=o==="left",u=l.states.columns.value;return s?a.left=u.slice(0,r).reduce(ho,0):a.right=u.slice(i+1).reverse().reduce(ho,0),a},Ut=(e,t)=>{e&&(Number.isNaN(e[t])||(e[t]=`${e[t]}px`))};function wi(e){const t=Je(),l=E(!1),n=E([]);return{updateExpandRows:()=>{const s=e.data.value||[],u=e.rowKey.value;if(l.value)n.value=s.slice();else if(u){const c=$t(n.value,u);n.value=s.reduce((f,h)=>{const m=tt(h,u);return c[m]&&f.push(h),f},[])}else n.value=[]},toggleRowExpansion:(s,u)=>{El(n.value,s,u)&&t.emit("expand-change",s,n.value.slice())},setExpandRowKeys:s=>{t.store.assertRowKey();const u=e.data.value||[],c=e.rowKey.value,f=$t(u,c);n.value=s.reduce((h,m)=>{const g=f[m];return g&&h.push(g.row),h},[])},isRowExpanded:s=>{const u=e.rowKey.value;return u?!!$t(n.value,u)[tt(s,u)]:n.value.includes(s)},states:{expandRows:n,defaultExpandAll:l}}}function Si(e){const t=Je(),l=E(null),n=E(null),o=u=>{t.store.assertRowKey(),l.value=u,i(u)},r=()=>{l.value=null},i=u=>{const{data:c,rowKey:f}=e;let h=null;f.value&&(h=(T(c)||[]).find(m=>tt(m,f.value)===u)),n.value=h,t.emit("current-change",n.value,null)};return{setCurrentRowKey:o,restoreCurrentRowKey:r,setCurrentRowByKey:i,updateCurrentRow:u=>{const c=n.value;if(u&&u!==c){n.value=u,t.emit("current-change",n.value,c);return}!u&&c&&(n.value=null,t.emit("current-change",null,c))},updateCurrentRowData:()=>{const u=e.rowKey.value,c=e.data.value||[],f=n.value;if(!c.includes(f)&&f){if(u){const h=tt(f,u);i(h)}else n.value=null;n.value===null&&t.emit("current-change",null,f)}else l.value&&(i(l.value),r())},states:{_currentRowKey:l,currentRow:n}}}function Ri(e){const t=E([]),l=E({}),n=E(16),o=E(!1),r=E({}),i=E("hasChildren"),a=E("children"),s=E(!1),u=Je(),c=F(()=>{if(!e.rowKey.value)return{};const b=e.data.value||[];return h(b)}),f=F(()=>{const b=e.rowKey.value,y=Object.keys(r.value),v={};return y.length&&y.forEach(C=>{if(r.value[C].length){const O={children:[]};r.value[C].forEach(M=>{const $=tt(M,b);O.children.push($),M[i.value]&&!v[$]&&(v[$]={children:[]})}),v[C]=O}}),v}),h=b=>{const y=e.rowKey.value,v={};return Ci(b,(C,O,M)=>{const $=tt(C,y);Array.isArray(O)?v[$]={children:O.map(S=>tt(S,y)),level:M}:o.value&&(v[$]={children:[],lazy:!0,level:M})},a.value,i.value),v},m=(b=!1,y=(v=>(v=u.store)==null?void 0:v.states.defaultExpandAll.value)())=>{var v;const C=c.value,O=f.value,M=Object.keys(C),$={};if(M.length){const S=T(l),R=[],k=(N,B)=>{if(b)return t.value?y||t.value.includes(B):!!(y||N!=null&&N.expanded);{const V=y||t.value&&t.value.includes(B);return!!(N!=null&&N.expanded||V)}};M.forEach(N=>{const B=S[N],V={...C[N]};if(V.expanded=k(B,N),V.lazy){const{loaded:q=!1,loading:le=!1}=B||{};V.loaded=!!q,V.loading=!!le,R.push(N)}$[N]=V});const A=Object.keys(O);o.value&&A.length&&R.length&&A.forEach(N=>{const B=S[N],V=O[N].children;if(R.includes(N)){if($[N].children.length!==0)throw new Error("[ElTable]children must be an empty array.");$[N].children=V}else{const{loaded:q=!1,loading:le=!1}=B||{};$[N]={lazy:!0,loaded:!!q,loading:!!le,expanded:k(B,N),children:V,level:""}}})}l.value=$,(v=u.store)==null||v.updateTableScrollY()};ye(()=>t.value,()=>{m(!0)}),ye(()=>c.value,()=>{m()}),ye(()=>f.value,()=>{m()});const g=b=>{t.value=b,m()},d=(b,y)=>{u.store.assertRowKey();const v=e.rowKey.value,C=tt(b,v),O=C&&l.value[C];if(C&&O&&"expanded"in O){const M=O.expanded;y=typeof y>"u"?!O.expanded:y,l.value[C].expanded=y,M!==y&&u.emit("expand-change",b,y),u.store.updateTableScrollY()}},p=b=>{u.store.assertRowKey();const y=e.rowKey.value,v=tt(b,y),C=l.value[v];o.value&&C&&"loaded"in C&&!C.loaded?w(b,v,C):d(b,void 0)},w=(b,y,v)=>{const{load:C}=u.props;C&&!l.value[y].loaded&&(l.value[y].loading=!0,C(b,v,O=>{if(!Array.isArray(O))throw new TypeError("[ElTable] data must be an array");l.value[y].loading=!1,l.value[y].loaded=!0,l.value[y].expanded=!0,O.length&&(r.value[y]=O),u.emit("expand-change",b,!0)}))};return{loadData:w,loadOrToggle:p,toggleTreeExpansion:d,updateTreeExpandKeys:g,updateTreeData:m,normalize:h,states:{expandRowKeys:t,treeData:l,indent:n,lazy:o,lazyTreeNodeMap:r,lazyColumnIdentifier:i,childrenColumnName:a,checkStrictly:s}}}const xi=(e,t)=>{const l=t.sortingColumn;return!l||typeof l.sortable=="string"?e:mi(e,t.sortProp,t.sortOrder,l.sortMethod,l.sortBy)},bl=e=>{const t=[];return e.forEach(l=>{l.children&&l.children.length>0?t.push.apply(t,bl(l.children)):t.push(l)}),t};function ki(){var e;const t=Je(),{size:l}=$r((e=t.proxy)==null?void 0:e.$props),n=E(null),o=E([]),r=E([]),i=E(!1),a=E([]),s=E([]),u=E([]),c=E([]),f=E([]),h=E([]),m=E([]),g=E([]),d=[],p=E(0),w=E(0),b=E(0),y=E(!1),v=E([]),C=E(!1),O=E(!1),M=E(null),$=E({}),S=E(null),R=E(null),k=E(null),A=E(null),N=E(null);ye(o,()=>t.state&&le(!1),{deep:!0});const B=()=>{if(!n.value)throw new Error("[ElTable] prop row-key is required")},V=X=>{var ne;(ne=X.children)==null||ne.forEach(me=>{me.fixed=X.fixed,V(me)})},q=()=>{a.value.forEach(Re=>{V(Re)}),c.value=a.value.filter(Re=>Re.fixed===!0||Re.fixed==="left"),f.value=a.value.filter(Re=>Re.fixed==="right"),c.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&!a.value[0].fixed&&(a.value[0].fixed=!0,c.value.unshift(a.value[0]));const X=a.value.filter(Re=>!Re.fixed);s.value=[].concat(c.value).concat(X).concat(f.value);const ne=bl(X),me=bl(c.value),fe=bl(f.value);p.value=ne.length,w.value=me.length,b.value=fe.length,u.value=[].concat(me).concat(ne).concat(fe),i.value=c.value.length>0||f.value.length>0},le=(X,ne=!1)=>{X&&q(),ne?t.state.doLayout():t.state.debouncedUpdateLayout()},he=X=>v.value.some(ne=>Nr(ne,X)),L=()=>{y.value=!1;const X=v.value;v.value=[],X.length&&t.emit("selection-change",[])},U=()=>{let X;if(n.value){X=[];const ne=$t(v.value,n.value),me=$t(o.value,n.value);for(const fe in ne)jt(ne,fe)&&!me[fe]&&X.push(ne[fe].row)}else X=v.value.filter(ne=>!o.value.includes(ne));if(X.length){const ne=v.value.filter(me=>!X.includes(me));v.value=ne,t.emit("selection-change",ne.slice())}},oe=()=>(v.value||[]).slice(),ue=(X,ne,me=!0)=>{var fe,Re,Le,qe;const ze={children:(Re=(fe=t==null?void 0:t.store)==null?void 0:fe.states)==null?void 0:Re.childrenColumnName.value,checkStrictly:(qe=(Le=t==null?void 0:t.store)==null?void 0:Le.states)==null?void 0:qe.checkStrictly.value};if(El(v.value,X,ne,ze)){const Ge=(v.value||[]).slice();me&&t.emit("select",Ge,X),t.emit("selection-change",Ge)}},x=()=>{var X,ne;const me=O.value?!y.value:!(y.value||v.value.length);y.value=me;let fe=!1,Re=0;const Le=(ne=(X=t==null?void 0:t.store)==null?void 0:X.states)==null?void 0:ne.rowKey.value,{childrenColumnName:qe}=t.store.states,ze={children:qe.value,checkStrictly:!1};o.value.forEach((st,Ge)=>{const vt=Ge+Re;El(v.value,st,me,ze,M.value,vt)&&(fe=!0),Re+=ie(tt(st,Le))}),fe&&t.emit("selection-change",v.value?v.value.slice():[]),t.emit("select-all",(v.value||[]).slice())},K=()=>{const X=$t(v.value,n.value);o.value.forEach(ne=>{const me=tt(ne,n.value),fe=X[me];fe&&(v.value[fe.index]=ne)})},Q=()=>{var X;if(((X=o.value)==null?void 0:X.length)===0){y.value=!1;return}const{childrenColumnName:ne}=t.store.states,me=n.value?$t(v.value,n.value):void 0;let fe=0,Re=0;const Le=st=>me?!!me[tt(st,n.value)]:v.value.includes(st),qe=st=>{var Ge;for(const vt of st){const Ot=M.value&&M.value.call(null,vt,fe);if(Le(vt))Re++;else if(!M.value||Ot)return!1;if(fe++,(Ge=vt[ne.value])!=null&&Ge.length&&!qe(vt[ne.value]))return!1}return!0},ze=qe(o.value||[]);y.value=Re===0?!1:ze},ie=X=>{var ne;if(!t||!t.store)return 0;const{treeData:me}=t.store.states;let fe=0;const Re=(ne=me.value[X])==null?void 0:ne.children;return Re&&(fe+=Re.length,Re.forEach(Le=>{fe+=ie(Le)})),fe},xe=(X,ne)=>{Array.isArray(X)||(X=[X]);const me={};return X.forEach(fe=>{$.value[fe.id]=ne,me[fe.columnKey||fe.id]=ne}),me},ge=(X,ne,me)=>{R.value&&R.value!==X&&(R.value.order=null),R.value=X,k.value=ne,A.value=me},Se=()=>{let X=T(r);Object.keys($.value).forEach(ne=>{const me=$.value[ne];if(!me||me.length===0)return;const fe=ha({columns:u.value},ne);fe&&fe.filterMethod&&(X=X.filter(Re=>me.some(Le=>fe.filterMethod.call(null,Le,Re,fe))))}),S.value=X},Ae=()=>{o.value=xi(S.value,{sortingColumn:R.value,sortProp:k.value,sortOrder:A.value})},Ye=(X=void 0)=>{X&&X.filter||Se(),Ae()},je=X=>{const{tableHeaderRef:ne}=t.refs;if(!ne)return;const me=Object.assign({},ne.filterPanels),fe=Object.keys(me);if(fe.length)if(typeof X=="string"&&(X=[X]),Array.isArray(X)){const Re=X.map(Le=>gi({columns:u.value},Le));fe.forEach(Le=>{const qe=Re.find(ze=>ze.id===Le);qe&&(qe.filteredValue=[])}),t.store.commit("filterChange",{column:Re,values:[],silent:!0,multi:!0})}else fe.forEach(Re=>{const Le=u.value.find(qe=>qe.id===Re);Le&&(Le.filteredValue=[])}),$.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},We=()=>{R.value&&(ge(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Ve,toggleRowExpansion:He,updateExpandRows:Ze,states:Z,isRowExpanded:J}=wi({data:o,rowKey:n}),{updateTreeExpandKeys:re,toggleTreeExpansion:ve,updateTreeData:pe,loadOrToggle:I,states:j}=Ri({data:o,rowKey:n}),{updateCurrentRowData:ee,updateCurrentRow:be,setCurrentRowKey:Fe,states:_e}=Si({data:o,rowKey:n});return{assertRowKey:B,updateColumns:q,scheduleLayout:le,isSelected:he,clearSelection:L,cleanSelection:U,getSelectionRows:oe,toggleRowSelection:ue,_toggleAllSelection:x,toggleAllSelection:null,updateSelectionByRowKey:K,updateAllSelected:Q,updateFilters:xe,updateCurrentRow:be,updateSort:ge,execFilter:Se,execSort:Ae,execQuery:Ye,clearFilter:je,clearSort:We,toggleRowExpansion:He,setExpandRowKeysAdapter:X=>{Ve(X),re(X)},setCurrentRowKey:Fe,toggleRowExpansionAdapter:(X,ne)=>{u.value.some(({type:fe})=>fe==="expand")?He(X,ne):ve(X,ne)},isRowExpanded:J,updateExpandRows:Ze,updateCurrentRowData:ee,loadOrToggle:I,updateTreeData:pe,states:{tableSize:l,rowKey:n,data:o,_data:r,isComplex:i,_columns:a,originColumns:s,columns:u,fixedColumns:c,rightFixedColumns:f,leafColumns:h,fixedLeafColumns:m,rightFixedLeafColumns:g,updateOrderFns:d,leafColumnsLength:p,fixedLeafColumnsLength:w,rightFixedLeafColumnsLength:b,isAllSelected:y,selection:v,reserveSelection:C,selectOnIndeterminate:O,selectable:M,filters:$,filteredData:S,sortingColumn:R,sortProp:k,sortOrder:A,hoverRow:N,...Z,...j,..._e}}}function dn(e,t){return e.map(l=>{var n;return l.id===t.id?t:((n=l.children)!=null&&n.length&&(l.children=dn(l.children,t)),l)})}function cn(e){e.forEach(t=>{var l,n;t.no=(l=t.getColumnIndex)==null?void 0:l.call(t),(n=t.children)!=null&&n.length&&cn(t.children)}),e.sort((t,l)=>t.no-l.no)}function Ti(){const e=Je(),t=ki();return{ns:nt("table"),...t,mutations:{setData(i,a){const s=T(i._data)!==a;i.data.value=a,i._data.value=a,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),T(i.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):s?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(i,a,s,u){const c=T(i._columns);let f=[];s?(s&&!s.children&&(s.children=[]),s.children.push(a),f=dn(c,s)):(c.push(a),f=c),cn(f),i._columns.value=f,i.updateOrderFns.push(u),a.type==="selection"&&(i.selectable.value=a.selectable,i.reserveSelection.value=a.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},updateColumnOrder(i,a){var s;((s=a.getColumnIndex)==null?void 0:s.call(a))!==a.no&&(cn(i._columns.value),e.$ready&&e.store.updateColumns())},removeColumn(i,a,s,u){const c=T(i._columns)||[];if(s)s.children.splice(s.children.findIndex(h=>h.id===a.id),1),lt(()=>{var h;((h=s.children)==null?void 0:h.length)===0&&delete s.children}),i._columns.value=dn(c,s);else{const h=c.indexOf(a);h>-1&&(c.splice(h,1),i._columns.value=c)}const f=i.updateOrderFns.indexOf(u);f>-1&&i.updateOrderFns.splice(f,1),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(i,a){const{prop:s,order:u,init:c}=a;if(s){const f=T(i.columns).find(h=>h.property===s);f&&(f.order=u,e.store.updateSort(f,s,u),e.store.commit("changeSortCondition",{init:c}))}},changeSortCondition(i,a){const{sortingColumn:s,sortProp:u,sortOrder:c}=i,f=T(s),h=T(u),m=T(c);m===null&&(i.sortingColumn.value=null,i.sortProp.value=null);const g={filter:!0};e.store.execQuery(g),(!a||!(a.silent||a.init))&&e.emit("sort-change",{column:f,prop:h,order:m}),e.store.updateTableScrollY()},filterChange(i,a){const{column:s,values:u,silent:c}=a,f=e.store.updateFilters(s,u);e.store.execQuery(),c||e.emit("filter-change",f),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(i,a){e.store.toggleRowSelection(a),e.store.updateAllSelected()},setHoverRow(i,a){i.hoverRow.value=a},setCurrentRow(i,a){e.store.updateCurrentRow(a)}},commit:function(i,...a){const s=e.store.mutations;if(s[i])s[i].apply(e,[e.store.states].concat(a));else throw new Error(`Action not found: ${i}`)},updateTableScrollY:function(){lt(()=>e.layout.updateScrollY.apply(e.layout))}}}const ll={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function Ei(e,t){if(!e)throw new Error("Table is required.");const l=Ti();return l.toggleAllSelection=ol(l._toggleAllSelection,10),Object.keys(ll).forEach(n=>{pa(ya(t,n),n,l)}),Oi(l,t),l}function Oi(e,t){Object.keys(ll).forEach(l=>{ye(()=>ya(t,l),n=>{pa(n,l,e)})})}function pa(e,t,l){let n=e,o=ll[t];typeof ll[t]=="object"&&(o=o.key,n=n||ll[t].default),l.states[o].value=n}function ya(e,t){if(t.includes(".")){const l=t.split(".");let n=e;return l.forEach(o=>{n=n[o]}),n}else return e[t]}class Hi{constructor(t){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=E(null),this.scrollX=E(!1),this.scrollY=E(!1),this.bodyWidth=E(null),this.fixedWidth=E(null),this.rightFixedWidth=E(null),this.gutterWidth=0;for(const l in t)jt(t,l)&&(Dr(this[l])?this[l].value=t[l]:this[l]=t[l]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const l=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(l!=null&&l.wrapRef)){let n=!0;const o=this.scrollY.value;return n=l.wrapRef.scrollHeight>l.wrapRef.clientHeight,this.scrollY.value=n,o!==n}return!1}setHeight(t,l="height"){if(!Bt)return;const n=this.table.vnode.el;if(t=pi(t),this.height.value=Number(t),!n&&(t||t===0))return lt(()=>this.setHeight(t,l));typeof t=="number"?(n.style[l]=`${t}px`,this.updateElsHeight()):typeof t=="string"&&(n.style[l]=t,this.updateElsHeight())}setMaxHeight(t){this.setHeight(t,"max-height")}getFlattenColumns(){const t=[];return this.table.store.states.columns.value.forEach(n=>{n.isColumnGroup?t.push.apply(t,n.columns):t.push(n)}),t}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(t){if(!t)return!0;let l=t;for(;l.tagName!=="DIV";){if(getComputedStyle(l).display==="none")return!0;l=l.parentElement}return!1}updateColumnsWidth(){if(!Bt)return;const t=this.fit,l=this.table.vnode.el.clientWidth;let n=0;const o=this.getFlattenColumns(),r=o.filter(s=>typeof s.width!="number");if(o.forEach(s=>{typeof s.width=="number"&&s.realWidth&&(s.realWidth=null)}),r.length>0&&t){if(o.forEach(s=>{n+=Number(s.width||s.minWidth||80)}),n<=l){this.scrollX.value=!1;const s=l-n;if(r.length===1)r[0].realWidth=Number(r[0].minWidth||80)+s;else{const u=r.reduce((h,m)=>h+Number(m.minWidth||80),0),c=s/u;let f=0;r.forEach((h,m)=>{if(m===0)return;const g=Math.floor(Number(h.minWidth||80)*c);f+=g,h.realWidth=Number(h.minWidth||80)+g}),r[0].realWidth=Number(r[0].minWidth||80)+s-f}}else this.scrollX.value=!0,r.forEach(s=>{s.realWidth=Number(s.minWidth)});this.bodyWidth.value=Math.max(n,l),this.table.state.resizeState.value.width=this.bodyWidth.value}else o.forEach(s=>{!s.width&&!s.minWidth?s.realWidth=80:s.realWidth=Number(s.width||s.minWidth),n+=s.realWidth}),this.scrollX.value=n>l,this.bodyWidth.value=n;const i=this.store.states.fixedColumns.value;if(i.length>0){let s=0;i.forEach(u=>{s+=Number(u.realWidth||u.width)}),this.fixedWidth.value=s}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let s=0;a.forEach(u=>{s+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=s}this.notifyObservers("columns")}addObserver(t){this.observers.push(t)}removeObserver(t){const l=this.observers.indexOf(t);l!==-1&&this.observers.splice(l,1)}notifyObservers(t){this.observers.forEach(n=>{var o,r;switch(t){case"columns":(o=n.state)==null||o.onColumnsChange(this);break;case"scrollable":(r=n.state)==null||r.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${t}.`)}})}}const{CheckboxGroup:Fi}=mt,Ii=Ne({name:"ElTableFilterPanel",components:{ElCheckbox:mt,ElCheckboxGroup:Fi,ElScrollbar:vn,ElTooltip:$o,ElIcon:bt,ArrowDown:Ar,ArrowUp:Pr},directives:{ClickOutside:Lr},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(e){const t=Je(),{t:l}=$l(),n=nt("table-filter"),o=t==null?void 0:t.parent;o.filterPanels.value[e.column.id]||(o.filterPanels.value[e.column.id]=t);const r=E(!1),i=E(null),a=F(()=>e.column&&e.column.filters),s=F(()=>e.column.filterClassName?`${n.b()} ${e.column.filterClassName}`:n.b()),u=F({get:()=>{var C;return(((C=e.column)==null?void 0:C.filteredValue)||[])[0]},set:C=>{c.value&&(typeof C<"u"&&C!==null?c.value.splice(0,1,C):c.value.splice(0,1))}}),c=F({get(){return e.column?e.column.filteredValue||[]:[]},set(C){e.column&&e.upDataColumn("filteredValue",C)}}),f=F(()=>e.column?e.column.filterMultiple:!0),h=C=>C.value===u.value,m=()=>{r.value=!1},g=C=>{C.stopPropagation(),r.value=!r.value},d=()=>{r.value=!1},p=()=>{y(c.value),m()},w=()=>{c.value=[],y(c.value),m()},b=C=>{u.value=C,y(typeof C<"u"&&C!==null?c.value:[]),m()},y=C=>{e.store.commit("filterChange",{column:e.column,values:C}),e.store.updateAllSelected()};ye(r,C=>{e.column&&e.upDataColumn("filterOpened",C)},{immediate:!0});const v=F(()=>{var C,O;return(O=(C=i.value)==null?void 0:C.popperRef)==null?void 0:O.contentRef});return{tooltipVisible:r,multiple:f,filterClassName:s,filteredValue:c,filterValue:u,filters:a,handleConfirm:p,handleReset:w,handleSelect:b,isActive:h,t:l,ns:n,showFilterPanel:g,hideFilterPanel:d,popperPaneRef:v,tooltip:i}}});function Mi(e,t,l,n,o,r){const i=W("el-checkbox"),a=W("el-checkbox-group"),s=W("el-scrollbar"),u=W("arrow-up"),c=W("arrow-down"),f=W("el-icon"),h=W("el-tooltip"),m=Do("click-outside");return P(),se(h,{ref:"tooltip",visible:e.tooltipVisible,offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":e.filterClassName,persistent:""},{content:G(()=>[e.multiple?(P(),Y("div",{key:0},[we("div",{class:ke(e.ns.e("content"))},[D(s,{"wrap-class":e.ns.e("wrap")},{default:G(()=>[D(a,{modelValue:e.filteredValue,"onUpdate:modelValue":g=>e.filteredValue=g,class:ke(e.ns.e("checkbox-group"))},{default:G(()=>[(P(!0),Y($e,null,Pe(e.filters,g=>(P(),se(i,{key:g.value,value:g.value},{default:G(()=>[pt(Be(g.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),we("div",{class:ke(e.ns.e("bottom"))},[we("button",{class:ke({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:e.handleConfirm},Be(e.t("el.table.confirmFilter")),11,["disabled","onClick"]),we("button",{type:"button",onClick:e.handleReset},Be(e.t("el.table.resetFilter")),9,["onClick"])],2)])):(P(),Y("ul",{key:1,class:ke(e.ns.e("list"))},[we("li",{class:ke([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:g=>e.handleSelect(null)},Be(e.t("el.table.clearFilter")),11,["onClick"]),(P(!0),Y($e,null,Pe(e.filters,g=>(P(),Y("li",{key:g.value,class:ke([e.ns.e("list-item"),e.ns.is("active",e.isActive(g))]),label:g.value,onClick:d=>e.handleSelect(g.value)},Be(g.text),11,["label","onClick"]))),128))],2))]),default:G(()=>[gl((P(),Y("span",{class:ke([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:e.showFilterPanel},[D(f,null,{default:G(()=>[Oe(e.$slots,"filter-icon",{},()=>[e.column.filterOpened?(P(),se(u,{key:0})):(P(),se(c,{key:1}))])]),_:3})],10,["onClick"])),[[m,e.hideFilterPanel,e.popperPaneRef]])]),_:3},8,["visible","placement","popper-class"])}var $i=No(Ii,[["render",Mi],["__file","filter-panel.vue"]]);function Ca(e){const t=Je();pn(()=>{l.value.addObserver(t)}),Ct(()=>{n(l.value),o(l.value)}),zr(()=>{n(l.value),o(l.value)}),yn(()=>{l.value.removeObserver(t)});const l=F(()=>{const r=e.layout;if(!r)throw new Error("Can not find table layout.");return r}),n=r=>{var i;const a=((i=e.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const s=r.getFlattenColumns(),u={};s.forEach(c=>{u[c.id]=c});for(let c=0,f=a.length;c<f;c++){const h=a[c],m=h.getAttribute("name"),g=u[m];g&&h.setAttribute("width",g.realWidth||g.width)}},o=r=>{var i,a;const s=((i=e.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let c=0,f=s.length;c<f;c++)s[c].setAttribute("width",r.scrollY.value?r.gutterWidth:"0");const u=((a=e.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let c=0,f=u.length;c<f;c++){const h=u[c];h.style.width=r.scrollY.value?`${r.gutterWidth}px`:"0",h.style.display=r.scrollY.value?"":"none"}};return{tableLayout:l.value,onColumnsChange:n,onScrollableChange:o}}const wt=Symbol("ElTable");function Ni(e,t){const l=Je(),n=gt(wt),o=d=>{d.stopPropagation()},r=(d,p)=>{!p.filters&&p.sortable?g(d,p,!1):p.filterable&&!p.sortable&&o(d),n==null||n.emit("header-click",p,d)},i=(d,p)=>{n==null||n.emit("header-contextmenu",p,d)},a=E(null),s=E(!1),u=E({}),c=(d,p)=>{if(Bt&&!(p.children&&p.children.length>0)&&a.value&&e.border){s.value=!0;const w=n;t("set-drag-visible",!0);const y=(w==null?void 0:w.vnode.el).getBoundingClientRect().left,v=l.vnode.el.querySelector(`th.${p.id}`),C=v.getBoundingClientRect(),O=C.left-y+30;xl(v,"noclick"),u.value={startMouseLeft:d.clientX,startLeft:C.right-y,startColumnLeft:C.left-y,tableLeft:y};const M=w==null?void 0:w.refs.resizeProxy;M.style.left=`${u.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const $=R=>{const k=R.clientX-u.value.startMouseLeft,A=u.value.startLeft+k;M.style.left=`${Math.max(O,A)}px`},S=()=>{if(s.value){const{startColumnLeft:R,startLeft:k}=u.value,N=Number.parseInt(M.style.left,10)-R;p.width=p.realWidth=N,w==null||w.emit("header-dragend",p.width,k-R,p,d),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",s.value=!1,a.value=null,u.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",S),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{al(v,"noclick")},0)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",S)}},f=(d,p)=>{if(p.children&&p.children.length>0)return;const w=d.target;if(!Kr(w))return;const b=w==null?void 0:w.closest("th");if(!(!p||!p.resizable)&&!s.value&&e.border){const y=b.getBoundingClientRect(),v=document.body.style;y.width>12&&y.right-d.pageX<8?(v.cursor="col-resize",el(b,"is-sortable")&&(b.style.cursor="col-resize"),a.value=p):s.value||(v.cursor="",el(b,"is-sortable")&&(b.style.cursor="pointer"),a.value=null)}},h=()=>{Bt&&(document.body.style.cursor="")},m=({order:d,sortOrders:p})=>{if(d==="")return p[0];const w=p.indexOf(d||null);return p[w>p.length-2?0:w+1]},g=(d,p,w)=>{var b;d.stopPropagation();const y=p.order===w?null:w||m(p),v=(b=d.target)==null?void 0:b.closest("th");if(v&&el(v,"noclick")){al(v,"noclick");return}if(!p.sortable)return;const C=d.currentTarget;if(["ascending","descending"].some(R=>el(C,R)&&!p.sortOrders.includes(R)))return;const O=e.store.states;let M=O.sortProp.value,$;const S=O.sortingColumn.value;(S!==p||S===p&&S.order===null)&&(S&&(S.order=null),O.sortingColumn.value=p,M=p.property),y?$=p.order=y:$=p.order=null,O.sortProp.value=M,O.sortOrder.value=$,n==null||n.store.commit("changeSortCondition")};return{handleHeaderClick:r,handleHeaderContextMenu:i,handleMouseDown:c,handleMouseMove:f,handleMouseOut:h,handleSortClick:g,handleFilterClick:o}}function Di(e){const t=gt(wt),l=nt("table");return{getHeaderRowStyle:a=>{const s=t==null?void 0:t.props.headerRowStyle;return typeof s=="function"?s.call(null,{rowIndex:a}):s},getHeaderRowClass:a=>{const s=[],u=t==null?void 0:t.props.headerRowClassName;return typeof u=="string"?s.push(u):typeof u=="function"&&s.push(u.call(null,{rowIndex:a})),s.join(" ")},getHeaderCellStyle:(a,s,u,c)=>{var f;let h=(f=t==null?void 0:t.props.headerCellStyle)!=null?f:{};typeof h=="function"&&(h=h.call(null,{rowIndex:a,columnIndex:s,row:u,column:c}));const m=En(s,c.fixed,e.store,u);return Ut(m,"left"),Ut(m,"right"),Object.assign({},h,m)},getHeaderCellClass:(a,s,u,c)=>{const f=Tn(l.b(),s,c.fixed,e.store,u),h=[c.id,c.order,c.headerAlign,c.className,c.labelClassName,...f];c.children||h.push("is-leaf"),c.sortable&&h.push("is-sortable");const m=t==null?void 0:t.props.headerCellClassName;return typeof m=="string"?h.push(m):typeof m=="function"&&h.push(m.call(null,{rowIndex:a,columnIndex:s,row:u,column:c})),h.push(l.e("cell")),h.filter(g=>!!g).join(" ")}}}const ba=e=>{const t=[];return e.forEach(l=>{l.children?(t.push(l),t.push.apply(t,ba(l.children))):t.push(l)}),t},wa=e=>{let t=1;const l=(r,i)=>{if(i&&(r.level=i.level+1,t<r.level&&(t=r.level)),r.children){let a=0;r.children.forEach(s=>{l(s,r),a+=s.colSpan}),r.colSpan=a}else r.colSpan=1};e.forEach(r=>{r.level=1,l(r,void 0)});const n=[];for(let r=0;r<t;r++)n.push([]);return ba(e).forEach(r=>{r.children?(r.rowSpan=1,r.children.forEach(i=>i.isSubColumn=!0)):r.rowSpan=t-r.level+1,n[r.level-1].push(r)}),n};function Ai(e){const t=gt(wt),l=F(()=>wa(e.store.states.originColumns.value));return{isGroup:F(()=>{const r=l.value.length>1;return r&&t&&(t.state.isGroup.value=!0),r}),toggleAllSelection:r=>{r.stopPropagation(),t==null||t.store.commit("toggleAllSelection")},columnRows:l}}var Pi=Ne({name:"ElTableHeader",components:{ElCheckbox:mt},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e,{emit:t}){const l=Je(),n=gt(wt),o=nt("table"),r=E({}),{onColumnsChange:i,onScrollableChange:a}=Ca(n);Ct(async()=>{await lt(),await lt();const{prop:O,order:M}=e.defaultSort;n==null||n.store.commit("sort",{prop:O,order:M,init:!0})});const{handleHeaderClick:s,handleHeaderContextMenu:u,handleMouseDown:c,handleMouseMove:f,handleMouseOut:h,handleSortClick:m,handleFilterClick:g}=Ni(e,t),{getHeaderRowStyle:d,getHeaderRowClass:p,getHeaderCellStyle:w,getHeaderCellClass:b}=Di(e),{isGroup:y,toggleAllSelection:v,columnRows:C}=Ai(e);return l.state={onColumnsChange:i,onScrollableChange:a},l.filterPanels=r,{ns:o,filterPanels:r,onColumnsChange:i,onScrollableChange:a,columnRows:C,getHeaderRowClass:p,getHeaderRowStyle:d,getHeaderCellClass:b,getHeaderCellStyle:w,handleHeaderClick:s,handleHeaderContextMenu:u,handleMouseDown:c,handleMouseMove:f,handleMouseOut:h,handleSortClick:m,handleFilterClick:g,isGroup:y,toggleAllSelection:v}},render(){const{ns:e,isGroup:t,columnRows:l,getHeaderCellStyle:n,getHeaderCellClass:o,getHeaderRowClass:r,getHeaderRowStyle:i,handleHeaderClick:a,handleHeaderContextMenu:s,handleMouseDown:u,handleMouseMove:c,handleSortClick:f,handleMouseOut:h,store:m,$parent:g}=this;let d=1;return ce("thead",{class:{[e.is("group")]:t}},l.map((p,w)=>ce("tr",{class:r(w),key:w,style:i(w)},p.map((b,y)=>(b.rowSpan>d&&(d=b.rowSpan),ce("th",{class:o(w,y,p,b),colspan:b.colSpan,key:`${b.id}-thead`,rowspan:b.rowSpan,style:n(w,y,p,b),onClick:v=>{v.currentTarget.classList.contains("noclick")||a(v,b)},onContextmenu:v=>s(v,b),onMousedown:v=>u(v,b),onMousemove:v=>c(v,b),onMouseout:h},[ce("div",{class:["cell",b.filteredValue&&b.filteredValue.length>0?"highlight":""]},[b.renderHeader?b.renderHeader({column:b,$index:y,store:m,_self:g}):b.label,b.sortable&&ce("span",{onClick:v=>f(v,b),class:"caret-wrapper"},[ce("i",{onClick:v=>f(v,b,"ascending"),class:"sort-caret ascending"}),ce("i",{onClick:v=>f(v,b,"descending"),class:"sort-caret descending"})]),b.filterable&&ce($i,{store:m,placement:b.filterPlacement||"bottom-start",column:b,upDataColumn:(v,C)=>{b[v]=C}},{"filter-icon":()=>b.renderFilterIcon?b.renderFilterIcon({filterOpened:b.filterOpened}):null})])]))))))}});function zl(e,t,l=.03){return e-t>l}function Li(e){const t=gt(wt),l=E(""),n=E(ce("div")),o=(g,d,p)=>{var w;const b=t,y=Ll(g);let v;const C=(w=b==null?void 0:b.vnode.el)==null?void 0:w.dataset.prefix;y&&(v=co({columns:e.store.states.columns.value},y,C),v&&(b==null||b.emit(`cell-${p}`,d,v,y,g))),b==null||b.emit(`row-${p}`,d,v,g)},r=(g,d)=>{o(g,d,"dblclick")},i=(g,d)=>{e.store.commit("setCurrentRow",d),o(g,d,"click")},a=(g,d)=>{o(g,d,"contextmenu")},s=ol(g=>{e.store.commit("setHoverRow",g)},30),u=ol(()=>{e.store.commit("setHoverRow",null)},30),c=g=>{const d=window.getComputedStyle(g,null),p=Number.parseInt(d.paddingLeft,10)||0,w=Number.parseInt(d.paddingRight,10)||0,b=Number.parseInt(d.paddingTop,10)||0,y=Number.parseInt(d.paddingBottom,10)||0;return{left:p,right:w,top:b,bottom:y}},f=(g,d,p)=>{let w=d.target.parentNode;for(;g>1&&(w=w==null?void 0:w.nextSibling,!(!w||w.nodeName!=="TR"));)p(w,"hover-row hover-fixed-row"),g--};return{handleDoubleClick:r,handleClick:i,handleContextMenu:a,handleMouseEnter:s,handleMouseLeave:u,handleCellMouseEnter:(g,d,p)=>{var w;const b=t,y=Ll(g),v=(w=b==null?void 0:b.vnode.el)==null?void 0:w.dataset.prefix;if(y){const le=co({columns:e.store.states.columns.value},y,v);y.rowSpan>1&&f(y.rowSpan,g,xl);const he=b.hoverState={cell:y,column:le,row:d};b==null||b.emit("cell-mouse-enter",he.row,he.column,he.cell,g)}if(!p)return;const C=g.target.querySelector(".cell");if(!(el(C,`${v}-tooltip`)&&C.childNodes.length))return;const O=document.createRange();O.setStart(C,0),O.setEnd(C,C.childNodes.length);const{width:M,height:$}=O.getBoundingClientRect(),{width:S,height:R}=C.getBoundingClientRect(),{top:k,left:A,right:N,bottom:B}=c(C),V=A+N,q=k+B;(zl(M+V,S)||zl($+q,R)||zl(C.scrollWidth,S))&&bi(p,y.innerText||y.textContent,y,b)},handleCellMouseLeave:g=>{const d=Ll(g);if(!d)return;d.rowSpan>1&&f(d.rowSpan,g,al);const p=t==null?void 0:t.hoverState;t==null||t.emit("cell-mouse-leave",p==null?void 0:p.row,p==null?void 0:p.column,p==null?void 0:p.cell,g)},tooltipContent:l,tooltipTrigger:n}}function zi(e){const t=gt(wt),l=nt("table");return{getRowStyle:(u,c)=>{const f=t==null?void 0:t.props.rowStyle;return typeof f=="function"?f.call(null,{row:u,rowIndex:c}):f||null},getRowClass:(u,c)=>{const f=[l.e("row")];t!=null&&t.props.highlightCurrentRow&&u===e.store.states.currentRow.value&&f.push("current-row"),e.stripe&&c%2===1&&f.push(l.em("row","striped"));const h=t==null?void 0:t.props.rowClassName;return typeof h=="string"?f.push(h):typeof h=="function"&&f.push(h.call(null,{row:u,rowIndex:c})),f},getCellStyle:(u,c,f,h)=>{const m=t==null?void 0:t.props.cellStyle;let g=m!=null?m:{};typeof m=="function"&&(g=m.call(null,{rowIndex:u,columnIndex:c,row:f,column:h}));const d=En(c,e==null?void 0:e.fixed,e.store);return Ut(d,"left"),Ut(d,"right"),Object.assign({},g,d)},getCellClass:(u,c,f,h,m)=>{const g=Tn(l.b(),c,e==null?void 0:e.fixed,e.store,void 0,m),d=[h.id,h.align,h.className,...g],p=t==null?void 0:t.props.cellClassName;return typeof p=="string"?d.push(p):typeof p=="function"&&d.push(p.call(null,{rowIndex:u,columnIndex:c,row:f,column:h})),d.push(l.e("cell")),d.filter(w=>!!w).join(" ")},getSpan:(u,c,f,h)=>{let m=1,g=1;const d=t==null?void 0:t.props.spanMethod;if(typeof d=="function"){const p=d({row:u,column:c,rowIndex:f,columnIndex:h});Array.isArray(p)?(m=p[0],g=p[1]):typeof p=="object"&&(m=p.rowspan,g=p.colspan)}return{rowspan:m,colspan:g}},getColspanRealWidth:(u,c,f)=>{if(c<1)return u[f].realWidth;const h=u.map(({realWidth:m,width:g})=>m||g).slice(f,f+c);return Number(h.reduce((m,g)=>Number(m)+Number(g),-1))}}}function Ki(e){const t=gt(wt),l=nt("table"),{handleDoubleClick:n,handleClick:o,handleContextMenu:r,handleMouseEnter:i,handleMouseLeave:a,handleCellMouseEnter:s,handleCellMouseLeave:u,tooltipContent:c,tooltipTrigger:f}=Li(e),{getRowStyle:h,getRowClass:m,getCellStyle:g,getCellClass:d,getSpan:p,getColspanRealWidth:w}=zi(e),b=F(()=>e.store.states.columns.value.findIndex(({type:M})=>M==="default")),y=(M,$)=>{const S=t.props.rowKey;return S?tt(M,S):$},v=(M,$,S,R=!1)=>{const{tooltipEffect:k,tooltipOptions:A,store:N}=e,{indent:B,columns:V}=N.states,q=m(M,$);let le=!0;return S&&(q.push(l.em("row",`level-${S.level}`)),le=S.display),ce("tr",{style:[le?null:{display:"none"},h(M,$)],class:q,key:y(M,$),onDblclick:L=>n(L,M),onClick:L=>o(L,M),onContextmenu:L=>r(L,M),onMouseenter:()=>i($),onMouseleave:a},V.value.map((L,U)=>{const{rowspan:oe,colspan:ue}=p(M,L,$,U);if(!oe||!ue)return null;const x=Object.assign({},L);x.realWidth=w(V.value,ue,U);const K={store:e.store,_self:e.context||t,column:x,row:M,$index:$,cellIndex:U,expanded:R};U===b.value&&S&&(K.treeNode={indent:S.level*B.value,level:S.level},typeof S.expanded=="boolean"&&(K.treeNode.expanded=S.expanded,"loading"in S&&(K.treeNode.loading=S.loading),"noLazyChildren"in S&&(K.treeNode.noLazyChildren=S.noLazyChildren)));const Q=`${y(M,$)},${U}`,ie=x.columnKey||x.rawColumnKey||"",xe=C(U,L,K),ge=L.showOverflowTooltip&&ei({effect:k},A,L.showOverflowTooltip);return ce("td",{style:g($,U,M,L),class:d($,U,M,L,ue-1),key:`${ie}${Q}`,rowspan:oe,colspan:ue,onMouseenter:Se=>s(Se,M,ge),onMouseleave:u},[xe])}))},C=(M,$,S)=>$.renderCell(S);return{wrappedRowRender:(M,$)=>{const S=e.store,{isRowExpanded:R,assertRowKey:k}=S,{treeData:A,lazyTreeNodeMap:N,childrenColumnName:B,rowKey:V}=S.states,q=S.states.columns.value;if(q.some(({type:he})=>he==="expand")){const he=R(M),L=v(M,$,void 0,he),U=t.renderExpanded;return he?U?[[L,ce("tr",{key:`expanded-row__${L.key}`},[ce("td",{colspan:q.length,class:`${l.e("cell")} ${l.e("expanded-cell")}`},[U({row:M,$index:$,store:S,expanded:he})])])]]:(console.error("[Element Error]renderExpanded is required."),L):[[L]]}else if(Object.keys(A.value).length){k();const he=tt(M,V.value);let L=A.value[he],U=null;L&&(U={expanded:L.expanded,level:L.level,display:!0},typeof L.lazy=="boolean"&&(typeof L.loaded=="boolean"&&L.loaded&&(U.noLazyChildren=!(L.children&&L.children.length)),U.loading=L.loading));const oe=[v(M,$,U)];if(L){let ue=0;const x=(Q,ie)=>{Q&&Q.length&&ie&&Q.forEach(xe=>{const ge={display:ie.display&&ie.expanded,level:ie.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Se=tt(xe,V.value);if(Se==null)throw new Error("For nested data item, row-key is required.");if(L={...A.value[Se]},L&&(ge.expanded=L.expanded,L.level=L.level||ge.level,L.display=!!(L.expanded&&ge.display),typeof L.lazy=="boolean"&&(typeof L.loaded=="boolean"&&L.loaded&&(ge.noLazyChildren=!(L.children&&L.children.length)),ge.loading=L.loading)),ue++,oe.push(v(xe,$+ue,ge)),L){const Ae=N.value[Se]||xe[B.value];x(Ae,L)}})};L.display=!0;const K=N.value[he]||M[B.value];x(K,L)}return oe}else return v(M,$,void 0)},tooltipContent:c,tooltipTrigger:f}}const Wi={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var Vi=Ne({name:"ElTableBody",props:Wi,setup(e){const t=Je(),l=gt(wt),n=nt("table"),{wrappedRowRender:o,tooltipContent:r,tooltipTrigger:i}=Ki(e),{onColumnsChange:a,onScrollableChange:s}=Ca(l),u=[];return ye(e.store.states.hoverRow,(c,f)=>{var h;const m=t==null?void 0:t.vnode.el,g=Array.from((m==null?void 0:m.children)||[]).filter(w=>w==null?void 0:w.classList.contains(`${n.e("row")}`));let d=c;const p=(h=g[d])==null?void 0:h.childNodes;if(p!=null&&p.length){let w=0;Array.from(p).reduce((y,v,C)=>{var O,M;return((O=p[C])==null?void 0:O.colSpan)>1&&(w=(M=p[C])==null?void 0:M.colSpan),v.nodeName!=="TD"&&w===0&&y.push(C),w>0&&w--,y},[]).forEach(y=>{var v;for(d=c;d>0;){const C=(v=g[d-1])==null?void 0:v.childNodes;if(C[y]&&C[y].nodeName==="TD"&&C[y].rowSpan>1){xl(C[y],"hover-cell"),u.push(C[y]);break}d--}})}else u.forEach(w=>al(w,"hover-cell")),u.length=0;!e.store.states.isComplex.value||!Bt||Yo(()=>{const w=g[f],b=g[c];w&&!w.classList.contains("hover-fixed-row")&&al(w,"hover-row"),b&&xl(b,"hover-row")})}),yn(()=>{var c;(c=ct)==null||c()}),{ns:n,onColumnsChange:a,onScrollableChange:s,wrappedRowRender:o,tooltipContent:r,tooltipTrigger:i}},render(){const{wrappedRowRender:e,store:t}=this,l=t.states.data.value||[];return ce("tbody",{tabIndex:-1},[l.reduce((n,o)=>n.concat(e(o,n.length)),[])])}});function Bi(){const e=gt(wt),t=e==null?void 0:e.store,l=F(()=>t.states.fixedLeafColumnsLength.value),n=F(()=>t.states.rightFixedColumns.value.length),o=F(()=>t.states.columns.value.length),r=F(()=>t.states.fixedColumns.value.length),i=F(()=>t.states.rightFixedColumns.value.length);return{leftFixedLeafCount:l,rightFixedLeafCount:n,columnsCount:o,leftFixedCount:r,rightFixedCount:i,columns:t.states.columns}}function ji(e){const{columns:t}=Bi(),l=nt("table");return{getCellClasses:(r,i)=>{const a=r[i],s=[l.e("cell"),a.id,a.align,a.labelClassName,...Tn(l.b(),i,a.fixed,e.store)];return a.className&&s.push(a.className),a.children||s.push(l.is("leaf")),s},getCellStyles:(r,i)=>{const a=En(i,r.fixed,e.store);return Ut(a,"left"),Ut(a,"right"),a},columns:t}}var _i=Ne({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:l,columns:n}=ji(e);return{ns:nt("table"),getCellClasses:t,getCellStyles:l,columns:n}},render(){const{columns:e,getCellStyles:t,getCellClasses:l,summaryMethod:n,sumText:o}=this,r=this.store.states.data.value;let i=[];return n?i=n({columns:e,data:r}):e.forEach((a,s)=>{if(s===0){i[s]=o;return}const u=r.map(m=>Number(m[a.property])),c=[];let f=!0;u.forEach(m=>{if(!Number.isNaN(+m)){f=!1;const g=`${m}`.split(".")[1];c.push(g?g.length:0)}});const h=Math.max.apply(null,c);f?i[s]="":i[s]=u.reduce((m,g)=>{const d=Number(g);return Number.isNaN(+d)?m:Number.parseFloat((m+g).toFixed(Math.min(h,20)))},0)}),ce(ce("tfoot",[ce("tr",{},[...e.map((a,s)=>ce("td",{key:s,colspan:a.colSpan,rowspan:a.rowSpan,class:l(e,s),style:t(a,s)},[ce("div",{class:["cell",a.labelClassName]},[i[s]])]))])]))}});function Ui(e){return{setCurrentRow:c=>{e.commit("setCurrentRow",c)},getSelectionRows:()=>e.getSelectionRows(),toggleRowSelection:(c,f)=>{e.toggleRowSelection(c,f,!1),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:c=>{e.clearFilter(c)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(c,f)=>{e.toggleRowExpansionAdapter(c,f)},clearSort:()=>{e.clearSort()},sort:(c,f)=>{e.commit("sort",{prop:c,order:f})}}}function qi(e,t,l,n){const o=E(!1),r=E(null),i=E(!1),a=L=>{i.value=L},s=E({width:null,height:null,headerHeight:null}),u=E(!1),c={display:"inline-block",verticalAlign:"middle"},f=E(),h=E(0),m=E(0),g=E(0),d=E(0),p=E(0);tl(()=>{t.setHeight(e.height)}),tl(()=>{t.setMaxHeight(e.maxHeight)}),ye(()=>[e.currentRowKey,l.states.rowKey],([L,U])=>{!T(U)||!T(L)||l.setCurrentRowKey(`${L}`)},{immediate:!0}),ye(()=>e.data,L=>{n.store.commit("setData",L)},{immediate:!0,deep:!0}),tl(()=>{e.expandRowKeys&&l.setExpandRowKeysAdapter(e.expandRowKeys)});const w=()=>{n.store.commit("setHoverRow",null),n.hoverState&&(n.hoverState=null)},b=(L,U)=>{const{pixelX:oe,pixelY:ue}=U;Math.abs(oe)>=Math.abs(ue)&&(n.refs.bodyWrapper.scrollLeft+=U.pixelX/5)},y=F(()=>e.height||e.maxHeight||l.states.fixedColumns.value.length>0||l.states.rightFixedColumns.value.length>0),v=F(()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""})),C=()=>{y.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(S)};Ct(async()=>{await lt(),l.updateColumns(),R(),requestAnimationFrame(C);const L=n.vnode.el,U=n.refs.headerWrapper;e.flexible&&L&&L.parentElement&&(L.parentElement.style.minWidth="0"),s.value={width:f.value=L.offsetWidth,height:L.offsetHeight,headerHeight:e.showHeader&&U?U.offsetHeight:null},l.states.columns.value.forEach(oe=>{oe.filteredValue&&oe.filteredValue.length&&n.store.commit("filterChange",{column:oe,values:oe.filteredValue,silent:!0})}),n.$ready=!0});const O=(L,U)=>{if(!L)return;const oe=Array.from(L.classList).filter(ue=>!ue.startsWith("is-scrolling-"));oe.push(t.scrollX.value?U:"is-scrolling-none"),L.className=oe.join(" ")},M=L=>{const{tableWrapper:U}=n.refs;O(U,L)},$=L=>{const{tableWrapper:U}=n.refs;return!!(U&&U.classList.contains(L))},S=function(){if(!n.refs.scrollBarRef)return;if(!t.scrollX.value){const ie="is-scrolling-none";$(ie)||M(ie);return}const L=n.refs.scrollBarRef.wrapRef;if(!L)return;const{scrollLeft:U,offsetWidth:oe,scrollWidth:ue}=L,{headerWrapper:x,footerWrapper:K}=n.refs;x&&(x.scrollLeft=U),K&&(K.scrollLeft=U);const Q=ue-oe-1;U>=Q?M("is-scrolling-right"):M(U===0?"is-scrolling-left":"is-scrolling-middle")},R=()=>{n.refs.scrollBarRef&&(n.refs.scrollBarRef.wrapRef&&Ul(n.refs.scrollBarRef.wrapRef,"scroll",S,{passive:!0}),e.fit?Yl(n.vnode.el,k):Ul(window,"resize",k),Yl(n.refs.bodyWrapper,()=>{var L,U;k(),(U=(L=n.refs)==null?void 0:L.scrollBarRef)==null||U.update()}))},k=()=>{var L,U,oe,ue;const x=n.vnode.el;if(!n.$ready||!x)return;let K=!1;const{width:Q,height:ie,headerHeight:xe}=s.value,ge=f.value=x.offsetWidth;Q!==ge&&(K=!0);const Se=x.offsetHeight;(e.height||y.value)&&ie!==Se&&(K=!0);const Ae=e.tableLayout==="fixed"?n.refs.headerWrapper:(L=n.refs.tableHeaderRef)==null?void 0:L.$el;e.showHeader&&(Ae==null?void 0:Ae.offsetHeight)!==xe&&(K=!0),h.value=((U=n.refs.tableWrapper)==null?void 0:U.scrollHeight)||0,g.value=(Ae==null?void 0:Ae.scrollHeight)||0,d.value=((oe=n.refs.footerWrapper)==null?void 0:oe.offsetHeight)||0,p.value=((ue=n.refs.appendWrapper)==null?void 0:ue.offsetHeight)||0,m.value=h.value-g.value-d.value-p.value,K&&(s.value={width:ge,height:Se,headerHeight:e.showHeader&&(Ae==null?void 0:Ae.offsetHeight)||0},C())},A=Wr(),N=F(()=>{const{bodyWidth:L,scrollY:U,gutterWidth:oe}=t;return L.value?`${L.value-(U.value?oe:0)}px`:""}),B=F(()=>e.maxHeight?"fixed":e.tableLayout),V=F(()=>{if(e.data&&e.data.length)return null;let L="100%";e.height&&m.value&&(L=`${m.value}px`);const U=f.value;return{width:U?`${U}px`:"",height:L}}),q=F(()=>e.height?{height:Number.isNaN(Number(e.height))?e.height:`${e.height}px`}:e.maxHeight?{maxHeight:Number.isNaN(Number(e.maxHeight))?e.maxHeight:`${e.maxHeight}px`}:{}),le=F(()=>e.height?{height:"100%"}:e.maxHeight?Number.isNaN(Number(e.maxHeight))?{maxHeight:`calc(${e.maxHeight} - ${g.value+d.value}px)`}:{maxHeight:`${e.maxHeight-g.value-d.value}px`}:{});return{isHidden:o,renderExpanded:r,setDragVisible:a,isGroup:u,handleMouseLeave:w,handleHeaderFooterMousewheel:b,tableSize:A,emptyBlockStyle:V,handleFixedMousewheel:(L,U)=>{const oe=n.refs.bodyWrapper;if(Math.abs(U.spinY)>0){const ue=oe.scrollTop;U.pixelY<0&&ue!==0&&L.preventDefault(),U.pixelY>0&&oe.scrollHeight-oe.clientHeight>ue&&L.preventDefault(),oe.scrollTop+=Math.ceil(U.pixelY/5)}else oe.scrollLeft+=Math.ceil(U.pixelX/5)},resizeProxyVisible:i,bodyWidth:N,resizeState:s,doLayout:C,tableBodyStyles:v,tableLayout:B,scrollbarViewStyle:c,tableInnerStyle:q,scrollbarStyle:le}}function Gi(e){const t=E(),l=()=>{const o=e.vnode.el.querySelector(".hidden-columns"),r={childList:!0,subtree:!0},i=e.store.states.updateOrderFns;t.value=new MutationObserver(()=>{i.forEach(a=>a())}),t.value.observe(o,r)};Ct(()=>{l()}),yn(()=>{var n;(n=t.value)==null||n.disconnect()})}var Sa={data:{type:Array,default:()=>[]},size:Vr,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object]};function Ra(e){const t=e.tableLayout==="auto";let l=e.columns||[];t&&l.every(o=>o.width===void 0)&&(l=[]);const n=o=>{const r={key:`${e.tableLayout}_${o.id}`,style:{},name:void 0};return t?r.style={width:`${o.width}px`}:r.name=o.id,r};return ce("colgroup",{},l.map(o=>ce("col",n(o))))}Ra.props=["columns","tableLayout"];const Yi=()=>{const e=E(),t=(r,i)=>{const a=e.value;a&&a.scrollTo(r,i)},l=(r,i)=>{const a=e.value;a&&at(i)&&["Top","Left"].includes(r)&&a[`setScroll${r}`](i)};return{scrollBarRef:e,scrollTo:t,setScrollTop:r=>l("Top",r),setScrollLeft:r=>l("Left",r)}};let Xi=1;const Ji=Ne({name:"ElTable",directives:{Mousewheel:si},components:{TableHeader:Pi,TableBody:Vi,TableFooter:_i,ElScrollbar:vn,hColgroup:Ra},props:Sa,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t}=$l(),l=nt("table"),n=Je();Ao(wt,n);const o=Ei(n,e);n.store=o;const r=new Hi({store:n.store,table:n,fit:e.fit,showHeader:e.showHeader});n.layout=r;const i=F(()=>(o.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:s,toggleRowSelection:u,clearSelection:c,clearFilter:f,toggleAllSelection:h,toggleRowExpansion:m,clearSort:g,sort:d}=Ui(o),{isHidden:p,renderExpanded:w,setDragVisible:b,isGroup:y,handleMouseLeave:v,handleHeaderFooterMousewheel:C,tableSize:O,emptyBlockStyle:M,handleFixedMousewheel:$,resizeProxyVisible:S,bodyWidth:R,resizeState:k,doLayout:A,tableBodyStyles:N,tableLayout:B,scrollbarViewStyle:V,tableInnerStyle:q,scrollbarStyle:le}=qi(e,r,o,n),{scrollBarRef:he,scrollTo:L,setScrollLeft:U,setScrollTop:oe}=Yi(),ue=ol(A,50),x=`${l.namespace.value}-table_${Xi++}`;n.tableId=x,n.state={isGroup:y,resizeState:k,doLayout:A,debouncedUpdateLayout:ue};const K=F(()=>{var xe;return(xe=e.sumText)!=null?xe:t("el.table.sumText")}),Q=F(()=>{var xe;return(xe=e.emptyText)!=null?xe:t("el.table.emptyText")}),ie=F(()=>wa(o.states.originColumns.value)[0]);return Gi(n),{ns:l,layout:r,store:o,columns:ie,handleHeaderFooterMousewheel:C,handleMouseLeave:v,tableId:x,tableSize:O,isHidden:p,isEmpty:i,renderExpanded:w,resizeProxyVisible:S,resizeState:k,isGroup:y,bodyWidth:R,tableBodyStyles:N,emptyBlockStyle:M,debouncedUpdateLayout:ue,handleFixedMousewheel:$,setCurrentRow:a,getSelectionRows:s,toggleRowSelection:u,clearSelection:c,clearFilter:f,toggleAllSelection:h,toggleRowExpansion:m,clearSort:g,doLayout:A,sort:d,t,setDragVisible:b,context:n,computedSumText:K,computedEmptyText:Q,tableLayout:B,scrollbarViewStyle:V,tableInnerStyle:q,scrollbarStyle:le,scrollBarRef:he,scrollTo:L,setScrollLeft:U,setScrollTop:oe}}});function Zi(e,t,l,n,o,r){const i=W("hColgroup"),a=W("table-header"),s=W("table-body"),u=W("table-footer"),c=W("el-scrollbar"),f=Do("mousewheel");return P(),Y("div",{ref:"tableWrapper",class:ke([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:Xe(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:e.handleMouseLeave},[we("div",{class:ke(e.ns.e("inner-wrapper")),style:Xe(e.tableInnerStyle)},[we("div",{ref:"hiddenColumns",class:"hidden-columns"},[Oe(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?gl((P(),Y("div",{key:0,ref:"headerWrapper",class:ke(e.ns.e("header-wrapper"))},[we("table",{ref:"tableHeader",class:ke(e.ns.e("header")),style:Xe(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[D(i,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),D(a,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[f,e.handleHeaderFooterMousewheel]]):de("v-if",!0),we("div",{ref:"bodyWrapper",class:ke(e.ns.e("body-wrapper"))},[D(c,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn},{default:G(()=>[we("table",{ref:"tableBody",class:ke(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Xe({width:e.bodyWidth,tableLayout:e.tableLayout})},[D(i,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(P(),se(a,{key:0,ref:"tableHeaderRef",class:ke(e.ns.e("body-header")),border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["class","border","default-sort","store","onSetDragVisible"])):de("v-if",!0),D(s,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),e.showSummary&&e.tableLayout==="auto"?(P(),se(u,{key:1,class:ke(e.ns.e("body-footer")),border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):de("v-if",!0)],6),e.isEmpty?(P(),Y("div",{key:0,ref:"emptyBlock",style:Xe(e.emptyBlockStyle),class:ke(e.ns.e("empty-block"))},[we("span",{class:ke(e.ns.e("empty-text"))},[Oe(e.$slots,"empty",{},()=>[pt(Be(e.computedEmptyText),1)])],2)],6)):de("v-if",!0),e.$slots.append?(P(),Y("div",{key:1,ref:"appendWrapper",class:ke(e.ns.e("append-wrapper"))},[Oe(e.$slots,"append")],2)):de("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),e.showSummary&&e.tableLayout==="fixed"?gl((P(),Y("div",{key:1,ref:"footerWrapper",class:ke(e.ns.e("footer-wrapper"))},[we("table",{class:ke(e.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:Xe(e.tableBodyStyles)},[D(i,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),D(u,{border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Gn,!e.isEmpty],[f,e.handleHeaderFooterMousewheel]]):de("v-if",!0),e.border||e.isGroup?(P(),Y("div",{key:2,class:ke(e.ns.e("border-left-patch"))},null,2)):de("v-if",!0)],6),gl(we("div",{ref:"resizeProxy",class:ke(e.ns.e("column-resize-proxy"))},null,2),[[Gn,e.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var Qi=No(Ji,[["render",Zi],["__file","table.vue"]]);const eu={selection:"table-column--selection",expand:"table__expand-column"},tu={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},lu=e=>eu[e]||"",nu={selection:{renderHeader({store:e,column:t}){function l(){return e.states.data.value&&e.states.data.value.length===0}return ce(mt,{disabled:l(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value,ariaLabel:t.label})},renderCell({row:e,column:t,store:l,$index:n}){return ce(mt,{disabled:t.selectable?!t.selectable.call(null,e,n):!1,size:l.states.tableSize.value,onChange:()=>{l.commit("rowSelectedChanged",e)},onClick:o=>o.stopPropagation(),modelValue:l.isSelected(e),ariaLabel:t.label})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let l=t+1;const n=e.index;return typeof n=="number"?l=t+n:typeof n=="function"&&(l=n(t)),ce("div",{},[l])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t,expanded:l}){const{ns:n}=t,o=[n.e("expand-icon")];return l&&o.push(n.em("expand-icon","expanded")),ce("div",{class:o,onClick:function(i){i.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>[ce(bt,null,{default:()=>[ce(Cn)]})]})},sortable:!1,resizable:!1}};function ou({row:e,column:t,$index:l}){var n;const o=t.property,r=o&&Br(e,o).value;return t&&t.formatter?t.formatter(e,t,r,l):((n=r==null?void 0:r.toString)==null?void 0:n.call(r))||""}function au({row:e,treeNode:t,store:l},n=!1){const{ns:o}=l;if(!t)return n?[ce("span",{class:o.e("placeholder")})]:null;const r=[],i=function(a){a.stopPropagation(),!t.loading&&l.loadOrToggle(e)};if(t.indent&&r.push(ce("span",{class:o.e("indent"),style:{"padding-left":`${t.indent}px`}})),typeof t.expanded=="boolean"&&!t.noLazyChildren){const a=[o.e("expand-icon"),t.expanded?o.em("expand-icon","expanded"):""];let s=Cn;t.loading&&(s=jr),r.push(ce("div",{class:a,onClick:i},{default:()=>[ce(bt,{class:{[o.is("loading")]:t.loading}},{default:()=>[ce(s)]})]}))}else r.push(ce("span",{class:o.e("placeholder")}));return r}function mo(e,t){return e.reduce((l,n)=>(l[n]=n,l),t)}function ru(e,t){const l=Je();return{registerComplexWatchers:()=>{const r=["fixed"],i={realWidth:"width",realMinWidth:"minWidth"},a=mo(r,i);Object.keys(a).forEach(s=>{const u=i[s];jt(t,u)&&ye(()=>t[u],c=>{let f=c;u==="width"&&s==="realWidth"&&(f=kn(c)),u==="minWidth"&&s==="realMinWidth"&&(f=ma(c)),l.columnConfig.value[u]=f,l.columnConfig.value[s]=f;const h=u==="fixed";e.value.store.scheduleLayout(h)})})},registerNormalWatchers:()=>{const r=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],i={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=mo(r,i);Object.keys(a).forEach(s=>{const u=i[s];jt(t,u)&&ye(()=>t[u],c=>{l.columnConfig.value[s]=c})})}}}function su(e,t,l){const n=Je(),o=E(""),r=E(!1),i=E(),a=E(),s=nt("table");tl(()=>{i.value=e.align?`is-${e.align}`:null,i.value}),tl(()=>{a.value=e.headerAlign?`is-${e.headerAlign}`:i.value,a.value});const u=F(()=>{let v=n.vnode.vParent||n.parent;for(;v&&!v.tableId&&!v.columnId;)v=v.vnode.vParent||v.parent;return v}),c=F(()=>{const{store:v}=n.parent;if(!v)return!1;const{treeData:C}=v.states,O=C.value;return O&&Object.keys(O).length>0}),f=E(kn(e.width)),h=E(ma(e.minWidth)),m=v=>(f.value&&(v.width=f.value),h.value&&(v.minWidth=h.value),!f.value&&h.value&&(v.width=void 0),v.minWidth||(v.minWidth=80),v.realWidth=Number(v.width===void 0?v.minWidth:v.width),v),g=v=>{const C=v.type,O=nu[C]||{};Object.keys(O).forEach($=>{const S=O[$];$!=="className"&&S!==void 0&&(v[$]=S)});const M=lu(C);if(M){const $=`${T(s.namespace)}-${M}`;v.className=v.className?`${v.className} ${$}`:$}return v},d=v=>{Array.isArray(v)?v.forEach(O=>C(O)):C(v);function C(O){var M;((M=O==null?void 0:O.type)==null?void 0:M.name)==="ElTableColumn"&&(O.vParent=n)}};return{columnId:o,realAlign:i,isSubColumn:r,realHeaderAlign:a,columnOrTableParent:u,setColumnWidth:m,setColumnForcedProps:g,setColumnRenders:v=>{e.renderHeader||v.type!=="selection"&&(v.renderHeader=O=>(n.columnConfig.value.label,Oe(t,"header",O,()=>[v.label]))),t["filter-icon"]&&(v.renderFilterIcon=O=>Oe(t,"filter-icon",O));let C=v.renderCell;return v.type==="expand"?(v.renderCell=O=>ce("div",{class:"cell"},[C(O)]),l.value.renderExpanded=O=>t.default?t.default(O):t.default):(C=C||ou,v.renderCell=O=>{let M=null;if(t.default){const N=t.default(O);M=N.some(B=>B.type!==_r)?N:C(O)}else M=C(O);const{columns:$}=l.value.store.states,S=$.value.findIndex(N=>N.type==="default"),R=c.value&&O.cellIndex===S,k=au(O,R),A={class:"cell",style:{}};return v.showOverflowTooltip&&(A.class=`${A.class} ${T(s.namespace)}-tooltip`,A.style={width:`${(O.column.realWidth||Number(O.column.width))-1}px`}),d(M),ce("div",A,[k,M])}),v},getPropsData:(...v)=>v.reduce((C,O)=>(Array.isArray(O)&&O.forEach(M=>{C[M]=e[M]}),C),{}),getColumnElIndex:(v,C)=>Array.prototype.indexOf.call(v,C),updateColumnOrder:()=>{l.value.store.commit("updateColumnOrder",n.columnConfig.value)}}}var iu={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].includes(t))}};let uu=1;var xa=Ne({name:"ElTableColumn",components:{ElCheckbox:mt},props:iu,setup(e,{slots:t}){const l=Je(),n=E({}),o=F(()=>{let y=l.parent;for(;y&&!y.tableId;)y=y.parent;return y}),{registerNormalWatchers:r,registerComplexWatchers:i}=ru(o,e),{columnId:a,isSubColumn:s,realHeaderAlign:u,columnOrTableParent:c,setColumnWidth:f,setColumnForcedProps:h,setColumnRenders:m,getPropsData:g,getColumnElIndex:d,realAlign:p,updateColumnOrder:w}=su(e,t,o),b=c.value;a.value=`${b.tableId||b.columnId}_column_${uu++}`,pn(()=>{s.value=o.value!==b;const y=e.type||"default",v=e.sortable===""?!0:e.sortable,C=Mo(e.showOverflowTooltip)?b.props.showOverflowTooltip:e.showOverflowTooltip,O={...tu[y],id:a.value,type:y,property:e.prop||e.property,align:p,headerAlign:u,showOverflowTooltip:C,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:v,index:e.index,rawColumnKey:l.vnode.key};let k=g(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);k=vi(O,k),k=yi(m,f,h)(k),n.value=k,r(),i()}),Ct(()=>{var y;const v=c.value,C=s.value?v.vnode.el.children:(y=v.refs.hiddenColumns)==null?void 0:y.children,O=()=>d(C||[],l.vnode.el);n.value.getColumnIndex=O,O()>-1&&o.value.store.commit("insertColumn",n.value,s.value?v.columnConfig.value:null,w)}),Po(()=>{n.value.getColumnIndex()>-1&&o.value.store.commit("removeColumn",n.value,s.value?b.columnConfig.value:null,w)}),l.columnId=a.value,l.columnConfig=n},render(){var e,t,l;try{const n=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1}),o=[];if(Array.isArray(n))for(const i of n)((l=i.type)==null?void 0:l.name)==="ElTableColumn"||i.shapeFlag&2?o.push(i):i.type===$e&&Array.isArray(i.children)&&i.children.forEach(a=>{(a==null?void 0:a.patchFlag)!==1024&&!ql(a==null?void 0:a.children)&&o.push(a)});return ce("div",o)}catch(n){return ce("div",[])}}});const go=bn(Qi,{TableColumn:xa}),du=Ur(xa);var rt=(e=>(e.ASC="asc",e.DESC="desc",e))(rt||{}),sl=(e=>(e.CENTER="center",e.RIGHT="right",e))(sl||{}),ka=(e=>(e.LEFT="left",e.RIGHT="right",e))(ka||{});const fn={asc:"desc",desc:"asc"},il=Symbol("placeholder"),cu=(e,t,l)=>{var n;const o={flexGrow:0,flexShrink:0,...l?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};l||(o.flexShrink=1);const r={...(n=e.style)!=null?n:{},...o,flexBasis:"auto",width:e.width};return t||(e.maxWidth&&(r.maxWidth=e.maxWidth),e.minWidth&&(r.minWidth=e.minWidth)),r};function fu(e,t,l){const n=F(()=>T(t).filter(d=>!d.hidden)),o=F(()=>T(n).filter(d=>d.fixed==="left"||d.fixed===!0)),r=F(()=>T(n).filter(d=>d.fixed==="right")),i=F(()=>T(n).filter(d=>!d.fixed)),a=F(()=>{const d=[];return T(o).forEach(p=>{d.push({...p,placeholderSign:il})}),T(i).forEach(p=>{d.push(p)}),T(r).forEach(p=>{d.push({...p,placeholderSign:il})}),d}),s=F(()=>T(o).length||T(r).length),u=F(()=>T(t).reduce((p,w)=>(p[w.key]=cu(w,T(l),e.fixed),p),{})),c=F(()=>T(n).reduce((d,p)=>d+p.width,0)),f=d=>T(t).find(p=>p.key===d),h=d=>T(u)[d],m=(d,p)=>{d.width=p};function g(d){var p;const{key:w}=d.currentTarget.dataset;if(!w)return;const{sortState:b,sortBy:y}=e;let v=rt.ASC;nl(b)?v=fn[b[w]]:v=fn[y.order],(p=e.onColumnSort)==null||p.call(e,{column:f(w),key:w,order:v})}return{columns:t,columnsStyles:u,columnsTotalWidth:c,fixedColumnsOnLeft:o,fixedColumnsOnRight:r,hasFixedColumns:s,mainColumns:a,normalColumns:i,visibleColumns:n,getColumn:f,getColumnStyle:h,updateColumnWidth:m,onColumnSorted:g}}const hu=(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,onMaybeEndReached:o})=>{const r=E({scrollLeft:0,scrollTop:0});function i(m){var g,d,p;const{scrollTop:w}=m;(g=t.value)==null||g.scrollTo(m),(d=l.value)==null||d.scrollToTop(w),(p=n.value)==null||p.scrollToTop(w)}function a(m){r.value=m,i(m)}function s(m){r.value.scrollTop=m,i(T(r))}function u(m){var g,d;r.value.scrollLeft=m,(d=(g=t.value)==null?void 0:g.scrollTo)==null||d.call(g,T(r))}function c(m){var g;a(m),(g=e.onScroll)==null||g.call(e,m)}function f({scrollTop:m}){const{scrollTop:g}=T(r);m!==g&&s(m)}function h(m,g="auto"){var d;(d=t.value)==null||d.scrollToRow(m,g)}return ye(()=>T(r).scrollTop,(m,g)=>{m>g&&o()}),{scrollPos:r,scrollTo:a,scrollToLeft:u,scrollToTop:s,scrollToRow:h,onScroll:c,onVerticalScroll:f}},mu=(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,tableInstance:o,ns:r,isScrolling:i})=>{const a=Je(),{emit:s}=a,u=Ht(!1),c=E(e.defaultExpandedRowKeys||[]),f=E(-1),h=Ht(null),m=E({}),g=E({}),d=Ht({}),p=Ht({}),w=Ht({}),b=F(()=>at(e.estimatedRowHeight));function y(R){var k;(k=e.onRowsRendered)==null||k.call(e,R),R.rowCacheEnd>T(f)&&(f.value=R.rowCacheEnd)}function v({hovered:R,rowKey:k}){if(i.value)return;o.vnode.el.querySelectorAll(`[rowkey="${String(k)}"]`).forEach(B=>{R?B.classList.add(r.is("hovered")):B.classList.remove(r.is("hovered"))})}function C({expanded:R,rowData:k,rowIndex:A,rowKey:N}){var B,V;const q=[...T(c)],le=q.indexOf(N);R?le===-1&&q.push(N):le>-1&&q.splice(le,1),c.value=q,s("update:expandedRowKeys",q),(B=e.onRowExpand)==null||B.call(e,{expanded:R,rowData:k,rowIndex:A,rowKey:N}),(V=e.onExpandedRowsChange)==null||V.call(e,q)}const O=ol(()=>{var R,k,A,N;u.value=!0,m.value={...T(m),...T(g)},M(T(h),!1),g.value={},h.value=null,(R=t.value)==null||R.forceUpdate(),(k=l.value)==null||k.forceUpdate(),(A=n.value)==null||A.forceUpdate(),(N=a.proxy)==null||N.$forceUpdate(),u.value=!1},0);function M(R,k=!1){T(b)&&[t,l,n].forEach(A=>{const N=T(A);N&&N.resetAfterRowIndex(R,k)})}function $(R,k,A){const N=T(h);(N===null||N>A)&&(h.value=A),g.value[R]=k}function S({rowKey:R,height:k,rowIndex:A},N){N?N===ka.RIGHT?w.value[R]=k:d.value[R]=k:p.value[R]=k;const B=Math.max(...[d,w,p].map(V=>V.value[R]||0));T(m)[R]!==B&&($(R,B,A),O())}return{expandedRowKeys:c,lastRenderedRowIndex:f,isDynamic:b,isResetting:u,rowHeights:m,resetAfterIndex:M,onRowExpanded:C,onRowHovered:v,onRowsRendered:y,onRowHeightChange:S}},gu=(e,{expandedRowKeys:t,lastRenderedRowIndex:l,resetAfterIndex:n})=>{const o=E({}),r=F(()=>{const a={},{data:s,rowKey:u}=e,c=T(t);if(!c||!c.length)return s;const f=[],h=new Set;c.forEach(g=>h.add(g));let m=s.slice();for(m.forEach(g=>a[g[u]]=0);m.length>0;){const g=m.shift();f.push(g),h.has(g[u])&&Array.isArray(g.children)&&g.children.length>0&&(m=[...g.children,...m],g.children.forEach(d=>a[d[u]]=a[g[u]]+1))}return o.value=a,f}),i=F(()=>{const{data:a,expandColumnKey:s}=e;return s?T(r):a});return ye(i,(a,s)=>{a!==s&&(l.value=-1,n(0,!0))}),{data:i,depthMap:o}},vu=(e,t)=>e+t,wl=e=>Pt(e)?e.reduce(vu,0):e,Lt=(e,t,l={})=>wn(e)?e(t):e!=null?e:l,kt=e=>(["width","maxWidth","minWidth","height"].forEach(t=>{e[t]=vl(e[t])}),e),Ta=e=>zt(e)?t=>ce(e,t):e,pu=(e,{columnsTotalWidth:t,data:l,fixedColumnsOnLeft:n,fixedColumnsOnRight:o})=>{const r=F(()=>{const{fixed:y,width:v,vScrollbarSize:C}=e,O=v-C;return y?Math.max(Math.round(T(t)),O):O}),i=F(()=>T(r)+e.vScrollbarSize),a=F(()=>{const{height:y=0,maxHeight:v=0,footerHeight:C,hScrollbarSize:O}=e;if(v>0){const M=T(g),$=T(s),R=T(m)+M+$+O;return Math.min(R,v-C)}return y-C}),s=F(()=>{const{rowHeight:y,estimatedRowHeight:v}=e,C=T(l);return at(v)?C.length*v:C.length*y}),u=F(()=>{const{maxHeight:y}=e,v=T(a);if(at(y)&&y>0)return v;const C=T(s)+T(m)+T(g);return Math.min(v,C)}),c=y=>y.width,f=F(()=>wl(T(n).map(c))),h=F(()=>wl(T(o).map(c))),m=F(()=>wl(e.headerHeight)),g=F(()=>{var y;return(((y=e.fixedData)==null?void 0:y.length)||0)*e.rowHeight}),d=F(()=>T(a)-T(m)-T(g)),p=F(()=>{const{style:y={},height:v,width:C}=e;return kt({...y,height:v,width:C})}),w=F(()=>kt({height:e.footerHeight})),b=F(()=>({top:vl(T(m)),bottom:vl(e.footerHeight),width:vl(e.width)}));return{bodyWidth:r,fixedTableHeight:u,mainTableHeight:a,leftTableWidth:f,rightTableWidth:h,headerWidth:i,rowsHeight:s,windowHeight:d,footerHeight:w,emptyStyle:b,rootStyle:p,headerHeight:m}},yu=e=>{const t=E(),l=E(0),n=E(0);let o;return Ct(()=>{o=Yl(t,([r])=>{const{width:i,height:a}=r.contentRect,{paddingLeft:s,paddingRight:u,paddingTop:c,paddingBottom:f}=getComputedStyle(r.target),h=Number.parseInt(s)||0,m=Number.parseInt(u)||0,g=Number.parseInt(c)||0,d=Number.parseInt(f)||0;l.value=i-h-m,n.value=a-g-d}).stop}),Po(()=>{o==null||o()}),ye([l,n],([r,i])=>{var a;(a=e.onResize)==null||a.call(e,{width:r,height:i})}),{sizer:t,width:l,height:n}};function Cu(e){const t=E(),l=E(),n=E(),{columns:o,columnsStyles:r,columnsTotalWidth:i,fixedColumnsOnLeft:a,fixedColumnsOnRight:s,hasFixedColumns:u,mainColumns:c,onColumnSorted:f}=fu(e,Yn(e,"columns"),Yn(e,"fixed")),{scrollTo:h,scrollToLeft:m,scrollToTop:g,scrollToRow:d,onScroll:p,onVerticalScroll:w,scrollPos:b}=hu(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,onMaybeEndReached:We}),y=nt("table-v2"),v=Je(),C=Ht(!1),{expandedRowKeys:O,lastRenderedRowIndex:M,isDynamic:$,isResetting:S,rowHeights:R,resetAfterIndex:k,onRowExpanded:A,onRowHeightChange:N,onRowHovered:B,onRowsRendered:V}=mu(e,{mainTableRef:t,leftTableRef:l,rightTableRef:n,tableInstance:v,ns:y,isScrolling:C}),{data:q,depthMap:le}=gu(e,{expandedRowKeys:O,lastRenderedRowIndex:M,resetAfterIndex:k}),{bodyWidth:he,fixedTableHeight:L,mainTableHeight:U,leftTableWidth:oe,rightTableWidth:ue,headerWidth:x,rowsHeight:K,windowHeight:Q,footerHeight:ie,emptyStyle:xe,rootStyle:ge,headerHeight:Se}=pu(e,{columnsTotalWidth:i,data:q,fixedColumnsOnLeft:a,fixedColumnsOnRight:s}),Ae=E(),Ye=F(()=>{const Ve=T(q).length===0;return Pt(e.fixedData)?e.fixedData.length===0&&Ve:Ve});function je(Ve){const{estimatedRowHeight:He,rowHeight:Ze,rowKey:Z}=e;return He?T(R)[T(q)[Ve][Z]]||He:Ze}function We(){const{onEndReached:Ve}=e;if(!Ve)return;const{scrollTop:He}=T(b),Ze=T(K),Z=T(Q),J=Ze-(He+Z)+e.hScrollbarSize;T(M)>=0&&Ze===He+T(U)-T(Se)&&Ve(J)}return ye(()=>e.expandedRowKeys,Ve=>O.value=Ve,{deep:!0}),{columns:o,containerRef:Ae,mainTableRef:t,leftTableRef:l,rightTableRef:n,isDynamic:$,isResetting:S,isScrolling:C,hasFixedColumns:u,columnsStyles:r,columnsTotalWidth:i,data:q,expandedRowKeys:O,depthMap:le,fixedColumnsOnLeft:a,fixedColumnsOnRight:s,mainColumns:c,bodyWidth:he,emptyStyle:xe,rootStyle:ge,headerWidth:x,footerHeight:ie,mainTableHeight:U,fixedTableHeight:L,leftTableWidth:oe,rightTableWidth:ue,showEmpty:Ye,getRowHeight:je,onColumnSorted:f,onRowHovered:B,onRowExpanded:A,onRowsRendered:V,onRowHeightChange:N,scrollTo:h,scrollToLeft:m,scrollToTop:g,scrollToRow:d,onScroll:p,onVerticalScroll:w}}const On=Symbol("tableV2"),Ea=String,ul={type:Ee(Array),required:!0},Hn={type:Ee(Array)},Oa={...Hn,required:!0},bu=String,vo={type:Ee(Array),default:()=>qr([])},It={type:Number,required:!0},Ha={type:Ee([String,Number,Symbol]),default:"id"},po={type:Ee(Object)},Nt=Gt({class:String,columns:ul,columnsStyles:{type:Ee(Object),required:!0},depth:Number,expandColumnKey:bu,estimatedRowHeight:{...At.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Ee(Function)},onRowHover:{type:Ee(Function)},onRowHeightChange:{type:Ee(Function)},rowData:{type:Ee(Object),required:!0},rowEventHandlers:{type:Ee(Object)},rowIndex:{type:Number,required:!0},rowKey:Ha,style:{type:Ee(Object)}}),Kl={type:Number,required:!0},Fn=Gt({class:String,columns:ul,fixedHeaderData:{type:Ee(Array)},headerData:{type:Ee(Array),required:!0},headerHeight:{type:Ee([Number,Array]),default:50},rowWidth:Kl,rowHeight:{type:Number,default:50},height:Kl,width:Kl}),Sl=Gt({columns:ul,data:Oa,fixedData:Hn,estimatedRowHeight:Nt.estimatedRowHeight,width:It,height:It,headerWidth:It,headerHeight:Fn.headerHeight,bodyWidth:It,rowHeight:It,cache:Os.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:At.scrollbarAlwaysOn,scrollbarStartGap:At.scrollbarStartGap,scrollbarEndGap:At.scrollbarEndGap,class:Ea,style:po,containerStyle:po,getRowHeight:{type:Ee(Function),required:!0},rowKey:Nt.rowKey,onRowsRendered:{type:Ee(Function)},onScroll:{type:Ee(Function)}}),wu=Gt({cache:Sl.cache,estimatedRowHeight:Nt.estimatedRowHeight,rowKey:Ha,headerClass:{type:Ee([String,Function])},headerProps:{type:Ee([Object,Function])},headerCellProps:{type:Ee([Object,Function])},headerHeight:Fn.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Ee([String,Function])},rowProps:{type:Ee([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Ee([Object,Function])},columns:ul,data:Oa,dataGetter:{type:Ee(Function)},fixedData:Hn,expandColumnKey:Nt.expandColumnKey,expandedRowKeys:vo,defaultExpandedRowKeys:vo,class:Ea,fixed:Boolean,style:{type:Ee(Object)},width:It,height:It,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:At.hScrollbarSize,vScrollbarSize:At.vScrollbarSize,scrollbarAlwaysOn:Hs.alwaysOn,sortBy:{type:Ee(Object),default:()=>({})},sortState:{type:Ee(Object),default:void 0},onColumnSort:{type:Ee(Function)},onExpandedRowsChange:{type:Ee(Function)},onEndReached:{type:Ee(Function)},onRowExpand:Nt.onRowExpand,onScroll:Sl.onScroll,onRowsRendered:Sl.onRowsRendered,rowEventHandlers:Nt.rowEventHandlers}),In=(e,{slots:t})=>{var l;const{cellData:n,style:o}=e,r=((l=n==null?void 0:n.toString)==null?void 0:l.call(n))||"",i=Oe(t,"default",e,()=>[r]);return D("div",{class:e.class,title:r,style:o},[i])};In.displayName="ElTableV2Cell";In.inheritAttrs=!1;const Mn=(e,{slots:t})=>Oe(t,"default",e,()=>{var l,n;return[D("div",{class:e.class,title:(l=e.column)==null?void 0:l.title},[(n=e.column)==null?void 0:n.title])]});Mn.displayName="ElTableV2HeaderCell";Mn.inheritAttrs=!1;const Su=Gt({class:String,columns:ul,columnsStyles:{type:Ee(Object),required:!0},headerIndex:Number,style:{type:Ee(Object)}}),Ru=Ne({name:"ElTableV2HeaderRow",props:Su,setup(e,{slots:t}){return()=>{const{columns:l,columnsStyles:n,headerIndex:o,style:r}=e;let i=l.map((a,s)=>t.cell({columns:l,column:a,columnIndex:s,headerIndex:o,style:n[a.key]}));return t.header&&(i=t.header({cells:i.map(a=>Pt(a)&&a.length===1?a[0]:a),columns:l,headerIndex:o})),D("div",{class:e.class,style:r,role:"row"},[i])}}}),xu="ElTableV2Header",ku=Ne({name:xu,props:Fn,setup(e,{slots:t,expose:l}){const n=nt("table-v2"),o=E(),r=F(()=>kt({width:e.width,height:e.height})),i=F(()=>kt({width:e.rowWidth,height:e.height})),a=F(()=>Gr(T(e.headerHeight))),s=f=>{const h=T(o);lt(()=>{h!=null&&h.scroll&&h.scroll({left:f})})},u=()=>{const f=n.e("fixed-header-row"),{columns:h,fixedHeaderData:m,rowHeight:g}=e;return m==null?void 0:m.map((d,p)=>{var w;const b=kt({height:g,width:"100%"});return(w=t.fixed)==null?void 0:w.call(t,{class:f,columns:h,rowData:d,rowIndex:-(p+1),style:b})})},c=()=>{const f=n.e("dynamic-header-row"),{columns:h}=e;return T(a).map((m,g)=>{var d;const p=kt({width:"100%",height:m});return(d=t.dynamic)==null?void 0:d.call(t,{class:f,columns:h,headerIndex:g,style:p})})};return l({scrollToLeft:s}),()=>{if(!(e.height<=0))return D("div",{ref:o,class:e.class,style:T(r),role:"rowgroup"},[D("div",{style:T(i),class:n.e("header")},[c(),u()])])}}}),Tu=e=>{const{isScrolling:t}=gt(On),l=E(!1),n=E(),o=F(()=>at(e.estimatedRowHeight)&&e.rowIndex>=0),r=(s=!1)=>{const u=T(n);if(!u)return;const{columns:c,onRowHeightChange:f,rowKey:h,rowIndex:m,style:g}=e,{height:d}=u.getBoundingClientRect();l.value=!0,lt(()=>{if(s||d!==Number.parseInt(g.height)){const p=c[0],w=(p==null?void 0:p.placeholderSign)===il;f==null||f({rowKey:h,height:d,rowIndex:m},p&&!w&&p.fixed)}})},i=F(()=>{const{rowData:s,rowIndex:u,rowKey:c,onRowHover:f}=e,h=e.rowEventHandlers||{},m={};return Object.entries(h).forEach(([g,d])=>{wn(d)&&(m[g]=p=>{d({event:p,rowData:s,rowIndex:u,rowKey:c})})}),f&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:g,hovered:d})=>{const p=m[g];m[g]=w=>{f({event:w,hovered:d,rowData:s,rowIndex:u,rowKey:c}),p==null||p(w)}}),m}),a=s=>{const{onRowExpand:u,rowData:c,rowIndex:f,rowKey:h}=e;u==null||u({expanded:s,rowData:c,rowIndex:f,rowKey:h})};return Ct(()=>{T(o)&&r(!0)}),{isScrolling:t,measurable:o,measured:l,rowRef:n,eventHandlers:i,onExpand:a}},Eu="ElTableV2TableRow",Ou=Ne({name:Eu,props:Nt,setup(e,{expose:t,slots:l,attrs:n}){const{eventHandlers:o,isScrolling:r,measurable:i,measured:a,rowRef:s,onExpand:u}=Tu(e);return t({onExpand:u}),()=>{const{columns:c,columnsStyles:f,expandColumnKey:h,depth:m,rowData:g,rowIndex:d,style:p}=e;let w=c.map((b,y)=>{const v=Pt(g.children)&&g.children.length>0&&b.key===h;return l.cell({column:b,columns:c,columnIndex:y,depth:m,style:f[b.key],rowData:g,rowIndex:d,isScrolling:T(r),expandIconProps:v?{rowData:g,rowIndex:d,onExpand:u}:void 0})});if(l.row&&(w=l.row({cells:w.map(b=>Pt(b)&&b.length===1?b[0]:b),style:p,columns:c,depth:m,rowData:g,rowIndex:d,isScrolling:T(r)})),T(i)){const{height:b,...y}=p||{},v=T(a);return D("div",Te({ref:s,class:e.class,style:v?p:y,role:"row"},n,T(o)),[w])}return D("div",Te(n,{ref:s,class:e.class,style:p,role:"row"},T(o)),[w])}}}),Hu=e=>{const{sortOrder:t}=e;return D(bt,{size:14,class:e.class},{default:()=>[t===rt.ASC?D(Yr,null,null):D(Xr,null,null)]})},Fu=e=>{const{expanded:t,expandable:l,onExpand:n,style:o,size:r}=e,i={onClick:l?()=>n(!t):void 0,class:e.class};return D(bt,Te(i,{size:r,style:o}),{default:()=>[D(Cn,null,null)]})},Iu="ElTableV2Grid",Mu=e=>{const t=E(),l=E(),n=F(()=>{const{data:d,rowHeight:p,estimatedRowHeight:w}=e;if(!w)return d.length*p}),o=F(()=>{const{fixedData:d,rowHeight:p}=e;return((d==null?void 0:d.length)||0)*p}),r=F(()=>wl(e.headerHeight)),i=F(()=>{const{height:d}=e;return Math.max(0,d-T(r)-T(o))}),a=F(()=>T(r)+T(o)>0),s=({data:d,rowIndex:p})=>d[p][e.rowKey];function u({rowCacheStart:d,rowCacheEnd:p,rowVisibleStart:w,rowVisibleEnd:b}){var y;(y=e.onRowsRendered)==null||y.call(e,{rowCacheStart:d,rowCacheEnd:p,rowVisibleStart:w,rowVisibleEnd:b})}function c(d,p){var w;(w=l.value)==null||w.resetAfterRowIndex(d,p)}function f(d,p){const w=T(t),b=T(l);nl(d)?(w==null||w.scrollToLeft(d.scrollLeft),b==null||b.scrollTo(d)):(w==null||w.scrollToLeft(d),b==null||b.scrollTo({scrollLeft:d,scrollTop:p}))}function h(d){var p;(p=T(l))==null||p.scrollTo({scrollTop:d})}function m(d,p){var w;(w=T(l))==null||w.scrollToItem(d,1,p)}function g(){var d,p;(d=T(l))==null||d.$forceUpdate(),(p=T(t))==null||p.$forceUpdate()}return{bodyRef:l,forceUpdate:g,fixedRowHeight:o,gridHeight:i,hasHeader:a,headerHeight:r,headerRef:t,totalHeight:n,itemKey:s,onItemRendered:u,resetAfterRowIndex:c,scrollTo:f,scrollToTop:h,scrollToRow:m}},$n=Ne({name:Iu,props:Sl,setup(e,{slots:t,expose:l}){const{ns:n}=gt(On),{bodyRef:o,fixedRowHeight:r,gridHeight:i,hasHeader:a,headerRef:s,headerHeight:u,totalHeight:c,forceUpdate:f,itemKey:h,onItemRendered:m,resetAfterRowIndex:g,scrollTo:d,scrollToTop:p,scrollToRow:w}=Mu(e);l({forceUpdate:f,totalHeight:c,scrollTo:d,scrollToTop:p,scrollToRow:w,resetAfterRowIndex:g});const b=()=>e.bodyWidth;return()=>{const{cache:y,columns:v,data:C,fixedData:O,useIsScrolling:M,scrollbarAlwaysOn:$,scrollbarEndGap:S,scrollbarStartGap:R,style:k,rowHeight:A,bodyWidth:N,estimatedRowHeight:B,headerWidth:V,height:q,width:le,getRowHeight:he,onScroll:L}=e,U=at(B),oe=U?hi:ui,ue=T(u);return D("div",{role:"table",class:[n.e("table"),e.class],style:k},[D(oe,{ref:o,data:C,useIsScrolling:M,itemKey:h,columnCache:0,columnWidth:U?b:N,totalColumn:1,totalRow:C.length,rowCache:y,rowHeight:U?he:A,width:le,height:T(i),class:n.e("body"),role:"rowgroup",scrollbarStartGap:R,scrollbarEndGap:S,scrollbarAlwaysOn:$,onScroll:L,onItemRendered:m,perfMode:!1},{default:x=>{var K;const Q=C[x.rowIndex];return(K=t.row)==null?void 0:K.call(t,{...x,columns:v,rowData:Q})}}),T(a)&&D(ku,{ref:s,class:n.e("header-wrapper"),columns:v,headerData:C,headerHeight:e.headerHeight,fixedHeaderData:O,rowWidth:V,rowHeight:A,width:le,height:Math.min(ue+T(r),q)},{dynamic:t.header,fixed:t.row})])}}});function $u(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Nu=(e,{slots:t})=>{const{mainTableRef:l,...n}=e;return D($n,Te({ref:l},n),$u(t)?t:{default:()=>[t]})};function Du(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Au=(e,{slots:t})=>{if(!e.columns.length)return;const{leftTableRef:l,...n}=e;return D($n,Te({ref:l},n),Du(t)?t:{default:()=>[t]})};function Pu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Lu=(e,{slots:t})=>{if(!e.columns.length)return;const{rightTableRef:l,...n}=e;return D($n,Te({ref:l},n),Pu(t)?t:{default:()=>[t]})};function zu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Ku=(e,{slots:t})=>{const{columns:l,columnsStyles:n,depthMap:o,expandColumnKey:r,expandedRowKeys:i,estimatedRowHeight:a,hasFixedColumns:s,rowData:u,rowIndex:c,style:f,isScrolling:h,rowProps:m,rowClass:g,rowKey:d,rowEventHandlers:p,ns:w,onRowHovered:b,onRowExpanded:y}=e,v=Lt(g,{columns:l,rowData:u,rowIndex:c},""),C=Lt(m,{columns:l,rowData:u,rowIndex:c}),O=u[d],M=o[O]||0,$=!!r,S=c<0,R=[w.e("row"),v,{[w.e(`row-depth-${M}`)]:$&&c>=0,[w.is("expanded")]:$&&i.includes(O),[w.is("fixed")]:!M&&S,[w.is("customized")]:!!t.row}],k=s?b:void 0,A={...C,columns:l,columnsStyles:n,class:R,depth:M,expandColumnKey:r,estimatedRowHeight:S?void 0:a,isScrolling:h,rowIndex:c,rowData:u,rowKey:O,rowEventHandlers:p,style:f};return D(Ou,Te(A,{onRowExpand:y,onMouseenter:V=>{k==null||k({hovered:!0,rowKey:O,event:V,rowData:u,rowIndex:c})},onMouseleave:V=>{k==null||k({hovered:!1,rowKey:O,event:V,rowData:u,rowIndex:c})},rowkey:O}),zu(t)?t:{default:()=>[t]})},hn=({columns:e,column:t,columnIndex:l,depth:n,expandIconProps:o,isScrolling:r,rowData:i,rowIndex:a,style:s,expandedRowKeys:u,ns:c,cellProps:f,expandColumnKey:h,indentSize:m,iconSize:g,rowKey:d},{slots:p})=>{const w=kt(s);if(t.placeholderSign===il)return D("div",{class:c.em("row-cell","placeholder"),style:w},null);const{cellRenderer:b,dataKey:y,dataGetter:v}=t,C=wn(v)?v({columns:e,column:t,columnIndex:l,rowData:i,rowIndex:a}):Gl(i,y!=null?y:""),O=Lt(f,{cellData:C,columns:e,column:t,columnIndex:l,rowIndex:a,rowData:i}),M={class:c.e("cell-text"),columns:e,column:t,columnIndex:l,cellData:C,isScrolling:r,rowData:i,rowIndex:a},$=Ta(b),S=$?$(M):Oe(p,"default",M,()=>[D(In,M,null)]),R=[c.e("row-cell"),t.class,t.align===sl.CENTER&&c.is("align-center"),t.align===sl.RIGHT&&c.is("align-right")],k=a>=0&&h&&t.key===h,A=a>=0&&u.includes(i[d]);let N;const B=`margin-inline-start: ${n*m}px;`;return k&&(nl(o)?N=D(Fu,Te(o,{class:[c.e("expand-icon"),c.is("expanded",A)],size:g,expanded:A,style:B,expandable:!0}),null):N=D("div",{style:[B,`width: ${g}px; height: ${g}px;`].join(" ")},null)),D("div",Te({class:R,style:w},O,{role:"cell"}),[N,S])};hn.inheritAttrs=!1;function Wu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Vu=({columns:e,columnsStyles:t,headerIndex:l,style:n,headerClass:o,headerProps:r,ns:i},{slots:a})=>{const s={columns:e,headerIndex:l},u=[i.e("header-row"),Lt(o,s,""),{[i.is("customized")]:!!a.header}],c={...Lt(r,s),columnsStyles:t,class:u,columns:e,headerIndex:l,style:n};return D(Ru,c,Wu(a)?a:{default:()=>[a]})},yo=(e,{slots:t})=>{const{column:l,ns:n,style:o,onColumnSorted:r}=e,i=kt(o);if(l.placeholderSign===il)return D("div",{class:n.em("header-row-cell","placeholder"),style:i},null);const{headerCellRenderer:a,headerClass:s,sortable:u}=l,c={...e,class:n.e("header-cell-text")},f=Ta(a),h=f?f(c):Oe(t,"default",c,()=>[D(Mn,c,null)]),{sortBy:m,sortState:g,headerCellProps:d}=e;let p,w;if(g){const v=g[l.key];p=!!fn[v],w=p?v:rt.ASC}else p=l.key===m.key,w=p?m.order:rt.ASC;const b=[n.e("header-cell"),Lt(s,e,""),l.align===sl.CENTER&&n.is("align-center"),l.align===sl.RIGHT&&n.is("align-right"),u&&n.is("sortable")],y={...Lt(d,e),onClick:l.sortable?r:void 0,class:b,style:i,"data-key":l.key};return D("div",Te(y,{role:"columnheader"}),[h,u&&D(Hu,{class:[n.e("sort-icon"),p&&n.is("sorting")],sortOrder:w},null)])},Fa=(e,{slots:t})=>{var l;return D("div",{class:e.class,style:e.style},[(l=t.default)==null?void 0:l.call(t)])};Fa.displayName="ElTableV2Footer";const Ia=(e,{slots:t})=>{const l=Oe(t,"default",{},()=>[D(kl,null,null)]);return D("div",{class:e.class,style:e.style},[l])};Ia.displayName="ElTableV2Empty";const Ma=(e,{slots:t})=>{var l;return D("div",{class:e.class,style:e.style},[(l=t.default)==null?void 0:l.call(t)])};Ma.displayName="ElTableV2Overlay";function Zt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}const Bu="ElTableV2",ju=Ne({name:Bu,props:wu,setup(e,{slots:t,expose:l}){const n=nt("table-v2"),{columnsStyles:o,fixedColumnsOnLeft:r,fixedColumnsOnRight:i,mainColumns:a,mainTableHeight:s,fixedTableHeight:u,leftTableWidth:c,rightTableWidth:f,data:h,depthMap:m,expandedRowKeys:g,hasFixedColumns:d,mainTableRef:p,leftTableRef:w,rightTableRef:b,isDynamic:y,isResetting:v,isScrolling:C,bodyWidth:O,emptyStyle:M,rootStyle:$,headerWidth:S,footerHeight:R,showEmpty:k,scrollTo:A,scrollToLeft:N,scrollToTop:B,scrollToRow:V,getRowHeight:q,onColumnSorted:le,onRowHeightChange:he,onRowHovered:L,onRowExpanded:U,onRowsRendered:oe,onScroll:ue,onVerticalScroll:x}=Cu(e);return l({scrollTo:A,scrollToLeft:N,scrollToTop:B,scrollToRow:V}),Ao(On,{ns:n,isResetting:v,isScrolling:C}),()=>{const{cache:K,cellProps:Q,estimatedRowHeight:ie,expandColumnKey:xe,fixedData:ge,headerHeight:Se,headerClass:Ae,headerProps:Ye,headerCellProps:je,sortBy:We,sortState:Ve,rowHeight:He,rowClass:Ze,rowEventHandlers:Z,rowKey:J,rowProps:re,scrollbarAlwaysOn:ve,indentSize:pe,iconSize:I,useIsScrolling:j,vScrollbarSize:ee,width:be}=e,Fe=T(h),_e={cache:K,class:n.e("main"),columns:T(a),data:Fe,fixedData:ge,estimatedRowHeight:ie,bodyWidth:T(O)+ee,headerHeight:Se,headerWidth:T(S),height:T(s),mainTableRef:p,rowKey:J,rowHeight:He,scrollbarAlwaysOn:ve,scrollbarStartGap:2,scrollbarEndGap:ee,useIsScrolling:j,width:be,getRowHeight:q,onRowsRendered:oe,onScroll:ue},Ie=T(c),Me=T(u),X={cache:K,class:n.e("left"),columns:T(r),data:Fe,estimatedRowHeight:ie,leftTableRef:w,rowHeight:He,bodyWidth:Ie,headerWidth:Ie,headerHeight:Se,height:Me,rowKey:J,scrollbarAlwaysOn:ve,scrollbarStartGap:2,scrollbarEndGap:ee,useIsScrolling:j,width:Ie,getRowHeight:q,onScroll:x},me=T(f)+ee,fe={cache:K,class:n.e("right"),columns:T(i),data:Fe,estimatedRowHeight:ie,rightTableRef:b,rowHeight:He,bodyWidth:me,headerWidth:me,headerHeight:Se,height:Me,rowKey:J,scrollbarAlwaysOn:ve,scrollbarStartGap:2,scrollbarEndGap:ee,width:me,style:`--${T(n.namespace)}-table-scrollbar-size: ${ee}px`,useIsScrolling:j,getRowHeight:q,onScroll:x},Re=T(o),Le={ns:n,depthMap:T(m),columnsStyles:Re,expandColumnKey:xe,expandedRowKeys:T(g),estimatedRowHeight:ie,hasFixedColumns:T(d),rowProps:re,rowClass:Ze,rowKey:J,rowEventHandlers:Z,onRowHovered:L,onRowExpanded:U,onRowHeightChange:he},qe={cellProps:Q,expandColumnKey:xe,indentSize:pe,iconSize:I,rowKey:J,expandedRowKeys:T(g),ns:n},ze={ns:n,headerClass:Ae,headerProps:Ye,columnsStyles:Re},st={ns:n,sortBy:We,sortState:Ve,headerCellProps:je,onColumnSorted:le},Ge={row:Xt=>D(Ku,Te(Xt,Le),{row:t.row,cell:it=>{let St;return t.cell?D(hn,Te(it,qe,{style:Re[it.column.key]}),Zt(St=t.cell(it))?St:{default:()=>[St]}):D(hn,Te(it,qe,{style:Re[it.column.key]}),null)}}),header:Xt=>D(Vu,Te(Xt,ze),{header:t.header,cell:it=>{let St;return t["header-cell"]?D(yo,Te(it,st,{style:Re[it.column.key]}),Zt(St=t["header-cell"](it))?St:{default:()=>[St]}):D(yo,Te(it,st,{style:Re[it.column.key]}),null)}})},vt=[e.class,n.b(),n.e("root"),{[n.is("dynamic")]:T(y)}],Ot={class:n.e("footer"),style:T(R)};return D("div",{class:vt,style:T($)},[D(Nu,_e,Zt(Ge)?Ge:{default:()=>[Ge]}),D(Au,X,Zt(Ge)?Ge:{default:()=>[Ge]}),D(Lu,fe,Zt(Ge)?Ge:{default:()=>[Ge]}),t.footer&&D(Fa,Ot,{default:t.footer}),T(k)&&D(Ia,{class:n.e("empty"),style:T(M)},{default:t.empty}),t.overlay&&D(Ma,{class:n.e("overlay")},{default:t.overlay})])}}}),_u=Gt({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Ee(Function)}}),Uu=Ne({name:"ElAutoResizer",props:_u,setup(e,{slots:t}){const l=nt("auto-resizer"),{height:n,width:o,sizer:r}=yu(e),i={width:"100%",height:"100%"};return()=>{var a;return D("div",{ref:r,class:l.b(),style:i},[(a=t.default)==null?void 0:a.call(t,{height:n.value,width:o.value})])}}}),qu=bn(ju);bn(Uu);function $a(e,t){if(e!=null){if(typeof e=="function")return e(t);if(typeof e=="string"&&e)return e}}function Gu(e,t){const l=["ele-table-tr"],n=$a(e,t);return n!=null&&l.push(n),l.join(" ")}function Yu(e,t,l){const n=["ele-table-head-tr"];l&&n.push("is-ellipsis");const o=$a(e,t);return o!=null&&n.push(o),n.join(" ")}function Na(e,t,l){return e?{effect:t,...l||{},...e===!0?{}:e}:!1}function Da(e,t){return e===!1||e==null&&!t?!1:{...!t||t===!0?{}:t,...!e||e===!0?{}:e}}function Xu(e,t){const l=Da(e,t);if(!l)return!1;const n=["ele-popper","ele-tooltip","ele-table-tooltip"];return l.popperClass&&n.push(l.popperClass),l.popperClass=n.join(" "),l}function Ju(e,t,l){var n,o;if(e==null)return;const r=(n=T(e))==null?void 0:n.store,i=T((o=r==null?void 0:r.states)==null?void 0:o.selection);i.indexOf(t)!==-1||i.push(t),r.updateAllSelected()}function Zu(e){var t,l;const n=(l=(t=T(e))==null?void 0:t.store)==null?void 0:l.states,o=T(n==null?void 0:n.columns),r=T(n==null?void 0:n.filters);if(!r||!o)return;const i=Object.keys(r),a={};return o.forEach(s=>{i.includes(s.id)&&(a[s.columnKey||s.id]=r[s.id])}),a}function Qu(e,t,l){if(!t&&!l)return{cols:e};const n=l==null?[]:Object.keys(l),o=t!=null&&t.prop!=null&&t.prop!="";let r=!1;return{cols:Sn(e,a=>{var f;o&&a.prop===t.prop&&(r=!0);const s=(f=a.columnKey)!=null?f:a.prop,c=(s?n.includes(s):!1)&&l?l[s]:void 0;return{...a,filteredValue:c!=null?c:a.filteredValue}}),sorter:o&&r?t:void 0}}function ed(e){const t=yt(e,l=>l.type==="selection");if(t!=null)return typeof t.selectable=="function"?t.selectable:null}function td(e,t,l){const n=ed(l);return typeof n>"u"?!0:!(n==null||n(e,t)===!0)}function mn(e){let t=!1;return De(e,l=>{if(l.type==="selection")return t=!!l.reserveSelection,!1}),t}function Ol(e){return e===!0||e==="left"?0:e==="right"?2:1}function ld(e){const t=[];return e.type==="index"&&t.push("is-index"),e.className&&t.push(e.className),t.length?t.join(" "):void 0}function nd(e){const t=["ele-table-filter-popper"];return e&&t.push(e),t.join(" ")}function Dt(e,t){const l=[];return e&&e.forEach(n=>{const o=Ke(n,t);o!=null&&l.push(o)}),l}function hl(e,t,l,n){return yt(t,o=>Ke(o,l)===e,n)}function Co(e,t,l){const n=[],o=[];return De(e,r=>{n.push(Ke(r,t)),o.push(r)},l),[n,o]}function Hl(e,t){return!(e==null&&t==null||e===t)}function ft(e,t){const l=e==null||!e.length,n=t==null||!t.length;return l&&n?!1:l!==n||e.length!==t.length?!0:e.some(o=>!t.includes(o))}function Aa(){const e=Jr(),t=F(()=>e.fixedHeader),l=F(()=>e.maximized&&e.maximized!=="expanded");return{isLayoutFixedHead:t,isLayoutMaximized:l}}function Pa(e){return{clearSelection:()=>{const l=e();l&&l.clearSelection()},getSelectionRows:()=>{const l=e();if(l)return l.getSelectionRows()},toggleRowSelection:(l,n)=>{const o=e();o&&o.toggleRowSelection(l,n)},toggleAllSelection:()=>{const l=e();l&&l.toggleAllSelection()},toggleRowExpansion:(l,n)=>{const o=e();o&&o.toggleRowExpansion(l,n)},setCurrentRow:l=>{const n=e();n&&n.setCurrentRow(l)},clearSort:()=>{const l=e();l&&l.clearSort()},clearFilter:l=>{const n=e();n&&n.clearFilter(l)},doLayout:()=>{const l=e();l&&l.doLayout()},sort:(l,n)=>{const o=e();o&&o.sort(l,n)},scrollTo:(l,n)=>{const o=e();o&&o.scrollTo(l,n)},setScrollTop:l=>{const n=e();n&&n.setScrollTop(l)},setScrollLeft:l=>{const n=e();n&&n.setScrollLeft(l)},setCurrentRowKey:l=>{const n=e();n&&n.setCurrentRowKey(l)},getCurrentRow:()=>{const l=e();if(l)return l.getCurrentRow()},setSelectedRows:l=>{const n=e();n&&n.setSelectedRows(l)},setSelectedRowKeys:(l,n)=>{const o=e();o&&o.setSelectedRowKeys(l,n)},toggleRowExpansionAll:l=>{const n=e();n&&n.toggleRowExpansionAll(l)},updateSelectedAndChecked:()=>{const l=e();l&&l.updateSelectedAndChecked()}}}function Nn(e){return{onSelect:(t,l)=>{e("select",t,l)},onSelectAll:t=>{e("selectAll",t)},onCellMouseEnter:(t,l,n,o)=>{e("cellMouseEnter",t,l,n,o)},onCellMouseLeave:(t,l,n,o)=>{e("cellMouseLeave",t,l,n,o)},onCellClick:(t,l,n,o)=>{e("cellClick",t,l,n,o)},onCellDblclick:(t,l,n,o)=>{e("cellDblclick",t,l,n,o)},onCellContextmenu:(t,l,n,o)=>{e("cellContextmenu",t,l,n,o)},onRowClick:(t,l,n)=>{e("rowClick",t,l,n)},onRowContextmenu:(t,l,n)=>{e("rowContextmenu",t,l,n)},onRowDblclick:(t,l,n)=>{e("rowDblclick",t,l,n)},onHeaderClick:(t,l)=>{e("headerClick",t,l)},onHeaderContextmenu:(t,l)=>{e("headerContextmenu",t,l)},onHeaderDragend:(t,l,n,o)=>{e("headerDragend",t,l,n,o)},onExpandChange:(t,l)=>{e("expandChange",t,l)},onSelectionChange:t=>{e("selectionChange",t)},onSortChange:t=>{e("sortChange",t)},onFilterChange:t=>{e("filterChange",t)},onCurrentChange:(t,l)=>{e("currentChange",t,l)},"onUpdate:currentRowKey":t=>{e("update:currentRowKey",t)},"onUpdate:selectedRowKeys":t=>{e("update:selectedRowKeys",t)}}}const La=_t(Sa,["style"]),Dl={...La,stripe:{type:Boolean,default:null},border:{type:Boolean,default:null},rowKey:{type:[String,Function],required:!0},columns:{type:Array,required:!0},pageIndex:Number,errorText:String,headerEllipsis:{type:Boolean,default:!0},slotNormalize:{type:Boolean,default:!0},sticky:Boolean,bottomLine:{type:Boolean,default:!0},emptyProps:{type:[Boolean,Object],default:()=>null},rowClickChecked:[Boolean,String],reserveCurrent:Boolean,selectedRowKeys:Array,cacheData:Array},Dn={select:(e,t)=>!0,selectAll:e=>!0,selectionChange:e=>!0,cellMouseEnter:(e,t,l,n)=>!0,cellMouseLeave:(e,t,l,n)=>!0,cellClick:(e,t,l,n)=>!0,cellDblclick:(e,t,l,n)=>!0,cellContextmenu:(e,t,l,n)=>!0,rowClick:(e,t,l)=>!0,rowContextmenu:(e,t,l)=>!0,rowDblclick:(e,t,l)=>!0,headerClick:(e,t)=>!0,headerContextmenu:(e,t)=>!0,sortChange:e=>!0,filterChange:e=>!0,currentChange:(e,t)=>!0,headerDragend:(e,t,l,n)=>!0,expandChange:(e,t)=>!0,"update:currentRowKey":e=>!0,"update:selectedRowKeys":e=>!0},od=Object.keys(La),ad=Object.keys(Dl),Wl=["default","append","empty"],rd=Ne({name:"EleDataTable",components:{ElTable:go,ElEmpty:kl},props:Dl,emits:Dn,setup(e,{emit:t,slots:l,expose:n}){var ue;const o=Nn(t),r=Pa(()=>u.value),{isLayoutFixedHead:i,isLayoutMaximized:a}=Aa(),s={sorter:e.defaultSort,key:null,checkedKeys:[],checked:[],reserveChecked:mn(e.columns)},u=E(null),c=E((ue=e.columns)!=null?ue:[]),f=F(()=>Na(e.showOverflowTooltip,e.tooltipEffect,e.tooltipOptions)),h=F(()=>{var x;return((x=e.treeProps)==null?void 0:x.children)||"children"}),m=F(()=>{const x=od.filter(K=>!["currentRowKey","showOverflowTooltip","tooltipOptions","tooltipEffect"].includes(K));return{...Lo(e,x),..._t(o,["onUpdate:currentRowKey","onUpdate:selectedRowKeys","onRowClick","onHeaderClick","onSortChange","onFilterChange","onCurrentChange","onSelect","onSelectAll","onSelectionChange"])}}),g=(x,K,Q)=>{if(e.rowClickChecked&&!td(x,e.data.indexOf(x),e.columns)){const ie=r.getSelectionRows();if(e.rowClickChecked==="smart"&&(!ie||!ie.length||ie.length===1)){const xe=Ke(x,e.rowKey);q(xe==null?[]:[xe])}else $(x)}o.onRowClick(x,K,Q)},d=(x,K)=>{if(x.sortable&&x.filters){const Q=K.currentTarget;if(Q){const ie=Q.querySelector(".caret-wrapper");ie&&ie.dispatchEvent(new MouseEvent("click"))}}o.onHeaderClick(x,K)},p=x=>{const K=s.sorter;K&&x.prop===K.prop&&x.order===K.order||(s.sorter=x,o.onSortChange(x))},w=x=>{var K;s.filter=(K=Zu(u.value))!=null?K:x,o.onFilterChange(s.filter)},b=(x,K)=>{x!=null&&x!==K&&V(Ke(x,e.rowKey),x)},y=(x,K)=>{o.onSelect(x,K),q(Dt(x,e.rowKey),x)},v=x=>{q(Dt(x,e.rowKey),x),o.onSelectAll(x)},C=()=>{var x;const K=(x=u.value)==null?void 0:x.scrollBarRef;K&&typeof K.update=="function"&&K.update()},O=()=>{r.clearSort(),s.sorter={}},M=()=>{q([])},$=(x,K)=>{r.toggleRowSelection(x,K);const Q=r.getSelectionRows()||[];q(Dt(Q,e.rowKey),Q)},S=x=>{V(Ke(x,e.rowKey),x)},R=x=>{V(x)},k=()=>s.row,A=x=>{x&&q(Dt(x,e.rowKey),x,!!x.length)},N=x=>{x&&q(x)},B=x=>{De(e.data,K=>{var Q;(Q=K[h.value])!=null&&Q.length&&r.toggleRowExpansion(K,x)},h.value)},V=(x,K)=>{if(!Hl(s.key,x)){x!=null&&K!=null&&(s.row!==K&&(s.row=K,o.onCurrentChange(K,s.oldRow)),r.setCurrentRow(K));return}if(x!=null){const Q=hl(x,e.data,e.rowKey,h.value);if(Q!=null||e.reserveCurrent){s.oldRow=s.row,s.row=Q||K||void 0,s.row==null&&e.cacheData!=null&&(s.row=hl(x,e.cacheData,e.rowKey,h.value)),s.key=x,r.setCurrentRow(Q),he(x),o.onCurrentChange(s.row,s.oldRow);return}}s.key!=null&&(s.oldRow=s.row,s.row=void 0,s.key=null,r.setCurrentRow(null),he(),o.onCurrentChange(void 0,s.oldRow))},q=(x,K,Q)=>{if(!Q&&!ft(s.checkedKeys,x))return;const[ie,xe]=Co(e.data,e.rowKey,h.value),[ge,Se]=Co(e.cacheData,e.rowKey,h.value),Ae=K?K.map(He=>Ke(He,e.rowKey)):[],Ye=s.checked.map(He=>Ke(He,e.rowKey)),je=[],We=[];x.forEach(He=>{const Ze=ie.indexOf(He);if(Ze!==-1)je.push(He),We.push(xe[Ze]);else if(s.reserveChecked){if(je.push(He),K!=null){const J=Ae.indexOf(He);if(J!==-1&&!K[J]._isMock){We.push(K[J]);return}}if(e.cacheData!=null){const J=ge.indexOf(He);if(J!==-1){We.push(Se[J]);return}}const Z=Ye.indexOf(He);if(Z!==-1){We.push(s.checked[Z]);return}typeof e.rowKey=="string"&&We.push({[e.rowKey]:He,_isMock:!0})}});const Ve=ft(s.checked,We);s.checked=We,s.checkedKeys=je,(Ve||Q&&ft(r.getSelectionRows(),We))&&(r.clearSelection(),We.forEach(He=>{Ju(u.value,He)})),L(je),Ve&&o.onSelectionChange(We)},le=()=>{const x=s.key;if(x!=null){const K=hl(x,e.data,e.rowKey,h.value);if(K!=null)V(x,K);else if(!e.reserveCurrent)V(null);else if(e.cacheData!=null){const Q=hl(x,e.cacheData,e.rowKey,h.value);Q!=null&&V(x,Q)}}s.checkedKeys.length&&q(s.checkedKeys,void 0,!0)},he=x=>{Hl(e.currentRowKey,x)&&o["onUpdate:currentRowKey"](x)},L=x=>{const K=e.selectedRowKeys||[];ft(K,x)&&o["onUpdate:selectedRowKeys"](x)};ye(()=>e.columns,x=>{if(s.reserveChecked=mn(x),!x)c.value=[];else{const{cols:K,sorter:Q}=Qu(x,s.sorter,s.filter);c.value=K,lt(()=>{r.doLayout(),C(),Q&&r.sort(Q.prop,Q.order||"ascending")})}},{deep:!0}),ye([()=>e.data,()=>e.cacheData],()=>{lt(()=>{le()})}),ye(()=>e.currentRowKey,x=>{V(x)}),ye(()=>e.selectedRowKeys,x=>{q(x||[])},{deep:!0}),Ct(()=>{e.currentRowKey!=null&&V(e.currentRowKey),e.selectedRowKeys!=null&&e.selectedRowKeys.length&&q(e.selectedRowKeys)});const U={...r,clearSort:O,clearSelection:M,toggleRowSelection:$,setCurrentRow:S,setCurrentRowKey:R,getCurrentRow:k,setSelectedRows:A,setSelectedRowKeys:N,toggleRowExpansionAll:B,updateSelectedAndChecked:le,tableRef:u};n(U);const oe=x=>{var K,Q,ie,xe;return D(du,Te(_t(x,["showOverflowTooltip","filterClassName","columnKey","className","uid","slot","headerSlot","hideInTable","hideInSetting","hideInExport","hideInPrint","printSlot","children"]),{key:(Q=(K=x.uid)!=null?K:x.columnKey)!=null?Q:x.prop,index:(ie=x.index)!=null?ie:e.pageIndex,className:ld(x),columnKey:(xe=x.columnKey)!=null?xe:x.prop,filterClassName:nd(x.filterClassName),showOverflowTooltip:Xu(x.showOverflowTooltip,f.value)}),{header:ge=>{var Se,Ae,Ye;return x.headerSlot&&!Wl.includes(x.headerSlot)&&l[x.headerSlot]?(Se=l[x.headerSlot])==null?void 0:Se.call(l,ge):D("div",{class:"ele-cell-title",title:(Ae=ge==null?void 0:ge.column)==null?void 0:Ae.label},[(Ye=ge==null?void 0:ge.column)==null?void 0:Ye.label])},"filter-icon":ge=>{var Se;return x.filterIcon?typeof x.filterIcon=="string"&&!Wl.includes(x.filterIcon)&&l[x.filterIcon]?(Se=l[x.filterIcon])==null?void 0:Se.call(l,ge):ce(x.filterIcon):D(zo,null,null)},default:ge=>{var Se;return x.slot&&!Wl.includes(x.slot)&&l[x.slot]&&(!e.slotNormalize||(ge==null?void 0:ge.$index)!=-1)?(Se=l[x.slot])==null?void 0:Se.call(l,ge):x.children&&x.children.length?x.children.map(oe):void 0}})};return()=>D(go,Te(m.value,{ref:u,emptyText:e.errorText||e.emptyText,rowClassName:x=>Gu(e.rowClassName,x),headerRowClassName:x=>Yu(e.headerRowClassName,x,e.headerEllipsis),class:["ele-data-table",{"is-sticky":e.sticky},{"is-layout-fixed-head":e.sticky&&i.value},{"is-layout-maximized":e.sticky&&a.value},{"is-sticky":e.sticky},{"hide-header":!e.showHeader},{"hide-bottom-line":!e.bottomLine}],onRowClick:g,onHeaderClick:d,onSortChange:p,onFilterChange:w,onCurrentChange:b,onSelect:y,onSelectAll:v}),{append:l.append?x=>{var K;return(K=l.append)==null?void 0:K.call(l,x)}:void 0,empty:l.empty?()=>{var x;return(x=l.empty)==null?void 0:x.call(l,{text:e.emptyText,error:e.errorText})}:e.emptyProps?()=>D(kl,Te({imageSize:68},!e.emptyProps||e.emptyProps===!0?{}:e.emptyProps,{description:e.errorText||e.emptyText,class:"ele-table-empty"}),null):void 0,default:()=>c.value.map(oe)})}});function sd(e,t){return t!=null&&t>0?t:e==="small"?34:e==="large"?50:42}function Tt(e){var t,l,n;return e&&(n=(l=(t=e.columnKey)!=null?t:e.property)!=null?l:e.prop)!=null?n:""}function Fl(e,t){if(typeof e=="number")return e<0?t:e;if(e==null||e===""||e==="auto"||e.endsWith("%"))return t;const l=Number.parseInt(e);return isNaN(l)?t:l}function id(e,t,l,n){const o=Fl(t),r=Fl(e);return r!=null?o==null||r<=o?r:o:Math.max(n,l)}function bo(e){let t,l;e.forEach((n,o)=>{const r=n.originalCol;r&&(r.fixed==="left"||r.fixed===!0?t=o:l==null&&r.fixed==="right"&&(l=o))}),t!=null&&(e[t].isFixedLeftLast=!0),l!=null&&(e[l].isFixedRightFirst=!0)}function za(e,t,l,n,o){l[n]==null&&(l[n]=[]),e.forEach(r=>{var u;const i=Tt(r),a=_t(r,["children"]);o!=null&&o.originalCol!=null&&(a.fixed=o.originalCol.fixed);const s={key:i,originalCol:a};if(r.children&&r.children.length)s.rowspan=1,s.colspan=r.children.length,za(r.children,t,l,n+1,s),o&&o.colspan!=null&&(o.colspan+=s.colspan-1);else{s.colspan=1;const c={width:Fl(r.width),minWidth:Fl(r.minWidth,80),key:i,dataKey:(u=r.property)!=null?u:r.prop,originalCol:a};t.push(c)}l[n].push(s)})}function Ka(e){const t=[],l=[];if(!e||!e.length)return{cols:t,rows:l};const n=[...e];n.sort((o,r)=>Ol(o.fixed)-Ol(r.fixed)),za(n,t,l,0),bo(t),l.forEach((o,r)=>{o.forEach(i=>{i!=null&&i.rowspan==null&&(i.rowspan=l.length-r)})});for(let o=0;o<l.length;o++)for(let r=0;r<l[o].length;r++){const i=l[o][r];if(i.colspan!=null&&i.colspan>1)for(let a=1;a<i.colspan;a++)l[o].splice(r+a,0,{colspan:0,rowspan:1});if(i.rowspan!=null&&i.rowspan>1)for(let a=1;a<i.rowspan;a++)l[o+a].splice(r,0,{colspan:1,rowspan:0,originalCol:i.originalCol})}return l.forEach(o=>{bo(o)}),{cols:t,rows:l}}function ud(e,t,l,n){if(e.width!=null)return e.width;if(e.minWidth==null)return 0;const o=t-l;return o<=n?e.minWidth:Math.floor(e.minWidth/n*o)}function wo(e,t){let l=0;e.forEach((o,r)=>{const i=o.originalCol;i&&(i.fixed==="left"||i.fixed===!0)&&(t[r].fixedLeft=l+"px",t[r].width&&(l+=t[r].width))});let n=0;for(let o=e.length-1;o>=0;o--){const r=e[o].originalCol;r&&r.fixed==="right"&&(t[o].fixedRight=n+"px",t[o].width&&(n+=t[o].width))}}function dd(e,t,l){let n=!0,o=0,r=0;e.forEach(c=>{if(c.width==null){n=!1,c.minWidth!=null&&(r+=c.minWidth);return}o+=c.width});const i=n?Math.min(l,o):l,a=[];let s=0;e.forEach((c,f)=>{const h=ud(c,i,o,r);s+=h,a[f]={width:h},f===e.length-1&&i>s&&(a[f].width=h+i-s,s=i)}),wo(e,a);const u=[];return t.forEach(c=>{const f=[];c.forEach((h,m)=>{if(!e[m]||!h.colspan){f[m]={width:0};return}let g=a[m].width||0;if(h.colspan>1){const d=m+h.colspan;for(let p=m+1;p<d;p++)a[p]&&a[p].width&&(g+=a[p].width)}f[m]={width:g}}),u.push(f),wo(c,f)}),{width:i,colSizes:a,rowSizes:u,sumWidth:s}}function cd(e,t){if(e.length!==t.length)return!0;for(let l=0;l<e.length;l++)if(e[l].width!==t[l].width)return!0;return!1}function fd(e,t){return e.map((n,o)=>({title:n.originalCol?n.originalCol.label:void 0,width:t[o].width,key:n.key,dataKey:n.dataKey})).filter(n=>!!n.width)}function So(e,t,l,n,o,r){if(!e||!e.length)return[];if(t)return e.map((a,s)=>{var f;const u=(f=Ke(a,o))!=null?f:s,c={rowId:"_expand_"+u,rowIndex:s,rowData:a,isExpandRow:!0};return{rowId:u,rowIndex:s,rowData:a,isDisabled:!(r==null||r(a,i)===!0),children:[c]}});let i=-1;return Sn(e,a=>{var s;return i++,{rowId:(s=Ke(a,o))!=null?s:i,rowIndex:i,rowData:a,isDisabled:!(r==null||r(a,i)===!0),hasChildren:a[n]===!0}},l)}function Qt(e,t,l,n){return l==null?yt(t,o=>o.rowId===e&&!o.isExpandRow):yt(t,o=>Ke(o,l)===e,n)}function ml(e,t,l){const n=[],o=[];return De(e,r=>{const i=t==null;(!i||!r.isExpandRow)&&(n.push(i?r.rowId:Ke(r,t)),o.push(r))},l),[n,o]}function hd(e,t,l){if(e)return!0;let n=!0;for(const o of t){const r=o.originalCol;if(r&&r.type!=="selection"&&r.type!=="expand"){if(r.showOverflowTooltip==null)n=!1;else if(r.showOverflowTooltip===!1)return!0}}return n?!1:l==null||l===!1}function Yt(e,t){var l,n;if(typeof e.render=="function"&&e.params!=null){const o=e.render(...e.params);if(o!=null)return Array.isArray(o)?o:[o]}return(n=(l=t.slots).default)==null?void 0:n.call(l)}function md(e,t){const l=Tt(t);if(e==null||e.order==null||e.key!==l)return{key:l,order:rt.ASC};if(e.order!==rt.DESC)return{key:l,order:rt.DESC}}function gd(e){if(e==="ascending")return rt.ASC;if(e==="descending")return rt.DESC}function Wa(e){if(e!=null){if(e===rt.ASC)return"ascending";if(e===rt.DESC)return"descending"}}function vd(e){if(!e)return;const{prop:t,order:l}=e;if(!(!t||!l||!["ascending","descending"].includes(l)))return{key:t,order:l==="ascending"?rt.ASC:rt.DESC}}function pd(e){const t={};return De(e,l=>{const n=Tt(l);n&&l.filteredValue!=null&&l.filteredValue.length&&(t[n]=l.filteredValue)}),t}function yd(e,t){var n;if(!e)return;if(!t)return e.filteredValue;const l=Tt(e);return l&&(n=t[l])!=null?n:e.filteredValue}function Ro(e){for(const t of e){const l=t.originalCol;if(l&&l.type==="selection")return typeof l.selectable=="function"?l.selectable:null}}function Cd(e){const{children:t,hasChildren:l}=e||{};return{childrenName:t||"children",hasChildrenName:l||"hasChildren"}}function Va(e,t,l){return t==null?String((l!=null?l:1)+e):String(typeof t=="function"?t(e):t+e)}function Ba(e,t){var l;const n={rowspan:1,colspan:1},o=(l=e.column)==null?void 0:l.type;if((!o||!["index","selection","expand"].includes(o))&&typeof t=="function"){const r=t(e);if(r!=null)if(Array.isArray(r)){const[i,a]=r;i!=null&&(n.rowspan=i),a!=null&&(n.colspan=a)}else r.rowspan!=null&&(n.rowspan=r.rowspan),r.colspan!=null&&(n.colspan=r.colspan)}return n}function ja(e,t,l){if(typeof e!="function"||t==null||l==null)return;const n=t.map(o=>({...o.originalCol||{},property:o.dataKey}));return e({columns:n,data:l})}function _a(e,t,l,n){if(l===0)return n!=null?n:"Sum";if(!e||!t)return"";let o=0;for(const r of e){const i=Number(Ke(r,t));if(Number.isNaN(i))return"";o+=i}return String(o)}function bd(e,t,l){let n;return e!=null&&t!=null&&De(e,o=>{if(l!=null){if(o.property===l||o.prop===l)return n=o,!1}else if(Tt(o)===t)return n=o,!1}),n}function wd(e){const t=e.querySelector(".ele-table-cell");return Qr(t,"horizontal")}function Sd(e){const t=E(0),l=E(0),n=()=>{const a=e();if(a){const s=Math.floor(a.clientWidth);t.value!==s&&(t.value=s);const u=Math.floor(a.clientHeight);t.value!==u&&(l.value=u)}},o=new ResizeObserver(Zr(()=>{n()},400)),r=()=>{i();const a=e();a&&o.observe(a)},i=()=>{const a=e();a&&o.unobserve(a)};return Ct(()=>{n(),r()}),pn(()=>{o.disconnect()}),Ko(()=>{n(),r()}),Wo(()=>{i()}),{wrapWidth:t,wrapHeight:l,updateWrapSize:n}}const Rd=Ne({name:"CellCheckbox",components:{ElCheckbox:mt},props:{checked:Boolean,indeterminate:Boolean,disabled:Boolean,size:String},emits:{change:e=>!0},setup(e,{emit:t}){return{handleUpdateModelValue:n=>{e.checked!==n&&t("change",n)}}}}),xd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function kd(e,t,l,n,o,r){const i=W("ElCheckbox");return P(),se(i,{modelValue:e.checked,indeterminate:e.indeterminate,disabled:e.disabled,size:e.size,"onUpdate:modelValue":e.handleUpdateModelValue},null,8,["modelValue","indeterminate","disabled","size","onUpdate:modelValue"])}const Ua=xd(Rd,[["render",kd]]),Td=Ne({name:"CellFilter",components:{ElIcon:bt,ElButton:Rn,ElScrollbar:vn,ElCheckboxGroup:es,ElCheckbox:mt,EleTooltip:xn,FilterFilled:zo},props:{filtered:Array,filterMultiple:Boolean,filters:Array,filterPlacement:{type:String,default:"bottom-start"}},emits:{change:e=>!0},setup(e,{emit:t}){const{t:l}=$l(),n=E(null),o=E([]),r=F(()=>l("el.table.clearFilter")),i=F(()=>{if(!(!e.filtered||!e.filtered.length))return e.filtered[0]}),a=F(()=>l("el.table.confirmFilter")),s=F(()=>l("el.table.resetFilter")),u=()=>{n.value&&n.value.hide()},c=()=>{var d;o.value=(d=e.filtered)!=null?d:[]},f=d=>{h(d==null?[]:[d]),u()},h=d=>{t("change",d)};return{popperRef:n,checkedValue:o,clearFilterText:r,filteredValue:i,confirmText:a,resetText:s,handleItemClick:f,handleFilterChange:h,handleConfirm:()=>{h(o.value),u()},handleReset:()=>{o.value=[],h([]),u()},handleBeforeEnter:c}}}),Ed=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Od={class:"ele-table-filter-footer"},Hd={key:1,class:"ele-table-filter-list"},Fd=["onClick"];function Id(e,t,l,n,o,r){const i=W("FilterFilled"),a=W("ElIcon"),s=W("ElCheckbox"),u=W("ElCheckboxGroup"),c=W("ElScrollbar"),f=W("ElButton"),h=W("EleTooltip");return P(),Y("div",{class:"ele-table-filter",onClick:t[2]||(t[2]=Nl(()=>{},["stop"]))},[D(h,{ref:"popperRef",trigger:"click",showArrow:!1,placement:e.filterPlacement,popperClass:"ele-table-filter-popper",gpuAcceleration:!0,effect:"light",isPopover:!0,popperOptions:{strategy:"fixed",modifiers:[{name:"offset",options:{offset:[0,4]}}]},onBeforeShow:e.handleBeforeEnter},{body:G(()=>[e.filterMultiple?(P(),Y($e,{key:0},[D(c,{class:"ele-table-filter-body"},{default:G(()=>[D(u,{modelValue:e.checkedValue,"onUpdate:modelValue":t[0]||(t[0]=m=>e.checkedValue=m)},{default:G(()=>[(P(!0),Y($e,null,Pe(e.filters,m=>(P(),se(s,{key:m.value,value:m.value,label:m.text},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),we("div",Od,[D(f,{size:"small",text:!0,onClick:e.handleReset},{default:G(()=>[pt(Be(e.resetText),1)]),_:1},8,["onClick"]),D(f,{size:"small",type:"primary",disabled:!e.checkedValue.length,onClick:e.handleConfirm},{default:G(()=>[pt(Be(e.confirmText),1)]),_:1},8,["disabled","onClick"])])],64)):(P(),Y("div",Hd,[we("div",{class:ke(["ele-table-filter-item",{"is-active":e.filteredValue==null}]),onClick:t[1]||(t[1]=m=>e.handleItemClick())},Be(e.clearFilterText),3),(P(!0),Y($e,null,Pe(e.filters,m=>(P(),Y("div",{key:m.value,class:ke(["ele-table-filter-item",{"is-active":e.filteredValue===m.value}]),onClick:g=>e.handleItemClick(m.value)},Be(m.text),11,Fd))),128))]))]),default:G(()=>[D(a,null,{default:G(()=>[D(i)]),_:1})]),_:1},8,["placement","onBeforeShow"])])}const Md=Ed(Td,[["render",Id]]),$d=Ne({name:"HeaderCell",components:{CellCheckbox:Ua,CellFilter:Md,CellRender:Yt},props:{column:Object,columnIndex:Number,headerIndex:Number,colSize:Object,sortBy:Object,filterValue:Object,isCheckAll:Boolean,isIndeterminate:Boolean,disabledCheckbox:Boolean,tableSize:String,headerCellClass:[String,Function],headerCellStyle:[Object,Function],headerEllipsis:Boolean,rowHeight:Number},emits:{checkedChange:e=>!0,filterChange:e=>!0,click:(e,t)=>!0,contextmenu:(e,t)=>!0,mouseenter:(e,t)=>!0},setup(e,{emit:t,slots:l}){const n=F(()=>e.column?e.column.originalCol:void 0),o=F(()=>({column:n.value,columnIndex:e.columnIndex,rowIndex:e.headerIndex})),r=F(()=>{const d=["el-table-v2__header-cell","ele-table-td"];e.column&&(e.column.colspan?e.column.colspan>1&&d.push("is-multi-cell"):d.push("is-none"),e.column.rowspan?e.column.rowspan>1&&d.push("is-multi-row"):d.push("is-placeholder"));const p=n.value;if(p){const w=p.headerAlign||p.align;if(w&&d.push("is-align-"+w),(p.sortable===!0||p.sortable==="custom")&&d.push("is-sortable"),e.sortBy!=null&&Tt(p)===e.sortBy.key){const b=Wa(e.sortBy.order);b&&d.push("is-"+b)}if(p.filters&&p.filters.length&&e.filterValue&&e.filterValue.length&&d.push("is-filtered"),p.type==="selection"&&d.push("is-selection"),p.type==="expand"&&d.push("is-expand"),e.headerEllipsis&&d.push("is-ellipsis"),p.fixed==="right"?d.push("is-fixed-right"):(p.fixed==="left"||p.fixed===!0)&&d.push("is-fixed-left"),e.column&&(e.column.isFixedLeftLast&&d.push("is-fixed-left-last"),e.column.isFixedRightFirst&&d.push("is-fixed-right-first")),typeof e.headerCellClass=="function"){const b=e.headerCellClass(o.value);b&&d.push(b)}else e.headerCellClass&&d.push(e.headerCellClass);p.labelClassName&&d.push(p.labelClassName)}return d.join(" ")}),i=F(()=>{if(!(e.rowHeight==null||e.column==null||!e.column.rowspan||e.column.rowspan<=1))return e.column.rowspan*e.rowHeight+"px"}),a=F(()=>{if(!e.colSize)return;const{width:d,fixedLeft:p,fixedRight:w}=e.colSize,b=e.headerCellStyle,y=o.value;return[{width:d+"px",height:i.value,left:p,right:w},(typeof b=="function"?b(y):b)||{}]}),s=F(()=>n.value?n.value.label:void 0),u=F(()=>{const d=n.value;if(d){const p={column:d,$index:e.columnIndex};if(d.headerSlot){const w=l[d.headerSlot];if(typeof w=="function")return{render:w,params:[p]}}if(typeof d.renderHeader=="function")return{render:d.renderHeader,params:[p]}}return{}});return{originalCol:n,cellClass:r,cellStyle:a,cellTitle:s,renderOpt:u,handleCheckedChange:d=>{t("checkedChange",d)},handleFilterChange:d=>{t("filterChange",{column:n.value,value:d})},handleClick:d=>{t("click",n.value,d)},handleContextmenu:d=>{t("contextmenu",n.value,d)},handleMouseenter:d=>{t("mouseenter",n.value,d)}}}}),Nd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Dd={key:0,class:"ele-table-cell"},Ad=["title"],Pd={key:0,class:"ele-table-sorter"};function Ld(e,t,l,n,o,r){const i=W("CellCheckbox"),a=W("CellRender"),s=W("CellFilter");return P(),Y("div",{class:ke(e.cellClass),style:Xe(e.cellStyle),onClick:t[0]||(t[0]=(...u)=>e.handleClick&&e.handleClick(...u)),onContextmenu:t[1]||(t[1]=(...u)=>e.handleContextmenu&&e.handleContextmenu(...u)),onMouseenter:t[2]||(t[2]=(...u)=>e.handleMouseenter&&e.handleMouseenter(...u))},[e.originalCol?(P(),Y("div",Dd,[we("div",{class:"ele-cell-title",title:e.headerEllipsis?e.cellTitle:void 0},[e.originalCol.type==="selection"?(P(),se(i,{key:0,checked:e.isCheckAll,indeterminate:e.isIndeterminate,disabled:e.disabledCheckbox,size:e.tableSize,onChange:e.handleCheckedChange},null,8,["checked","indeterminate","disabled","size","onChange"])):(P(),se(a,et(Te({key:1},e.renderOpt)),{default:G(()=>[pt(Be(e.cellTitle),1)]),_:1},16))],8,Ad),e.originalCol.sortable?(P(),Y("div",Pd)):de("",!0),e.originalCol.filters&&e.originalCol.filters.length?(P(),se(s,{key:1,filtered:e.filterValue,filterMultiple:e.originalCol.filterMultiple,filters:e.originalCol.filters,filterPlacement:e.originalCol.filterPlacement,onChange:e.handleFilterChange},null,8,["filtered","filterMultiple","filters","filterPlacement","onChange"])):de("",!0)])):de("",!0)],38)}const zd=Nd($d,[["render",Ld]]),Kd=Ne({name:"HeaderRow",components:{HeaderCell:zd},props:{headerCols:Array,headerColSizes:Array,headerIndex:Number,sortBy:Object,filtered:Object,isCheckAll:Boolean,isIndeterminate:Boolean,disabledCheckbox:Boolean,tableSize:String,headerCellClass:[String,Function],headerCellStyle:[Object,Function],headerEllipsis:Boolean,rowHeight:Number},emits:{checkedChange:e=>!0,filterChange:e=>!0,cellClick:(e,t)=>!0,cellContextmenu:(e,t)=>!0,cellMouseenter:(e,t)=>!0},setup(e,{emit:t}){return{getKey:(u,c)=>{var f;return e.headerIndex+"-"+((f=u.key)!=null?f:c)},getFiltered:u=>yd(u.originalCol,e.filtered),handleCellCheckedChange:u=>{t("checkedChange",u)},handleCellFilterChange:u=>{t("filterChange",u)},handleCellClick:(u,c)=>{t("cellClick",u,c)},handleCellContextmenu:(u,c)=>{t("cellContextmenu",u,c)},handleCellMouseenter:(u,c)=>{t("cellMouseenter",u,c)}}}}),Wd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function Vd(e,t,l,n,o,r){const i=W("HeaderCell");return P(!0),Y($e,null,Pe(e.headerCols,(a,s)=>(P(),se(i,{key:e.getKey(a,s),column:a,columnIndex:s,headerIndex:e.headerIndex,colSize:e.headerColSizes?e.headerColSizes[s]:void 0,sortBy:e.sortBy,filterValue:e.getFiltered(a),isCheckAll:e.isCheckAll,isIndeterminate:e.isIndeterminate,disabledCheckbox:e.disabledCheckbox,tableSize:e.tableSize,headerCellClass:e.headerCellClass,headerCellStyle:e.headerCellStyle,headerEllipsis:e.headerEllipsis,rowHeight:e.rowHeight,onCheckedChange:e.handleCellCheckedChange,onFilterChange:e.handleCellFilterChange,onClick:e.handleCellClick,onContextmenu:e.handleCellContextmenu,onMouseenter:e.handleCellMouseenter},dt({_:2},[Pe(Object.keys(e.$slots),u=>({name:u,fn:G(c=>[Oe(e.$slots,u,Te({ref_for:!0},c||{}))])}))]),1032,["column","columnIndex","headerIndex","colSize","sortBy","filterValue","isCheckAll","isIndeterminate","disabledCheckbox","tableSize","headerCellClass","headerCellStyle","headerEllipsis","rowHeight","onCheckedChange","onFilterChange","onClick","onContextmenu","onMouseenter"]))),128)}const Bd=Wd(Kd,[["render",Vd]]),jd=Ne({name:"BodyCell",components:{ElIcon:bt,ArrowDown:Vo,LoadingDotOutlined:ts,CellCheckbox:Ua,CellRender:Yt},props:{column:{type:Object,required:!0},columnIndex:{type:Number,required:!0},rowIndex:{type:Number,required:!0},rowData:{type:Object,required:!0},colSizes:{type:Array,required:!0},bodyCellClass:[String,Function],bodyCellStyle:[Object,Function],spanMethod:Function,tableTooltipProps:[Boolean,Object],pageIndex:Number,rowHeight:Number,isChecked:Boolean,isDisabled:Boolean,tableSize:String,expandColumnKey:String,hasChildren:Boolean,rowIndent:String,isCollapse:Boolean,loading:Boolean,fixedCellHeight:Boolean,autoRowHeight:Boolean},emits:{checkedChange:e=>!0,expandChange:e=>!0,click:(e,t)=>!0,dblclick:(e,t)=>!0,contextmenu:(e,t)=>!0,mouseenter:(e,t)=>!0,mouseleave:(e,t)=>!0},setup(e,{emit:t,slots:l}){const n=F(()=>e.column.originalCol),o=F(()=>{var S;return(S=n.value.type)!=null?S:""}),r=F(()=>({column:n.value,columnIndex:e.columnIndex,rowIndex:e.rowIndex,row:e.rowData})),i=F(()=>{const S=Ba(r.value,e.spanMethod);return["indedx","selection","expand"].includes(o.value)&&(S.rowspan=1),S}),a=F(()=>{if(o.value==="selection"||o.value==="expand")return!0;const S=n.value;return S&&S.showOverflowTooltip!=null?S.showOverflowTooltip!==!1:!!e.tableTooltipProps}),s=F(()=>{const S=["el-table-v2__row-cell","ele-table-td"];i.value.colspan?i.value.colspan>1&&S.push("is-multi-cell"):S.push("is-none"),i.value.rowspan?i.value.rowspan>1&&S.push("is-multi-row"):S.push("is-placeholder"),o.value==="index"&&S.push("is-index"),o.value==="selection"&&S.push("is-selection"),o.value==="expand"&&S.push("is-expand");const R=n.value;if(R){if(R.align&&S.push("is-align-"+R.align),a.value&&S.push("is-ellipsis"),R.fixed==="right"?S.push("is-fixed-right"):(R.fixed==="left"||R.fixed===!0)&&S.push("is-fixed-left"),e.column&&(e.column.isFixedLeftLast&&S.push("is-fixed-left-last"),e.column.isFixedRightFirst&&S.push("is-fixed-right-first")),typeof e.bodyCellClass=="function"){const k=e.bodyCellClass(r.value);k&&S.push(k)}else e.bodyCellClass&&S.push(e.bodyCellClass);R.className&&S.push(R.className)}return S.join(" ")}),u=F(()=>{const S=i.value.colspan;if(S===0)return"0px";let R=e.colSizes[e.columnIndex].width||0;if(S&&S>1){const k=e.columnIndex+S;for(let A=e.columnIndex;A<k;A++)e.colSizes[A]&&e.colSizes[A].width!=null&&(R+=e.colSizes[A].width)}return R+"px"}),c=F(()=>{if(e.fixedCellHeight&&e.rowHeight!=null)return e.rowHeight+"px";const S=i.value.rowspan;if(!(e.rowHeight==null||S==null||S<=1))return S*e.rowHeight+"px"}),f=F(()=>{if(!(!e.autoRowHeight||!e.rowHeight))return e.rowHeight+"px"}),h=F(()=>{if(!(!e.colSizes||e.columnIndex==null))return e.colSizes[e.columnIndex]}),m=F(()=>{const S=e.bodyCellStyle,R=r.value;return[{width:u.value,height:c.value,minHeight:f.value,left:h.value?h.value.fixedLeft:void 0,right:h.value?h.value.fixedRight:void 0},(typeof S=="function"?S(R):S)||{}]}),g=F(()=>{const S=n.value;if(S&&S.type==="index")return typeof S.index=="function"?void 0:Va(e.rowIndex,S.index,e.pageIndex);const R=e.column?e.column.dataKey:void 0,{rowspan:k,colspan:A}=i.value;if(!(k===0||A===0||R==null||!e.rowData))return Ke(e.rowData,R)}),d=F(()=>e.column!=null&&e.expandColumnKey!=null&&e.expandColumnKey===e.column.key),p=F(()=>{const S=n.value,{rowspan:R,colspan:k}=i.value;if(S&&R!==0&&k!==0){const{rowIndex:A,rowData:N}=e;if(S.type==="index")return typeof S.index=="function"?{render:S.index,params:[A]}:{};if(S.slot&&typeof l[S.slot]=="function")return{render:l[S.slot],params:[{row:N,column:S,$index:A}]};if(typeof S.formatter=="function")return{render:S.formatter,params:[N,S,g.value,A]}}return{}});return{colType:o,cellClass:s,cellStyle:m,cellText:g,isExpandCol:d,renderOpt:p,handleTextClick:S=>{o.value==="selection"&&S.stopPropagation()},handleCheckedChange:S=>{t("checkedChange",S)},handleExpandChange:()=>{e.loading||t("expandChange",e.isCollapse)},handleClick:S=>{t("click",n.value,S)},handleDblclick:S=>{t("dblclick",n.value,S)},handleContextmenu:S=>{t("contextmenu",n.value,S)},handleMouseenter:S=>{t("mouseenter",n.value,S)},handleMouseleave:S=>{t("mouseleave",n.value,S)}}}}),_d=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Ud={key:2,class:"ele-table-placeholder"};function qd(e,t,l,n,o,r){const i=W("LoadingDotOutlined"),a=W("ArrowDown"),s=W("ElIcon"),u=W("CellCheckbox"),c=W("CellRender");return P(),Y("div",{class:ke(e.cellClass),style:Xe(e.cellStyle),onClick:t[2]||(t[2]=(...f)=>e.handleClick&&e.handleClick(...f)),onDblclick:t[3]||(t[3]=(...f)=>e.handleDblclick&&e.handleDblclick(...f)),onContextmenu:t[4]||(t[4]=(...f)=>e.handleContextmenu&&e.handleContextmenu(...f)),onMouseenter:t[5]||(t[5]=(...f)=>e.handleMouseenter&&e.handleMouseenter(...f)),onMouseleave:t[6]||(t[6]=(...f)=>e.handleMouseleave&&e.handleMouseleave(...f))},[we("div",{class:"ele-table-cell",onClick:t[1]||(t[1]=(...f)=>e.handleTextClick&&e.handleTextClick(...f))},[e.isExpandCol?(P(),Y($e,{key:0},[e.rowIndent?(P(),Y("div",{key:0,class:"ele-table-indent",style:Xe({width:e.rowIndent})},null,4)):de("",!0),e.hasChildren?(P(),Y("div",{key:1,class:ke(["ele-table-expand",{"is-collapse":e.isCollapse}]),onClick:t[0]||(t[0]=Nl((...f)=>e.handleExpandChange&&e.handleExpandChange(...f),["stop"]))},[D(s,{class:ke({"is-loading":e.loading})},{default:G(()=>[e.loading?(P(),se(i,{key:0})):(P(),se(a,{key:1}))]),_:1},8,["class"])],2)):(P(),Y("div",Ud))],64)):de("",!0),e.colType==="selection"?(P(),se(u,{key:1,checked:e.isChecked,disabled:e.isDisabled,size:e.tableSize,onChange:e.handleCheckedChange},null,8,["checked","disabled","size","onChange"])):e.colType!=="expand"?(P(),se(c,et(Te({key:2},e.renderOpt)),{default:G(()=>[pt(Be(e.cellText),1)]),_:1},16)):de("",!0)])],38)}const Gd=_d(jd,[["render",qd]]),Yd=Ne({name:"BodyRow",components:{BodyCell:Gd},props:{bodyCols:{type:Array,required:!0},colSizes:{type:Array,required:!0},rowIndex:{type:Number,required:!0},rowItem:{type:Object,required:!0},rowId:[String,Number],checkedRowKeys:Set,bodyCellClass:[String,Function],bodyCellStyle:[Object,Function],spanMethod:Function,tableTooltipProps:[Boolean,Object],pageIndex:Number,rowHeight:Number,tableSize:String,expandColumnKey:String,expandedRowKeys:Array,lazy:Boolean,load:Function,level:Number,indent:Number,fixedCellHeight:Boolean,autoRowHeight:Boolean},emits:{cellCheckedChange:(e,t)=>!0,cellExpandChange:(e,t,l)=>!0,cellClick:(e,t,l)=>!0,cellDblclick:(e,t,l)=>!0,cellContextmenu:(e,t,l)=>!0,cellMouseenter:(e,t,l)=>!0,cellMouseleave:(e,t,l)=>!0},setup(e,{emit:t}){const l=E(!1),n=F(()=>!e.checkedRowKeys||e.rowId==null?!1:e.checkedRowKeys.has(e.rowId)),o=F(()=>{if(e.rowItem){if(e.rowItem.children)return!!e.rowItem.children.length;if(e.lazy&&e.rowItem.hasChildren)return!0}return!1}),r=F(()=>{if(!(!e.level||!e.indent))return e.level*e.indent+"px"}),i=F(()=>!e.expandedRowKeys||e.rowId==null?!0:!e.expandedRowKeys.includes(e.rowId));return{loading:l,isChecked:n,hasChildren:o,rowIndent:r,isCollapse:i,handleCellCheckedChange:g=>{t("cellCheckedChange",e.rowItem,g)},handleCellExpandChange:g=>{if(g&&e.lazy&&!e.rowItem.children){e.load&&(l.value=!0,e.load(e.rowItem.rowData,null,d=>{l.value=!1,t("cellExpandChange",e.rowItem,g,d)}));return}t("cellExpandChange",e.rowItem,g)},handleCellClick:(g,d)=>{t("cellClick",e.rowItem,g,d)},handleCellDblclick:(g,d)=>{t("cellDblclick",e.rowItem,g,d)},handleCellContextmenu:(g,d)=>{t("cellContextmenu",e.rowItem,g,d)},handleCellMouseenter:(g,d)=>{t("cellMouseenter",e.rowItem,g,d)},handleCellMouseleave:(g,d)=>{t("cellMouseleave",e.rowItem,g,d)}}}}),Xd=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function Jd(e,t,l,n,o,r){const i=W("BodyCell");return P(!0),Y($e,null,Pe(e.bodyCols,(a,s)=>{var u,c;return P(),se(i,{key:((u=e.rowId)!=null?u:e.rowIndex)+"-"+((c=a.key)!=null?c:s),column:a,columnIndex:s,rowIndex:e.rowIndex,rowData:e.rowItem.rowData,colSizes:e.colSizes,bodyCellClass:e.bodyCellClass,bodyCellStyle:e.bodyCellStyle,spanMethod:e.spanMethod,tableTooltipProps:e.tableTooltipProps,pageIndex:e.pageIndex,rowHeight:e.rowHeight,isChecked:e.isChecked,isDisabled:e.rowItem.isDisabled,tableSize:e.tableSize,expandColumnKey:e.expandColumnKey,hasChildren:e.hasChildren,rowIndent:e.rowIndent,isCollapse:e.isCollapse,loading:e.loading,fixedCellHeight:e.fixedCellHeight,autoRowHeight:e.autoRowHeight,onCheckedChange:e.handleCellCheckedChange,onExpandChange:e.handleCellExpandChange,onClick:e.handleCellClick,onDblclick:e.handleCellDblclick,onContextmenu:e.handleCellContextmenu,onMouseenter:e.handleCellMouseenter,onMouseleave:e.handleCellMouseleave},dt({_:2},[Pe(Object.keys(e.$slots),f=>({name:f,fn:G(h=>[Oe(e.$slots,f,Te({ref_for:!0},h||{}))])}))]),1032,["column","columnIndex","rowIndex","rowData","colSizes","bodyCellClass","bodyCellStyle","spanMethod","tableTooltipProps","pageIndex","rowHeight","isChecked","isDisabled","tableSize","expandColumnKey","hasChildren","rowIndent","isCollapse","loading","fixedCellHeight","autoRowHeight","onCheckedChange","onExpandChange","onClick","onDblclick","onContextmenu","onMouseenter","onMouseleave"])}),128)}const Zd=Xd(Yd,[["render",Jd]]),Qd=Ne({name:"ExpandRow",props:{column:Object,rowIndex:Number,rowData:Object}}),ec=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},tc={class:"el-table-v2__row-cell ele-table-td"};function lc(e,t,l,n,o,r){return P(),Y("div",tc,[e.column&&e.column.slot?Oe(e.$slots,e.column.slot,et(Te({key:0},{row:e.rowData,column:e.column,$index:e.rowIndex}))):de("",!0)])}const nc=ec(Qd,[["render",lc]]),oc=Ne({name:"FooterRow",components:{CellRender:Yt},props:{bodyCols:{type:Array,required:!0},tableData:{type:Array,required:!0},colSizes:{type:Array,required:!0},sumWidth:Number,rowHeight:Number,sumText:String,summaryMethod:Function},emits:{mouseenter:e=>!0},setup(e,{emit:t}){const l=F(()=>e.tableData.map(i=>i.rowData)),n=F(()=>ja(e.summaryMethod,e.bodyCols,l.value));return{sumCols:F(()=>{const i=n.value;return e.bodyCols.map((a,s)=>{const u=e.colSizes[s],c=_a(l.value,a.dataKey),f=a.originalCol;return{key:s+"-"+a.key,width:u&&u.width||0,fixedLeft:u?u.fixedLeft:void 0,fixedRight:u?u.fixedRight:void 0,text:i==null?s===0?e.sumText:c:i[s],align:f?f.align:void 0,fixed:f?f.fixed:void 0,isFixedLeftLast:a.isFixedLeftLast,isFixedRightFirst:a.isFixedRightFirst}})}),handleMouseenter:i=>{t("mouseenter",i)}}}}),ac=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},rc={class:"ele-table-cell"};function sc(e,t,l,n,o,r){const i=W("CellRender");return P(),Y("div",{class:"ele-table-foot-tr",style:Xe({width:(e.sumWidth||0)+"px",height:(e.rowHeight||0)+"px"})},[(P(!0),Y($e,null,Pe(e.sumCols,a=>(P(),Y("div",{key:a.key,class:ke(["ele-table-td","is-ellipsis",{"is-align-left":a.align==="left"},{"is-align-center":a.align==="center"},{"is-align-right":a.align==="right"},{"is-fixed-left":a.fixed==="left"||a.fixed===!0},{"is-fixed-right":a.fixed==="right"},{"is-fixed-left-last":a.isFixedLeftLast},{"is-fixed-right-first":a.isFixedRightFirst}]),style:Xe({width:a.width+"px",left:a.fixedLeft,right:a.fixedRight}),onMouseenter:t[0]||(t[0]=(...s)=>e.handleMouseenter&&e.handleMouseenter(...s))},[we("div",rc,[D(i,{render:()=>a.text,params:[]},null,8,["render"])])],38))),128))],4)}const ic=ac(oc,[["render",sc]]),uc={...Dl,rowHeight:Number},dc={...Dn},cc=["default","empty","append"],fc=Ne({name:"EleVirtualTable",components:{ElTableV2:qu,ElEmpty:kl,EleTooltip:xn,HeaderRow:Bd,BodyRow:Zd,ExpandRow:nc,FooterRow:ic},props:uc,emits:dc,setup(e,{emit:t}){var Bn;const{t:l}=$l(),n=Nn(t),{wrapWidth:o,wrapHeight:r,updateWrapSize:i}=Sd(()=>c.value),{isLayoutFixedHead:a,isLayoutMaximized:s}=Aa(),u={checked:new Map,reserveChecked:!1,scrollTop:0},c=E(null),f=E(null),h=E(0),m=E([]),g=E([]),d=E([]),p=E([]),w=E(0),b=E(0),y=E(0),v=E([]),C=E([]),O=E(0),M=E((Bn=e.currentRowKey)!=null?Bn:null),$=E(new Set(e.selectedRowKeys||[])),S=E(!1),R=E([]),k=E(vd(e.defaultSort)),A=rl(pd(e.columns)),N=rl({placement:"top",trigger:"click",offset:0,hideAfter:0,content:"",virtualRef:void 0,virtualTriggering:!0,disabled:!0,visible:!1,teleported:!1,transition:"ele-transition-none"}),B=F(()=>Cd(e.treeProps)),V=F(()=>B.value.childrenName),q=F(()=>B.value.hasChildrenName),le=F(()=>v.value.some(H=>{var z;return((z=H.children)==null?void 0:z.length)||e.lazy&&H.hasChildren})),he=F(()=>g.value.find(H=>!!(H&&H.originalCol&&H.originalCol.type==="expand"))),L=F(()=>!!he.value),U=F(()=>{if(he.value)return he.value.key;if(!le.value)return;const H=g.value.find(z=>{if(!z||!z.key||!z.originalCol)return!1;const _=z.originalCol.type;return!_||!["selection","index"].includes(_)});return H?H.key:void 0}),oe=F(()=>sd(e.size,e.rowHeight)),ue=F(()=>hd(L.value,g.value,e.showOverflowTooltip)),x=F(()=>e.showHeader?m.value.length:0),K=F(()=>!!(e.showSummary&&v.value.length)),Q=F(()=>{const H=oe.value,z=new Array(x.value).fill(H);return{cache:2,estimatedRowHeight:ue.value?H:void 0,headerClass:te=>{const ae=e.headerRowClassName,Ce=["ele-table-head-tr"];if(typeof ae=="function"){const Ue=ae({rowIndex:te.headerIndex});Ue&&Ce.push(Ue)}else typeof ae=="string"&&ae&&Ce.push(ae);return Ce.join(" ")},headerProps:te=>{const ae={rowIndex:te.headerIndex},Ce=e.headerRowStyle;return{style:typeof Ce=="function"?Ce(ae):Ce}},headerHeight:x.value?z:0,footerHeight:K.value?H:void 0,rowClass:te=>{const ae=["ele-table-tr"],Ce=te.rowData,Ue=Ce.rowIndex;if(Ce&&Ce.isExpandRow===!0)ae.push("is-expand-row");else if(Ce){e.stripe&&(Ue+1)%2===0&&ae.push("is-even"),e.highlightCurrentRow&&M.value!=null&&M.value===Ce.rowId&&ae.push("is-current");const ut=e.rowClassName;if(typeof ut=="function"){const Qe=ut({row:Ce.rowData,rowIndex:Ue});Qe&&ae.push(Qe)}else typeof ut=="string"&&ut&&ae.push(ut)}return ae.join(" ")},rowKey:"rowId",rowProps:te=>{const ae=te.rowData,Ce={row:ae.rowData,rowIndex:ae.rowIndex},Ue=e.rowStyle;return{style:typeof Ue=="function"?Ue(Ce):Ue}},rowHeight:ue.value?void 0:H,columns:C.value,data:v.value,expandColumnKey:U.value,expandedRowKeys:R.value,defaultExpandedRowKeys:R.value,fixed:!0,width:b.value,height:y.value,hScrollbarSize:0,vScrollbarSize:0,scrollbarAlwaysOn:e.scrollbarAlwaysOn,sortBy:k.value}}),ie=F(()=>!!($.value.size&&!S.value)),xe=F(()=>O.value>1),ge=F(()=>{const H=w.value-b.value-1;return H>1&&O.value<H}),Se=F(()=>{var H;return(H=e.sumText)!=null?H:l("el.table.sumText")}),Ae=F(()=>e.errorText||e.emptyText||l("el.table.emptyText")),Ye=(H,z)=>{const _=H.innerText,te=Da(z?z.showOverflowTooltip:void 0,Na(e.showOverflowTooltip,e.tooltipEffect,e.tooltipOptions));if(_&&te&&wd(H)){N.content=_;const ae=["virtualRef","virtualTriggering","disabled","visible","teleported"];Object.keys(te).forEach(Ce=>{const Ue=te[Ce];!ae.includes(Ce)&&N[Ce]!==Ue&&(N[Ce]=Ue)}),N.virtualRef=H,N.disabled=!1,N.visible=!0}else je()},je=()=>{N.visible=!1,N.disabled=!0},We=H=>{const z=Tt(H.column);z&&(A[z]=H.value,n.onFilterChange(A))},Ve=(H,z)=>{me(H.rowData,H.rowId,z);const _=ze();n.onSelect(_,H.rowData),n.onSelectionChange(_)},He=(H,z,_)=>{if(z&&_!=null){const te=So(_,L.value,V.value,q.value,e.rowKey,Ro(g.value));let ae=-1;if(De(v.value,Ce=>{ae++,Ce.rowId===H.rowId&&(Ce.children=te,te.length||(Ce.hasChildren=!1)),Ce.rowIndex=ae}),!te.length)return}vt(H,z)},Ze=(H,z,_)=>{const te=_.currentTarget,ae=H.rowData,Ce=H.rowId;n.onCellClick(ae,z,te,_),e.highlightCurrentRow&&Ot(ae),e.rowClickChecked&&!H.isDisabled&&(e.rowClickChecked==="smart"&&(!$.value.size||$.value.size===1)?Ce!=null&&!$.value.has(Ce)&&($.value=new Set([Ce]),u.checked.clear(),u.checked.set(Ce,ae),ne(),xt([Ce]),n.onSelectionChange([ae])):(me(ae,Ce),n.onSelectionChange(ze()))),n.onRowClick(ae,z,_)},Z=(H,z,_)=>{const te=_.currentTarget;n.onCellDblclick(H.rowData,z,te,_),n.onRowDblclick(H.rowData,z,_)},J=(H,z,_)=>{const te=_.currentTarget;n.onCellContextmenu(H.rowData,z,te,_),n.onRowContextmenu(H.rowData,z,_)},re=(H,z,_)=>{const te=_.currentTarget;Ye(te,z),n.onCellMouseEnter(H.rowData,z,te,_)},ve=(H,z,_)=>{const te=_.currentTarget;n.onCellMouseLeave(H.rowData,z,te,_)},pe=(H,z)=>{H&&(H.sortable===!0||H.sortable==="custom")&&(k.value=md(k.value,H),n.onSortChange({prop:H.property||H.prop,order:Wa(k.value?k.value.order:void 0),column:H})),n.onHeaderClick(H,z)},I=(H,z)=>{n.onHeaderContextmenu(H,z)},j=()=>{je()},ee=H=>{Ye(H.currentTarget,{showOverflowTooltip:!0})},be=()=>{je()},Fe=()=>{je()},_e=H=>{u.scrollTop=H.scrollTop;const z=H.scrollLeft;if(O.value!==z&&(O.value=z),K.value&&f.value&&f.value.$el){const _=ls(f.value.$el,"el-table-v2__footer");_&&_.scrollLeft!=z&&(_.scrollLeft=z)}},Ie=()=>{v.value=So(e.data,L.value,V.value,q.value,e.rowKey,Ro(g.value)),e.defaultExpandAll?Le(!0):e.expandRowKeys&&e.expandRowKeys.length?R.value=[...e.expandRowKeys]:Le(!1)},Me=(H,z)=>{if(!Hl(M.value,H)){H!=null&&z!=null&&u.row!==z&&(u.row=z,n.onCurrentChange(z,u.oldRow));return}if(H!=null){const _=Qt(H,v.value);if(_!=null||e.reserveCurrent){u.oldRow=u.row,u.row=(_==null?void 0:_.rowData)||z||void 0,u.row==null&&e.cacheData!=null&&(u.row=Qt(H,e.cacheData,e.rowKey,V.value)),M.value=H,Vn(H),n.onCurrentChange(u.row,u.oldRow);return}}M.value!=null&&(u.oldRow=u.row,u.row=void 0,M.value=null,Vn(),n.onCurrentChange(void 0,u.oldRow))},X=()=>{const H=M.value;if(H!=null){const z=Qt(H,v.value);if(z!=null)Me(H,z.rowData);else if(!e.reserveCurrent)Me(null);else if(e.cacheData!=null){const _=Qt(H,e.cacheData,e.rowKey,V.value);_!=null&&Me(H,_)}}if($.value.size){const z=ze(),_=[],[te,ae]=ml(v.value),[Ce,Ue]=ml(e.cacheData,e.rowKey,V.value);$.value.forEach(Qe=>{const Jt=te.indexOf(Qe);if(Jt!==-1){const Kt=ae[Jt].rowData;u.checked.get(Qe)!==Kt&&u.checked.set(Qe,Kt)}else if(!u.reserveChecked)_.push(Qe);else if(e.cacheData!=null){const Kt=Ce.indexOf(Qe),jn=Kt!==-1?Ue[Kt]:void 0;Kt!==-1&&u.checked.get(Qe)!==jn&&u.checked.set(Qe,jn)}}),_.forEach(Qe=>{$.value.delete(Qe),u.checked.delete(Qe)}),ne(),_.length&&xt(Array.from($.value));const ut=ze();ft(z,ut)&&n.onSelectionChange(ut)}},ne=()=>{if(!v.value.length||!$.value.size){S.value=!1;return}const H=yt(v.value,z=>!z.isExpandRow&&!z.isDisabled&&z.rowId!=null&&!$.value.has(z.rowId));S.value=H==null},me=(H,z,_)=>{const te=$.value.has(z),ae=_==null?!te:_;ae!==te&&(ae?($.value.add(z),u.checked.set(z,H)):($.value.delete(z),u.checked.delete(z)),ne(),xt(Array.from($.value)))},fe=H=>{if(!(!H||!ft(ze(),H))){if(u.reserveChecked){const z=ze();$.value.clear(),u.checked.clear(),H.forEach(te=>{const ae=Ke(te,e.rowKey);ae!=null&&($.value.add(ae),u.checked.set(ae,te))}),ne(),xt(Array.from($.value));const _=ze();ft(z,_)&&n.onSelectionChange(_);return}Re(Dt(H,e.rowKey))}},Re=H=>{if(!H||!ft(Array.from($.value),H))return;const z=ze();if(u.reserveChecked){const[te,ae]=ml(v.value),[Ce,Ue]=ml(e.cacheData,e.rowKey,V.value);$.value=new Set(H),u.checked.clear(),H.forEach(ut=>{const Qe=te.indexOf(ut);if(Qe!==-1)u.checked.set(ut,ae[Qe].rowData);else if(e.cacheData!=null){const Jt=Ce.indexOf(ut);Jt!==-1&&u.checked.set(ut,Ue[Jt])}})}else $.value.clear(),u.checked.clear(),H.length&&De(v.value,te=>{!te.isExpandRow&&te.rowId!=null&&H.includes(te.rowId)&&($.value.add(te.rowId),u.checked.set(te.rowId,te.rowData))});ne(),xt(Array.from($.value));const _=ze();ft(z,_)&&n.onSelectionChange(_)},Le=H=>{if(!H){R.value.length&&(R.value=[],n.onExpandChange(void 0,[]));return}const z=[],_=[];De(v.value,te=>{te.children&&te.children.length&&te.rowId!=null&&(z.push(te.rowId),_.push(te.rowData))}),R.value=z,n.onExpandChange(void 0,_)},qe=()=>{if($.value.size){const H=!!u.checked.size;$.value.clear(),u.checked.clear(),S.value=!1,xt([]),H&&n.onSelectionChange([])}},ze=()=>Array.from(u.checked.values()),st=(H,z)=>{const _=Ke(H,e.rowKey);if(_==null||!u.reserveChecked&&!Qt(_,v.value))return;const te=ze();me(H,_,z);const ae=ze();ft(te,ae)&&n.onSelectionChange(ae)},Ge=()=>{if(!v.value.length)return;if(S.value||ie.value&&!e.selectOnIndeterminate){if($.value.size)if(u.reserveChecked){De(v.value,_=>{!_.isExpandRow&&_.rowId!=null&&($.value.delete(_.rowId),u.checked.delete(_.rowId))}),S.value=!1,xt(Array.from($.value));const z=ze();n.onSelectionChange(z),n.onSelectAll(z)}else qe(),n.onSelectAll([]);return}De(v.value,z=>{!z.isExpandRow&&!z.isDisabled&&z.rowId!=null&&($.value.add(z.rowId),u.checked.set(z.rowId,z.rowData))}),S.value=!0,xt(Array.from($.value));const H=ze();n.onSelectionChange(H),n.onSelectAll(H)},vt=(H,z)=>{const _=H.rowId,te=R.value.includes(_),ae=z==null?!te:z;if(ae!==te){if(ae)R.value.push(_);else{const Ce=R.value.findIndex(Ue=>Ue===_);R.value.splice(Ce,1)}n.onExpandChange(H.rowData,ae)}},Ot=H=>{Me(Ke(H,e.rowKey),H)},Xt=H=>{Me(H)},it=()=>u.row,St=()=>{k.value!=null&&(k.value=void 0)},rr=H=>{(H==null?Object.keys(A):H).forEach(_=>{const te=A[_];(te==null||te.length)&&(A[_]=[])})},Al=H=>{const{width:z,sumWidth:_,rowSizes:te,colSizes:ae}=dd(g.value,m.value,o.value);if(!z)return;const Ce=w.value&&w.value!==_,Ue=cd(p.value,ae);b.value=z,w.value=_,d.value=te,(H||Ue)&&(p.value=ae,C.value=fd(g.value,p.value)),Ce&&h.value++},sr=(H,z)=>{const _=bd(e.columns,void 0,H);k.value={key:Tt(_),order:gd(z)},n.onSortChange({prop:H,order:z,column:_})},Kn=(H,z)=>{if(!f.value)return;const _=typeof H=="number",te=_?H:H.left,ae=_?z:H.top;f.value.scrollTo({scrollTop:ae,scrollLeft:te})},ir=H=>{f.value&&f.value.scrollToTop(H)},Wn=H=>{f.value&&f.value.scrollToLeft(H)},ur=(H,z)=>{f.value&&f.value.scrollToRow(H,z)},Vn=H=>{Hl(e.currentRowKey,H)&&n["onUpdate:currentRowKey"](H)},xt=H=>{const z=e.selectedRowKeys||[];ft(z,H)&&n["onUpdate:selectedRowKeys"](H)};return Ko(()=>{const H=u.scrollTop,z=O.value;(H||z)&&Kn(z?z-1:0,H?H-1:0)}),Wo(()=>{je()}),ye([()=>e.height,()=>e.maxHeight,oe,x,K,r],()=>{const H=x.value+(K.value?2:1),z=id(e.height,e.maxHeight,H*oe.value,r.value);z!==y.value&&(y.value=z)},{immediate:!0}),ye(()=>e.columns,H=>{u.reserveChecked=mn(H);const{cols:z,rows:_}=Ka(H);g.value=z,m.value=_,Al(!0)},{deep:!0,immediate:!0}),ye(o,()=>{Al()}),ye([()=>e.data,L,V],()=>{Ie()},{immediate:!0}),ye(()=>e.rowKey,()=>{Ot(),qe(),Le(!1),Ie()}),ye([v,()=>e.cacheData],()=>{X()}),ye(()=>e.currentRowKey,H=>{Me(H)}),ye(()=>e.selectedRowKeys,H=>{Re(H||[])},{deep:!0}),ye(()=>e.expandRowKeys,H=>{H!=null&&(R.value=[...H])},{deep:!0}),ye(()=>e.showHeader,H=>{H&&lt(()=>{const z=O.value;z&&Wn(z-1)})}),{ownSlots:cc,rootRef:c,tableRef:f,tableKey:h,wrapWidth:o,headerRows:m,bodyCols:g,headerRowSizes:d,bodyColSizes:p,colsSumWidth:w,tableWidth:b,tableData:v,isCheckAll:S,isIndeterminate:ie,checkedRowKeys:$,expandedRowKeys:R,sortBy:k,filtered:A,tableTooltipProps:N,tableExpandCol:he,hasExpandCol:L,tableExpandColumnKey:U,tableRowHeight:oe,autoRowHeight:ue,hasFooter:K,tableProps:Q,isPingLeft:xe,isPingRight:ge,tableSumText:Se,tableEmptyText:Ae,isLayoutFixedHead:a,isLayoutMaximized:s,handleTableFilterChange:We,handleCellCheckedChange:Ve,handleCellExpandChange:He,handleCellClick:Ze,handleCellDblclick:Z,handleCellContextmenu:J,handleCellMouseenter:re,handleCellMouseleave:ve,handleHeaderCellClick:pe,handleHeaderCellContextmenu:I,handleHeaderCellMouseenter:j,handleFooterCellMouseenter:ee,handleExpandCellMouseenter:be,handleTableMouseleave:Fe,handleTableScroll:_e,updateWrapSize:i,updateTableData:Ie,updateSelectedAndChecked:X,setSelectedRows:fe,setSelectedRowKeys:Re,toggleRowExpansionAll:Le,clearSelection:qe,getSelectionRows:ze,toggleRowSelection:st,toggleAllSelection:Ge,toggleRowExpansion:vt,setCurrentRow:Ot,setCurrentRowKey:Xt,getCurrentRow:it,clearSort:St,clearFilter:rr,doLayout:Al,sort:sr,scrollTo:Kn,setScrollTop:ir,setScrollLeft:Wn,scrollToRow:ur,hideTooltip:je}}}),hc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},mc={key:0,class:"ele-table-empty-text"};function gc(e,t,l,n,o,r){const i=W("HeaderRow"),a=W("ExpandRow"),s=W("BodyRow"),u=W("FooterRow"),c=W("ElEmpty"),f=W("ElTableV2"),h=W("EleTooltip");return P(),Y("div",{ref:"rootRef",class:ke(["ele-virtual-table",{"is-border":e.border||e.headerRows.length>1},{"is-stripe":e.stripe},{"is-sticky":e.sticky},{"is-layout-fixed-head":e.sticky&&e.isLayoutFixedHead},{"is-layout-maximized":e.sticky&&e.isLayoutMaximized},{"has-footer":e.hasFooter},{"hide-header":!e.showHeader},{"hide-bottom-line":!e.bottomLine},{"is-ping-left":e.isPingLeft},{"is-ping-right":e.isPingRight},{"is-auto-width":e.wrapWidth===e.tableWidth},{"is-small":e.size==="small"},{"is-large":e.size==="large"}]),onMouseleave:t[1]||(t[1]=(...m)=>e.handleTableMouseleave&&e.handleTableMouseleave(...m))},[e.tableProps.width?(P(),se(f,Te({key:0},e.tableProps,{key:e.tableKey,ref:"tableRef",onScroll:e.handleTableScroll}),dt({header:G(m=>[m&&e.headerRows[m.headerIndex]?(P(),se(i,{key:0,headerCols:e.headerRows[m.headerIndex],headerColSizes:e.headerRowSizes[m.headerIndex],headerIndex:m.headerIndex,sortBy:e.sortBy,filtered:e.filtered,isCheckAll:e.isCheckAll,isIndeterminate:e.isIndeterminate,disabledCheckbox:!e.tableData.length,tableSize:e.size,headerCellClass:e.headerCellClassName,headerCellStyle:e.headerCellStyle,headerEllipsis:!0,rowHeight:e.tableRowHeight,onCheckedChange:t[0]||(t[0]=g=>e.toggleAllSelection()),onFilterChange:e.handleTableFilterChange,onCellClick:e.handleHeaderCellClick,onCellContextmenu:e.handleHeaderCellContextmenu,onCellMouseenter:e.handleHeaderCellMouseenter},dt({_:2},[Pe(Object.keys(e.$slots).filter(g=>!e.ownSlots.includes(g)),g=>({name:g,fn:G(d=>[Oe(e.$slots,g,et(ht(d||{})))])}))]),1032,["headerCols","headerColSizes","headerIndex","sortBy","filtered","isCheckAll","isIndeterminate","disabledCheckbox","tableSize","headerCellClass","headerCellStyle","rowHeight","onFilterChange","onCellClick","onCellContextmenu","onCellMouseenter"])):de("",!0)]),row:G(m=>{var g;return[m&&m.rowData&&m.rowData.isExpandRow?(P(),se(a,{key:0,column:(g=e.tableExpandCol)==null?void 0:g.originalCol,rowIndex:m.rowData.rowIndex,rowData:m.rowData.rowData,onMouseenter:e.handleExpandCellMouseenter},dt({_:2},[Pe(Object.keys(e.$slots).filter(d=>!e.ownSlots.includes(d)),d=>({name:d,fn:G(p=>[Oe(e.$slots,d,et(ht(p||{})))])}))]),1032,["column","rowIndex","rowData","onMouseenter"])):m&&m.rowData&&m.rowData.rowData?(P(),se(s,{key:1,bodyCols:e.bodyCols,colSizes:e.bodyColSizes,rowIndex:m.rowData.rowIndex,rowItem:m.rowData,rowId:m.rowData.rowId,checkedRowKeys:e.checkedRowKeys,bodyCellClass:e.cellClassName,bodyCellStyle:e.cellStyle,spanMethod:e.spanMethod,tableTooltipProps:e.showOverflowTooltip,pageIndex:e.pageIndex,rowHeight:e.tableRowHeight,tableSize:e.size,expandColumnKey:e.tableExpandColumnKey,expandedRowKeys:e.expandedRowKeys,lazy:e.lazy,load:e.load,level:m.depth,indent:e.indent,fixedCellHeight:e.hasExpandCol,autoRowHeight:e.autoRowHeight,onCellCheckedChange:e.handleCellCheckedChange,onCellExpandChange:e.handleCellExpandChange,onCellClick:e.handleCellClick,onCellDblclick:e.handleCellDblclick,onCellContextmenu:e.handleCellContextmenu,onCellMouseenter:e.handleCellMouseenter,onCellMouseleave:e.handleCellMouseleave},dt({_:2},[Pe(Object.keys(e.$slots).filter(d=>!e.ownSlots.includes(d)),d=>({name:d,fn:G(p=>[Oe(e.$slots,d,et(ht(p||{})))])}))]),1032,["bodyCols","colSizes","rowIndex","rowItem","rowId","checkedRowKeys","bodyCellClass","bodyCellStyle","spanMethod","tableTooltipProps","pageIndex","rowHeight","tableSize","expandColumnKey","expandedRowKeys","lazy","load","level","indent","fixedCellHeight","autoRowHeight","onCellCheckedChange","onCellExpandChange","onCellClick","onCellDblclick","onCellContextmenu","onCellMouseenter","onCellMouseleave"])):de("",!0)]}),empty:G(()=>[Oe(e.$slots,"empty",{text:e.emptyText,error:e.errorText},()=>[e.emptyProps===!1?(P(),Y("div",mc,Be(e.tableEmptyText),1)):(P(),se(c,Te({key:1,imageSize:68},!e.emptyProps||e.emptyProps===!0?{}:e.emptyProps,{description:e.tableEmptyText,class:"ele-table-empty"}),null,16,["description"]))])]),_:2},[e.hasFooter?{name:"footer",fn:G(()=>[D(u,{bodyCols:e.bodyCols,colSizes:e.bodyColSizes,sumWidth:e.colsSumWidth,tableData:e.tableData,rowHeight:e.tableRowHeight,sumText:e.tableSumText,summaryMethod:e.summaryMethod,onMouseenter:e.handleFooterCellMouseenter},null,8,["bodyCols","colSizes","sumWidth","tableData","rowHeight","sumText","summaryMethod","onMouseenter"])]),key:"0"}:void 0]),1040,["onScroll"])):de("",!0),D(h,et(ht(e.tableTooltipProps)),null,16)],34)}const vc=hc(fc,[["render",gc]]);function Il(e,t){return e==null?t!=null?t:!0:e?!t||typeof t!="object"?e:typeof e!="object"?t:{...t,...e}:!1}function An(e,t,l,n){const o=Il(t,l);if(o==null||o===!1)return null;const r={size:e!=="large"?"small":"default",pagerCount:5,layout:"total, prev, pager, next, sizes, jumper",pageSizes:[10,20,30,40,50,100],hideOnSinglePage:!1};return typeof o!="object"?Object.assign(r,n):Object.assign(r,_t(o,["autoAmend"]),n)}function pc(e,t){var n;const l=An(void 0,e,t);return(n=l==null?void 0:l.currentPage)!=null?n:1}function yc(e,t){var n;const l=An(void 0,e,t);return(n=l==null?void 0:l.pageSize)!=null?n:10}function Cc(e,t){const l=Il(e,t);return l?typeof l=="object"?!!l.autoAmend:l===!0:!1}function Vl(e,t,l){var n,o,r;return(r=(o=(n=xc(e))!=null?n:t)!=null?o:l)!=null?r:"default"}function bc(e){const t={};return De(e,l=>{var o;const n=(o=l.columnKey)!=null?o:l.prop;typeof n=="string"&&n&&l.filteredValue&&(t[n]=l.filteredValue)}),t}function qa(e,t){return Object.assign({pageName:"page",limitName:"limit",sortName:"sort",orderName:"order",ascValue:"asc",descValue:"desc"},e,t)}function Ga(e,t){return Object.assign({dataName:"list",countName:"count"},e,t)}function Ya(e){var t,l;const n=[];if(!e||!e.order)return n;const o=e.order==="descending",r=(t=e.column)==null?void 0:t.sortMethod,i=(l=e.column)==null?void 0:l.sortBy;if(Array.isArray(i)&&i.length)i.forEach(a=>{typeof a=="string"&&a.length&&n.push({field:a,descend:o,sortMethod:r})});else{const a=typeof i=="string"&&i?i:e.prop;a&&n.push({field:a,descend:o,sortMethod:r})}return n}function xo(e,t,l){const n={},{sortName:o,orderName:r,ascValue:i,descValue:a}=qa(l,t);if(!o||!r)return n;const s=Ya(e);return s.length===1?(n[o]=s[0].field,n[r]=s[0].descend?a:i):s.length&&(n[o]=s.map(u=>[u.field,u.descend?a:i].join(" ")).join(",")),n}function ko(e){const t={};return e&&Object.keys(e).forEach(l=>{const n=e[l];n!=null&&(typeof n=="string"?n&&(t[l]=n):Array.isArray(n)?n.length&&(t[l]=n.join(",")):t[l]=n)}),t}function To(e,t,l,n){const o={},{pageName:r,limitName:i}=qa(n,l);return!r||!i||(o[r]=e,o[i]=t),o}function wc(e,t,l,n,o){var a;if(!e||Array.isArray(e))return{data:Eo(e,n,o)};const{dataName:r,countName:i}=Ga(l,t);return r?{data:Eo(Ke(e,r),n,o),total:(a=i?Ke(e,i):void 0)!=null?a:0}:{}}function Eo(e,t,l){var o;if(!e||!t)return e||[];const n=(o=l==null?void 0:l.hasChildren)!=null?o:"hasChildren";return e.map(r=>{var a;const i={...r};return i[n]=(a=i[n])!=null?a:!0,i})}function Xa(e,t){if(!e||!e.length)return[];const l=[...e];return Ya(t).forEach(n=>{l.sort((o,r)=>{if(typeof n.sortMethod=="function"){const u=n.sortMethod(o,r);return n.descend?-u:u}const i=o[n.field],a=r[n.field];if(i==a)return 0;const s=i<a?-1:1;return n.descend?-s:s})}),l}function Sc(e,t,l,n){const o=Xa(e,t),r=o.length;if(!l||!n)return{page:1,data:o,total:r};const i=Math.ceil(r/n);i&&l>i&&(l=i);const a=(l-1)*n,s=a+n,u=o.slice(a,s>r?r:s);return{page:l,data:u,total:r}}function Vt(e){return e.columnKey==null||e.columnKey===""?e.prop:e.columnKey}function Ja(e,t){const l=[];return e.forEach(n=>{var r;var o;if(!n.hideInTable){const i=(r=Ln(t,n))!=null?r:n.width;if((o=n.children)!=null&&o.length){const a=Ja(n.children);a.length&&l.push({...n,width:i,children:a})}else l.push({...n,width:i})}}),l}function Rc(e,t,l){const n=er(Rl(t));return n?Et(e,n,l,o=>o.hideInSetting,void 0,!1,qt(t)):Ja(e,qt(t))}function Et(e,t,l,n,o,r,i){const a=[];return!e||!e.length||(e.forEach(s=>{var d,p;const u=Vt(s);if(o&&!o(s))return;const c=u==null?null:yt(t,w=>w.uid===u),f=c?!c.checked:s.hideInTable;if(!r&&f)return;const h=(d=Ln(i,s))!=null?d:s.width,m=(p=c==null?void 0:c.fixed)!=null?p:s.fixed,g=ns(8);if(s.children&&s.children.length){const w=Et(s.children,t,l,n,o,r,i);w.length&&a.push({...s,width:h,fixed:m,hideInTable:f,children:w,uid:g});return}a.push({...s,width:h,fixed:m,hideInTable:f,uid:g})}),!l||!a.length)||a.sort((s,u)=>{const c=Vt(s),f=Vt(u);let h=0,m,g;return De(t,d=>{d.uid===c&&(m=h),d.uid===f&&(g=h),h++}),m==null&&(n!=null&&n(s))&&s.fixed==="right"&&(m=h),m==null&&(m=-1),s.fixed===!0||s.fixed==="left"?m-=h:(s.fixed==="right"||n!=null&&n(s)&&!s.fixed)&&(m+=h),g==null&&(n!=null&&n(u))&&u.fixed==="right"&&(g=h),g==null&&(g=-1),u.fixed===!0||u.fixed==="left"?g-=h:(u.fixed==="right"||n!=null&&n(u)&&!u.fixed)&&(g+=h),m-g}),a}function Pn(e,t,l,n,o,r,i){const a=e==null?[]:[...e];o&&a.sort((f,h)=>Ol(f.fixed)-Ol(h.fixed));const s=Sn(a,(f,h,m)=>{var w,b,y;const g=Vt(f);if(g==null||l&&!l(f))return;const d=yt(n,v=>v.uid===g);return{uid:g,type:f.type,label:f.label||(f.type==="index"?t.columnIndex:f.type==="expand"?t.columnExpand:t.columnUntitled),checked:(w=d==null?void 0:d.checked)!=null?w:!f.hideInTable,fixed:r||m!=null?!1:(b=d==null?void 0:d.fixed)!=null?b:f.fixed,width:(y=Ln(i,f))!=null?y:f.width}});n&&n.length&&(s.sort((f,h)=>{const m=n.findIndex(w=>w.uid===f.uid),g=n.findIndex(w=>w.uid===h.uid),d=m===-1?s.indexOf(f):m,p=g===-1?s.indexOf(h):g;return d-p}),De(s,f=>{var h;if(f.children&&f.children.length){const m=(h=yt(n,g=>g.uid===f.uid))==null?void 0:h.children;m&&m.length&&f.children.sort((g,d)=>{const p=m.findIndex(v=>v.uid===g.uid),w=m.findIndex(v=>v.uid===d.uid),b=p===-1?s.indexOf(g):p,y=w===-1?s.indexOf(d):w;return b-y})}}));let u=!0,c=!1;return De(s,f=>{if(!f.checked&&u&&(u=!1),f.checked&&!c&&(c=!0),!u&&c)return!1}),{cols:s,checkAll:s.length>0&&u,indeterminate:!u&&c}}function Za(e){return`${e}Size`}function Rl(e){return e?`${e}Cols`:void 0}function Qa(e){return`${e}ColsWidth`}function er(e){if(e){const t=localStorage.getItem(e);if(t)try{const l=JSON.parse(t);return l&&Array.isArray(l)?l:void 0}catch(l){console.error(l)}}}function xc(e){if(e){const t=localStorage.getItem(Za(e));if(t)return t}}function qt(e){if(e){const t=localStorage.getItem(Qa(e));if(t)try{const l=JSON.parse(t);return l&&Array.isArray(l)?l:void 0}catch(l){console.error(l)}}}function Ln(e,t){if(e==null||t==null)return;const l=Vt(t),n=yt(e,r=>r.uid===l);if(!n||n.width==null)return;if(n.width===""||typeof n.width=="string"&&!n.width.trim())return"";const o=Number(n.width);return isNaN(o)?n.width:o}function kc(e,t,l){if(l&&t){const n=Vt(t);if(n){const o=qt(l)||[],r=o.find(i=>i.uid===n);r?r.width=e:o.push({uid:n,width:e}),localStorage.setItem(Qa(l),JSON.stringify(o))}}}function Oo(e){return e!=null?e:t=>JSON.stringify(t)}function Tc(e,t,l,n){if(!e)return"";if(e.type==="index")return Va(l,e.index,n);const o=e.prop==null?void 0:Ke(t,e.prop);return typeof e.formatter=="function"?e.formatter(t,e,o,l):o==null?"":String(o)}function Ec(e,t){return e?typeof e.renderHeader=="function"?e.renderHeader({column:e,$index:t}):e.label==null?"":String(e.label):""}function tr(e,t="children",l=0,n=[]){const o=[];let r=0;return e.forEach((i,a)=>{const s={row:i,index:a,level:l,childSize:0};o.push(s),n.forEach(c=>{c.childSize++});const u=i[t];if(u&&u.length){const{depth:c,nodes:f}=tr(u,t,l+1,[...n,s]);r=Math.max(r,c),f.forEach(h=>{o.push(h)})}}),{depth:r+1,nodes:o}}function lr(e,t,l,n,o,r,i,a,s,u){const{nodes:c,depth:f}=tr(e,a),{rows:h,cols:m}=Ka(t),g=m.some(y=>{var v;return((v=y.originalCol)==null?void 0:v.type)==="expand"})?s:!1;(f<=1||g)&&(s=!1);const d=s?void 0:m.findIndex(y=>{var v;return!((v=y.originalCol)!=null&&v.type)||!["index","expand","selection"].includes(y.originalCol.type)}),p=[];c.forEach((y,v)=>{const C=y.row,O=[],M=[];if(m.forEach(($,S)=>{const{key:R,originalCol:k}=$,A=`${v}-${S}-${R}`,{colspan:N,rowspan:B}=Ba({column:k,columnIndex:S,row:C,rowIndex:v},l),q=N==0||B==0?"":Tc(k,C,v,n),le={key:A,row:C,index:v,column:k,text:q,colspan:N,rowspan:B,isTreeCell:f>1?S===d:!1,isTreeLeaf:!y.childSize,indent:y.level};if(k.type==="expand"){le.text=g?String(y.index+1):"",g&&!M.length&&(le.rowspan=2);const he={key:"_expand_"+A,row:C,index:v,column:k,text:q,colspan:g?m.length-1:m.length,isExpandCell:!0};g?(M[0]={key:"_expand_0-"+A,row:C,index:v,rowspan:0,colspan:0,isExpandCell:!0},M[1]=he):M[0]=he}O.push(le)}),p.push(O),M.length&&p.push(M),s)for(let $=f-1;$>=0;$--){const S=$<y.level?0:1;O.unshift({key:`_index_${v}-${$}`,index:v,text:$===y.level?String(y.index+1):void 0,colspan:S,rowspan:$===y.level?y.childSize+1:S,isTreeIndex:!0,hideLeftBorder:$!==y.level,hideRightBorder:!!m.length})}});const w=[];u&&h.forEach((y,v)=>{const C=[];if(y.forEach(O=>{const{key:M,colspan:$,rowspan:S,originalCol:R}=O,A=$==0||S==0?"":Ec(R,v);C.push({key:M,index:v,column:R,text:A,colspan:$,rowspan:S})}),w.push(C),s)for(let O=f-1;O>=0;O--)C.unshift({key:`_index_th_${v}-${O}`,index:v,colspan:O===0&&v===0?f:0,rowspan:O===0&&v===0?h.length:0,isTreeIndex:!0})});const b=[];if(o&&e.length){const y=[],v=ja(i,m,e);if(m.forEach((C,O)=>{const{key:M,dataKey:$,originalCol:S}=C,R=v==null?_a(e,$,O,r):v[O];y.push({key:M,column:S,text:R,index:0})}),b.push(y),s)for(let C=f-1;C>=0;C--)y.unshift({key:`_index_tf-${C}`,index:0,colspan:C===0?f:0,rowspan:C===0?h.length:0,isTreeIndex:!0})}if(s)for(let y=f-1;y>=0;y--)m.unshift({key:`_index_${y}`,width:26});return{headerData:w,bodyData:p,footerData:b,bodyCols:m}}function Oc(e,t,l,n){const o=[];[...t,...l,...n].forEach(a=>{const s=a.map(u=>{var m;const c=(m=u.text)!=null?m:"",f=typeof c=="string"?c.replace(/,/g,"，").replace(/\n/g,"    "):c;return!u.isTreeCell||!u.indent?f:Array.from({length:u.indent}).fill("  ").join("")+f});o.push(s.join(","))});const r=encodeURIComponent(o.join(`
`)),i=document.createElement("a");i.href="data:text/csv;charset=utf-8,"+r,i.download=e+".csv",i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}function Bl(e){return e.hideInExport?!1:!e.type||!["selection"].includes(e.type)}function jl(e){return e.hideInPrint?!1:!e.type||!["selection"].includes(e.type)}function Hc(e){return e.hideInSetting?!1:!e.type||!["selection","index","expand"].includes(e.type)}const Fc={title:String,placement:{type:String,default:"top"},disabled:Boolean,clickHideTooltip:Boolean},Ic={click:e=>!0},Mc=Ne({name:"EleTool",props:Fc,emits:Ic,setup(e,{emit:t}){const l=gt(Fs,{}),[n,o]=os(200),r=(u,c,f)=>{l.showTooltip&&l.showTooltip(u,c,f)},i=()=>{l.hideTooltip&&l.hideTooltip()},a=u=>{e.clickHideTooltip&&n(()=>{i()}),t("click",u)},s=u=>{e.title&&!e.disabled&&(o(),r(e.title,u.currentTarget,{placement:e.placement,offset:10}))};return ye([()=>e.disabled,()=>e.title],()=>{(!e.title||e.disabled)&&i()}),{handleClick:a,handleMouseover:s,showTooltip:r,hideTooltip:i}}}),$c=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Nc={class:"ele-tool-body"};function Dc(e,t,l,n,o,r){return P(),Y("div",{class:"ele-tool",onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i)),onMouseover:t[1]||(t[1]=(...i)=>e.handleMouseover&&e.handleMouseover(...i))},[we("div",Nc,[Oe(e.$slots,"default")])],32)}const nr=$c(Mc,[["render",Dc]]),Ac=Ne({name:"ToolColumnList",components:{VueDraggable:Ms,ElCheckbox:mt,ElIcon:bt,ElInput:Bo,HolderOutlined:as,VerticalRightOutlined:rs,VerticalLeftOutlined:ss},props:{data:Array,parent:Object,sortable:Boolean,allowFixed:Boolean,allowWidth:Boolean,columnWidthPlaceholder:String},emits:{sortChange:(e,t)=>!0,checkedChange:(e,t)=>!0,fixedLeft:e=>!0,fixedRight:e=>!0,fixedLeftTooltip:e=>!0,fixedRightTooltip:e=>!0,colWidthChange:(e,t)=>!0},setup(e,{emit:t}){const l=h=>{s(h,e.parent)},n=(h,m)=>{t("checkedChange",h,m)},o=h=>{t("fixedLeft",h)},r=h=>{t("fixedRight",h)},i=h=>{u(h.currentTarget)},a=h=>{c(h.currentTarget)},s=(h,m)=>{t("sortChange",h,m)},u=h=>{t("fixedLeftTooltip",h)},c=h=>{t("fixedRightTooltip",h)};return{handleSortChange:l,handleCheckedChange:n,handleFixedLeft:o,handleFixedRight:r,handleFixedLeftTooltip:i,handleFixedRightTooltip:a,handleChildSortChange:s,handleChildFixedLeftTooltip:u,handleChildFixedRightTooltip:c,handleColWidthChange:(h,m)=>{t("colWidthChange",h,m)}}}}),Pc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Lc={class:"ele-tool-column-item"},zc={class:"ele-tool-column-item-body"},Kc={key:0,class:"ele-tool-column-handle"},Wc={class:"ele-tool-column-label"},Vc={key:1,class:"ele-tool-column-fixed"},Bc=["onClick"],jc=["onClick"],_c={key:2,class:"ele-tool-column-input"};function Uc(e,t,l,n,o,r){const i=W("HolderOutlined"),a=W("ElIcon"),s=W("ElCheckbox"),u=W("VerticalRightOutlined"),c=W("VerticalLeftOutlined"),f=W("ElInput"),h=W("ToolColumnList",!0),m=W("VueDraggable");return P(),se(m,{itemKey:"uid",animation:300,modelValue:e.data,setData:()=>{},handle:".ele-tool-column-handle",componentData:{class:"ele-tool-column-list"},forceFallback:!0,"onUpdate:modelValue":e.handleSortChange},{item:G(({element:g})=>[we("div",Lc,[we("div",zc,[e.sortable?(P(),Y("div",Kc,[D(a,null,{default:G(()=>[D(i)]),_:1})])):de("",!0),we("div",Wc,[D(s,{label:g.label,modelValue:g.checked,"onUpdate:modelValue":d=>e.handleCheckedChange(g,d)},null,8,["label","modelValue","onUpdate:modelValue"])]),e.allowFixed?(P(),Y("div",Vc,[we("div",{class:ke(["ele-tool-column-fixed-item",{"is-active":g.fixed===!0||g.fixed==="left"}]),onClick:d=>e.handleFixedLeft(g),onMouseover:t[0]||(t[0]=(...d)=>e.handleFixedLeftTooltip&&e.handleFixedLeftTooltip(...d))},[D(a,null,{default:G(()=>[D(u)]),_:1})],42,Bc),we("div",{class:ke(["ele-tool-column-fixed-item",{"is-active":g.fixed==="right"}]),onClick:d=>e.handleFixedRight(g),onMouseover:t[1]||(t[1]=(...d)=>e.handleFixedRightTooltip&&e.handleFixedRightTooltip(...d))},[D(a,null,{default:G(()=>[D(c)]),_:1})],42,jc)])):de("",!0),e.allowWidth?(P(),Y("div",_c,[D(f,{size:"small",maxlength:12,modelValue:g.width,placeholder:e.columnWidthPlaceholder,"onUpdate:modelValue":d=>e.handleColWidthChange(g,d)},null,8,["modelValue","placeholder","onUpdate:modelValue"])])):de("",!0)]),g.children&&g.children.length?(P(),se(h,{key:0,data:g.children,parent:g,sortable:e.sortable,allowWidth:e.allowWidth,columnWidthPlaceholder:e.columnWidthPlaceholder,onSortChange:e.handleChildSortChange,onCheckedChange:e.handleCheckedChange,onFixedLeft:e.handleFixedLeft,onFixedRight:e.handleFixedRight,onFixedLeftTooltip:e.handleChildFixedLeftTooltip,onFixedRightTooltip:e.handleChildFixedRightTooltip,onColWidthChange:e.handleColWidthChange},null,8,["data","parent","sortable","allowWidth","columnWidthPlaceholder","onSortChange","onCheckedChange","onFixedLeft","onFixedRight","onFixedLeftTooltip","onFixedRightTooltip","onColWidthChange"])):de("",!0)])]),_:1},8,["modelValue","onUpdate:modelValue"])}const zn=Pc(Ac,[["render",Uc]]),qc=Ne({name:"ToolColumn",components:{ElCheckbox:mt,ElIcon:bt,SettingOutlined:is,EleTooltip:xn,EleTool:nr,ToolColumnList:zn},props:{placement:String,locale:{type:Object,required:!0},columns:Array,sortable:Boolean,allowFixed:Boolean,cacheKey:String},emits:{"update:columns":(e,t,l)=>!0},setup(e,{emit:t}){const l=E(null),n=E([]),o=E(!1),r=E(!1),i=()=>{const{cols:b,checkAll:y,indeterminate:v}=Pn(e.columns,e.locale,Hc,er(Rl(e.cacheKey)));n.value=b,o.value=y,r.value=v},a=b=>{const y=qt(e.cacheKey),v=Et(e.columns,n.value,e.sortable,O=>O.hideInSetting,void 0,!1,y),C=Et(e.columns,n.value,e.sortable,O=>O.hideInSetting,void 0,!0,y);t("update:columns",v,C,!!b)},s=()=>{e.cacheKey&&localStorage.setItem(Rl(e.cacheKey),JSON.stringify(n.value))},u=()=>{e.cacheKey&&localStorage.removeItem(Rl(e.cacheKey))},c=(b,y)=>{let v=!0,C=!1;De(n.value,O=>{if(O.uid===b.uid&&(O.checked=y),!O.checked&&v&&(v=!1),O.checked&&!C&&(C=!0),O.uid===b.uid&&!v&&C)return!1}),o.value=n.value.length>0&&v,r.value=!v&&C,s(),a()},f=b=>{o.value=b,r.value=!1,De(n.value,y=>{y.checked!==b&&(y.checked=b)}),s(),a()},h=(b,y)=>{y?De(n.value,v=>{if(v.uid===y.uid)return v.children=b,!1}):n.value=b,s(),a()},m=b=>{De(n.value,y=>{if(y.uid===b.uid)return y.fixed=y.fixed===!0||y.fixed==="left"?!1:"left",!1}),s(),a()},g=b=>{De(n.value,y=>{if(y.uid===b.uid)return y.fixed=y.fixed==="right"?!1:"right",!1}),s(),a()},d=b=>{var y;l.value&&l.value.showTooltip((y=e.locale.columnFixedLeft)!=null?y:"",b)},p=b=>{var y;l.value&&l.value.showTooltip((y=e.locale.columnFixedRight)!=null?y:"",b)},w=()=>{u(),i(),a(!0)};return ye([()=>e.columns,()=>e.locale],()=>{i()},{immediate:!0,deep:!0}),{toolRef:l,colItems:n,isCheckAll:o,isIndeterminate:r,handleCheckedChange:c,handleCheckAllChange:f,handleReset:w,handleSortChange:h,handleFixedLeft:m,handleFixedRight:g,handleFixedLeftTooltip:d,handleFixedRightTooltip:p}}}),Gc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},Yc={class:"ele-tool-column-header"},Xc={class:"ele-tool-column-label"};function Jc(e,t,l,n,o,r){const i=W("SettingOutlined"),a=W("ElIcon"),s=W("ElCheckbox"),u=W("ToolColumnList"),c=W("EleTooltip"),f=W("EleTool");return P(),se(f,{ref:"toolRef",title:e.locale.columns,placement:e.placement,clickHideTooltip:!0},{default:G(()=>[D(c,{trigger:"click",placement:"bottom-end",popperClass:"ele-tool-column-popover",transition:"el-zoom-in-top",gpuAcceleration:!1,effect:"light",isPopover:!0,popperOptions:{strategy:"fixed",modifiers:[{name:"offset",options:{offset:[20,10]}}]}},{body:G(()=>[we("div",{class:ke(["ele-popover-body","ele-tool-column",{"is-sortable":e.sortable}])},[we("div",Yc,[we("div",Xc,[D(s,{label:e.locale.columnTitle,modelValue:e.isCheckAll,indeterminate:e.isIndeterminate,"onUpdate:modelValue":e.handleCheckAllChange},null,8,["label","modelValue","indeterminate","onUpdate:modelValue"])]),we("div",{class:"ele-tool-column-link",onClick:t[0]||(t[0]=(...h)=>e.handleReset&&e.handleReset(...h))},Be(e.locale.columnReset),1)]),e.colItems.length?(P(),se(u,{key:0,data:e.colItems,sortable:e.sortable,allowFixed:e.allowFixed,onSortChange:e.handleSortChange,onCheckedChange:e.handleCheckedChange,onFixedLeft:e.handleFixedLeft,onFixedRight:e.handleFixedRight,onFixedLeftTooltip:e.handleFixedLeftTooltip,onFixedRightTooltip:e.handleFixedRightTooltip},null,8,["data","sortable","allowFixed","onSortChange","onCheckedChange","onFixedLeft","onFixedRight","onFixedLeftTooltip","onFixedRightTooltip"])):de("",!0)],2)]),default:G(()=>[D(a,null,{default:G(()=>[D(i)]),_:1})]),_:1})]),_:1},8,["title","placement"])}const Zc=Gc(qc,[["render",Jc]]),Qc=Ne({name:"ToolExport",components:{ElForm:jo,ElFormItem:_o,ElInput:Bo,ElSelect:Uo,ElOption:qo,ElCheckbox:mt,ElButton:Rn,EleModal:Go,ToolColumnList:zn},props:{locale:{type:Object,required:!0},cacheKey:String,modalProps:Object,columns:Array,selections:Array,pageData:Array,datasource:[Array,Function],spanMethod:Function,tableHeader:Boolean,showSummary:Boolean,sumText:String,summaryMethod:Function,pageIndex:Number,treeProps:Object,fetch:Function,defaultFileName:{type:String,default:"list"},defaultDataType:{type:String,default:"pageData"},defaultShowFooter:{type:Boolean,default:!0},defaultShowTreeIndex:Boolean,beforeExport:Function},setup(e){const t=E(!1),l=E(!1),n=E(null),o=rl({fileName:e.defaultFileName}),r=rl({required:!0,message:e.locale.exportFileNamePlaceholder,type:"string",trigger:"blur"}),i=E(e.defaultDataType),a=E([]),s=E(!1),u=E(!1),c=E(!0),f=E(!1),h=E(!1),m=E(!0),g=()=>{l.value=!0},d=()=>{l.value=!1},p=()=>{t.value=!0},w=()=>{d(),t.value=!1},b=k=>{var Q,ie,xe,ge,Se;var A;g();const N=(Q=k==null?void 0:k.fileName)!=null?Q:o.fileName,B=(k==null?void 0:k.data)||[],V=(ie=k==null?void 0:k.showHeader)!=null?ie:c.value,q=(xe=k==null?void 0:k.showFooter)!=null?xe:f.value,le=(ge=k==null?void 0:k.showTreeIndex)!=null?ge:h.value,he=(Se=k==null?void 0:k.dataType)!=null?Se:i.value,L=(k==null?void 0:k.columns)||Et(e.columns,a.value,!0,void 0,Bl,!1,a.value),U=(k==null?void 0:k.columns)||Et(e.columns,a.value,!0,void 0,Bl,!0,a.value),{headerData:oe,bodyData:ue,footerData:x,bodyCols:K}=lr(B,L,e.spanMethod,e.pageIndex,q,e.sumText,e.summaryMethod,(A=e.treeProps)==null?void 0:A.children,le,V);typeof e.beforeExport=="function"&&e.beforeExport({data:B,columns:L,headerData:oe,bodyData:ue,footerData:x,bodyCols:K,fileName:N,dataType:he,hideLoading:d,closeModal:w,showHeader:V,showFooter:q,showTreeIndex:le,tableColumns:U})===!1||(Oc(N,oe,ue,x),d(),w())},y=()=>{var k,A;(A=(k=n.value)==null?void 0:k.validate)==null||A.call(k,N=>{if(N){if(i.value==="selections"){b({data:[...e.selections||[]]});return}if(i.value!=="data"){b({data:[...e.pageData||[]]});return}e.datasource==null||typeof e.datasource!="function"||typeof e.fetch!="function"||(g(),e.fetch(B=>{e.datasource(B).then(V=>{if(V==null){d(),w();return}b({data:V})}).catch(V=>{console.error(V),d()})}))}})},v=()=>{const k=qt(e.cacheKey),{cols:A,checkAll:N,indeterminate:B}=Pn(e.columns,e.locale,Bl,void 0,!0,!0,k);a.value=A,s.value=N,u.value=B},C=(k,A,N)=>{let B=!0,V=!1;De(a.value,q=>{const le=k==null?N===q.type:q.uid===k.uid;if(le&&(q.checked=A),!q.checked&&B&&(B=!1),q.checked&&!V&&(V=!0),le&&!B&&V)return!1}),s.value=a.value.length>0&&B,u.value=!B&&V},O=k=>{s.value=k,u.value=!1,De(a.value,A=>{A.checked!==k&&(A.checked=k)})},M=(k,A)=>{A?De(a.value,N=>{if(N.uid===A.uid)return N.children=k,!1}):a.value=k},$=(k,A)=>{De(a.value,N=>{if(N.uid===k.uid)return N.width=A,!1})},S=()=>{v()},R=k=>{k&&C(void 0,!1,"index")};return ye(t,k=>{var A,N;if(k){o.fileName=e.defaultFileName,i.value=e.defaultDataType,v(),c.value=!!e.tableHeader,f.value=e.showSummary?!!e.defaultShowFooter:!1,m.value=!(e.pageData&&e.pageData.some(B=>{var V,q,le;return((q=B[((V=e.treeProps)==null?void 0:V.children)||"children"])==null?void 0:q.length)||B[((le=e.treeProps)==null?void 0:le.hasChildren)||"hasChildren"]}))&&yt(a.value,B=>B.type==="expand")==null,h.value=m.value?!1:!!e.defaultShowTreeIndex;return}d(),(N=(A=n.value)==null?void 0:A.clearValidate)==null||N.call(A)}),ye(()=>e.locale.exportFileNamePlaceholder,k=>{r.message=k}),{visible:t,loading:l,formRef:n,form:o,fileNameRules:r,dataType:i,colItems:a,isCheckAll:s,isIndeterminate:u,showHeader:c,showFooter:f,showTreeIndex:h,treeIndexDisabled:m,openModal:p,closeModal:w,handleExport:y,handleCheckedChange:C,handleSortChange:M,handleColWidthChange:$,handleCheckAllChange:O,handleReset:S,handleTreeIndexChange:R,exportData:b}}}),ef=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},tf={class:"ele-tool-column is-sortable"},lf={class:"ele-tool-column-header"},nf={class:"ele-tool-column-label"},of={class:"ele-tool-form-options"};function af(e,t,l,n,o,r){const i=W("ElInput"),a=W("ElFormItem"),s=W("ElOption"),u=W("ElSelect"),c=W("ElCheckbox"),f=W("ToolColumnList"),h=W("ElForm"),m=W("ElButton"),g=W("EleModal");return P(),se(g,Te({form:!0,width:"460px",title:e.locale.export,position:"center"},e.modalProps||{},{modelValue:e.visible,"onUpdate:modelValue":t[7]||(t[7]=d=>e.visible=d)}),{footer:G(()=>[D(m,{onClick:e.closeModal},{default:G(()=>[pt(Be(e.locale.exportCancel),1)]),_:1},8,["onClick"]),D(m,{loading:e.loading,type:"primary",onClick:e.handleExport},{default:G(()=>[pt(Be(e.locale.exportOk),1)]),_:1},8,["loading","onClick"])]),default:G(()=>[D(h,{ref:"formRef",model:e.form,labelWidth:"80px",onSubmit:t[6]||(t[6]=Nl(()=>{},["prevent"])),class:"ele-tool-export-form"},{default:G(()=>[D(a,{label:e.locale.exportFileName,prop:"fileName",rules:e.fileNameRules},{default:G(()=>[D(i,{maxlength:200,clearable:!0,modelValue:e.form.fileName,"onUpdate:modelValue":t[0]||(t[0]=d=>e.form.fileName=d),placeholder:e.locale.exportFileNamePlaceholder},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),D(a,{label:e.locale.exportSelectData},{default:G(()=>[D(u,{modelValue:e.dataType,"onUpdate:modelValue":t[1]||(t[1]=d=>e.dataType=d),placeholder:e.locale.exportSelectData},{default:G(()=>[e.pageData!=null?(P(),se(s,{key:0,value:"pageData",label:e.locale.exportDataTypePage},null,8,["label"])):de("",!0),e.selections!=null?(P(),se(s,{key:1,value:"selections",label:e.locale.exportDataTypeSelected},null,8,["label"])):de("",!0),e.datasource!=null?(P(),se(s,{key:2,value:"data",label:e.locale.exportDataTypeAll},null,8,["label"])):de("",!0)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),D(a,{label:e.locale.exportSelectColumn},{default:G(()=>[we("div",tf,[we("div",lf,[we("div",nf,[D(c,{label:e.locale.columnTitle,modelValue:e.isCheckAll,indeterminate:e.isIndeterminate,"onUpdate:modelValue":e.handleCheckAllChange},null,8,["label","modelValue","indeterminate","onUpdate:modelValue"])]),we("div",{class:"ele-tool-column-link",onClick:t[2]||(t[2]=(...d)=>e.handleReset&&e.handleReset(...d))},Be(e.locale.columnReset),1)]),D(f,{data:e.colItems,sortable:!0,allowWidth:!0,columnWidthPlaceholder:e.locale.columnWidth,onSortChange:e.handleSortChange,onCheckedChange:e.handleCheckedChange,onColWidthChange:e.handleColWidthChange},null,8,["data","columnWidthPlaceholder","onSortChange","onCheckedChange","onColWidthChange"])])]),_:1},8,["label"]),D(a,{label:e.locale.exportOther},{default:G(()=>[we("div",of,[D(c,{label:e.locale.exportOtherHeader,modelValue:e.showHeader,"onUpdate:modelValue":t[3]||(t[3]=d=>e.showHeader=d)},null,8,["label","modelValue"]),D(c,{label:e.locale.exportOtherFooter,modelValue:e.showFooter,"onUpdate:modelValue":t[4]||(t[4]=d=>e.showFooter=d),disabled:!e.showSummary},null,8,["label","modelValue","disabled"]),D(c,{label:e.locale.exportOtherTreeIndex,modelValue:e.showTreeIndex,"onUpdate:modelValue":t[5]||(t[5]=d=>e.showTreeIndex=d),disabled:e.treeIndexDisabled,onChange:e.handleTreeIndexChange},null,8,["label","modelValue","disabled","onChange"])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},16,["title","modelValue"])}const rf=ef(Qc,[["render",af]]),sf=Ne({name:"ToolPrintBodyCell",components:{ElIcon:bt,ArrowDown:Vo,CellRender:Yt},props:{col:{type:Object,required:!0},columnIndex:Number,bodyCellStyle:[Object,Function],bodyCellClass:[String,Function]},setup(e,{slots:t}){const l=F(()=>{const{text:i,row:a,column:s,index:u}=e.col,c=[{row:a,column:s,$index:u}],f=s?s.printSlot||s.slot:void 0;return s&&s.type!=="expand"&&f&&typeof t[f]=="function"?{render:t[f],params:c}:{render:()=>i,params:c}}),n=F(()=>({column:e.col.column,columnIndex:e.columnIndex,rowIndex:e.col.index,row:e.col.row})),o=F(()=>typeof e.bodyCellStyle=="function"?n.value.column==null?void 0:e.bodyCellStyle(n.value):e.bodyCellStyle),r=F(()=>{const i=[],a=n.value.column;if(a){if(a.align&&i.push("is-align-"+a.align),typeof e.bodyCellClass=="function"){const s=e.bodyCellClass(n.value);s&&i.push(s)}else e.bodyCellClass&&i.push(e.bodyCellClass);a.className&&i.push(a.className)}return i.join(" ")});return{renderOpt:l,cellStyle:o,cellClass:r}}}),uf=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},df=["colspan","rowspan"];function cf(e,t,l,n,o,r){var i;const a=W("ArrowDown"),s=W("ElIcon"),u=W("CellRender");return P(),Y("td",{colspan:e.col.colspan,rowspan:e.col.rowspan,style:Xe(e.cellStyle),class:ke(e.cellClass)},[((i=e.col.column)==null?void 0:i.type)==="expand"?(P(),Y($e,{key:0},[e.col.text?(P(),Y($e,{key:0},[pt(Be(e.col.text),1)],64)):(P(),se(s,{key:1,style:{"vertical-align":"middle"},class:"ele-print-expand-icon"},{default:G(()=>[D(a)]),_:1}))],64)):(P(),Y($e,{key:1},[e.col.isTreeCell?(P(),Y($e,{key:0},[e.col.indent?(P(),Y("span",{key:0,style:Xe({paddingLeft:`${e.col.indent*16}px`}),class:"ele-print-tree-indent"},null,4)):de("",!0),D(s,{style:Xe({verticalAlign:"middle",marginRight:"2px",visibility:e.col.isTreeLeaf?"hidden":void 0}),class:"ele-print-tree-icon"},{default:G(()=>[D(a)]),_:1},8,["style"])],64)):de("",!0),D(u,et(ht(e.renderOpt)),null,16)],64))],14,df)}const ff=uf(sf,[["render",cf]]),hf=Ne({name:"ToolPrintHeaderCell",components:{CellRender:Yt},props:{col:{type:Object,required:!0},columnIndex:Number,headerCellStyle:[Object,Function],headerCellClass:[String,Function]},setup(e,{slots:t}){const l=F(()=>{const{text:i,column:a}=e.col,s=[{column:a,$index:e.columnIndex}],u=a?a.printHeaderSlot||a.headerSlot:void 0;return a&&u&&typeof t[u]=="function"?{render:t[u],params:s}:{render:()=>i,params:s}}),n=F(()=>({column:e.col.column,columnIndex:e.columnIndex,rowIndex:e.col.index})),o=F(()=>typeof e.headerCellStyle=="function"?n.value.column==null?void 0:e.headerCellStyle(n.value):e.headerCellStyle),r=F(()=>{const i=[],a=n.value.column;if(a){const s=a.headerAlign||a.align;if(s&&i.push("is-align-"+s),typeof e.headerCellClass=="function"){const u=e.headerCellClass(n.value);u&&i.push(u)}else e.headerCellClass&&i.push(e.headerCellClass);a.labelClassName&&i.push(a.labelClassName)}return i.join(" ")});return{renderOpt:l,cellStyle:o,cellClass:r}}}),mf=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},gf=["colspan","rowspan"];function vf(e,t,l,n,o,r){const i=W("CellRender");return P(),Y("th",{colspan:e.col.colspan,rowspan:e.col.rowspan,style:Xe(e.cellStyle),class:ke(e.cellClass)},[D(i,et(ht(e.renderOpt)),null,16)],14,gf)}const pf=mf(hf,[["render",vf]]),yf=["printTop","printBottom"],Cf=Ne({name:"ToolPrint",components:{ElForm:jo,ElFormItem:_o,ElSelect:Uo,ElOption:qo,ElCheckbox:mt,ElButton:Rn,EleModal:Go,ElePrinter:$s,EleTable:Ns,CellRender:Yt,ToolColumnList:zn,ToolPrintBodyCell:ff,ToolPrintHeaderCell:pf},props:{locale:{type:Object,required:!0},cacheKey:String,modalProps:Object,printerProps:Object,tableProps:Object,columns:Array,selections:Array,pageData:Array,datasource:[Array,Function],spanMethod:Function,tableHeader:Boolean,showSummary:Boolean,sumText:String,summaryMethod:Function,cellStyle:[Object,Function],cellClassName:[String,Function],headerCellStyle:[Object,Function],headerCellClassName:[String,Function],pageIndex:Number,treeProps:Object,fetch:Function,defaultDataType:{type:String,default:"pageData"},defaultShowFooter:{type:Boolean,default:!0},defaultShowTreeIndex:Boolean,beforePrint:Function},setup(e){const t=E(!1),l=E(!1),n=E(e.defaultDataType),o=E([]),r=E(!1),i=E(!1),a=E(!0),s=E(!1),u=E(!1),c=E(!0),f=rl({printing:!1,headerData:[],bodyData:[],footerData:[],hasHeader:!1,hasFooter:!1,bodyCols:[],data:[]}),h=()=>{l.value=!0},m=()=>{l.value=!1},g=()=>{t.value=!0},d=()=>{m(),t.value=!1},p=()=>{m()},w=R=>{var x,K,Q,ie;var k;h();const A=(R==null?void 0:R.data)||[],N=(x=R==null?void 0:R.showHeader)!=null?x:a.value,B=(K=R==null?void 0:R.showFooter)!=null?K:s.value,V=(Q=R==null?void 0:R.showTreeIndex)!=null?Q:u.value,q=(ie=R==null?void 0:R.dataType)!=null?ie:n.value,le=(R==null?void 0:R.columns)||Et(e.columns,o.value,!0,void 0,jl,!1,o.value),he=(R==null?void 0:R.columns)||Et(e.columns,o.value,!0,void 0,jl,!0,o.value),{headerData:L,bodyData:U,footerData:oe,bodyCols:ue}=lr(A,le,e.spanMethod,e.pageIndex,B,e.sumText,e.summaryMethod,(k=e.treeProps)==null?void 0:k.children,V,N);typeof e.beforePrint=="function"&&e.beforePrint({data:A,columns:le,headerData:L,bodyData:U,footerData:oe,bodyCols:ue,dataType:q,hideLoading:m,closeModal:d,showHeader:N,showFooter:B,showTreeIndex:V,tableColumns:he})===!1||(f.data=A,f.headerData=L,f.bodyData=U,f.footerData=oe,f.hasHeader=!!f.headerData.length,f.hasFooter=!!f.footerData.length,f.bodyCols=ue,lt(()=>{f.printing=!0}))},b=()=>{if(n.value==="selections"){w({data:[...e.selections||[]]});return}if(n.value!=="data"){w({data:[...e.pageData||[]]});return}e.datasource==null||typeof e.datasource!="function"||typeof e.fetch!="function"||(h(),e.fetch(R=>{e.datasource(R).then(k=>{if(k==null){m(),d();return}w({data:k})}).catch(k=>{console.error(k),m()})}))},y=()=>{const R=qt(e.cacheKey),{cols:k,checkAll:A,indeterminate:N}=Pn(e.columns,e.locale,jl,void 0,!0,!0,R);o.value=k,r.value=A,i.value=N},v=(R,k,A)=>{let N=!0,B=!1;De(o.value,V=>{const q=R==null?A===V.type:V.uid===R.uid;if(q&&(V.checked=k),!V.checked&&N&&(N=!1),V.checked&&!B&&(B=!0),q&&!N&&B)return!1}),r.value=o.value.length>0&&N,i.value=!N&&B},C=R=>{r.value=R,i.value=!1,De(o.value,k=>{k.checked!==R&&(k.checked=R)})},O=(R,k)=>{k?De(o.value,A=>{if(A.uid===k.uid)return A.children=R,!1}):o.value=R},M=(R,k)=>{De(o.value,A=>{if(A.uid===R.uid)return A.width=k,!1})},$=()=>{y()},S=R=>{R&&v(void 0,!1,"index")};return ye(t,R=>{if(R){n.value=e.defaultDataType,y(),a.value=!!e.tableHeader,s.value=e.showSummary?!!e.defaultShowFooter:!1,c.value=!(e.pageData&&e.pageData.some(k=>{var A,N,B;return((N=k[((A=e.treeProps)==null?void 0:A.children)||"children"])==null?void 0:N.length)||k[((B=e.treeProps)==null?void 0:B.hasChildren)||"hasChildren"]}))&&yt(o.value,k=>k.type==="expand")==null,u.value=c.value?!1:!!e.defaultShowTreeIndex;return}f.data=[],f.headerData=[],f.bodyData=[],f.footerData=[],f.bodyCols=[],f.hasHeader=!1,f.hasFooter=!1,f.printing=!1,m()}),{ownSlots:yf,visible:t,loading:l,dataType:n,colItems:o,isCheckAll:r,isIndeterminate:i,showHeader:a,showFooter:s,showTreeIndex:u,treeIndexDisabled:c,printOptions:f,openModal:g,closeModal:d,handlePrintDone:p,handlePrint:b,handleCheckedChange:v,handleSortChange:O,handleColWidthChange:M,handleCheckAllChange:C,handleReset:$,handleTreeIndexChange:S,printData:w}}}),bf=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l},wf={class:"ele-tool-column is-sortable"},Sf={class:"ele-tool-column-header"},Rf={class:"ele-tool-column-label"},xf={class:"ele-tool-form-options"},kf=["width"],Tf={key:0},Ef=["colspan","rowspan"],Of=["rowspan","colspan"],Hf=["colspan","rowspan"],Ff={key:1},If=["colspan","rowspan"];function Mf(e,t,l,n,o,r){const i=W("ElOption"),a=W("ElSelect"),s=W("ElFormItem"),u=W("ElCheckbox"),c=W("ToolColumnList"),f=W("ElForm"),h=W("ElButton"),m=W("EleModal"),g=W("ToolPrintHeaderCell"),d=W("ToolPrintBodyCell"),p=W("CellRender"),w=W("EleTable"),b=W("ElePrinter");return P(),Y($e,null,[D(m,Te({form:!0,width:"460px",title:e.locale.print,position:"center"},e.modalProps||{},{modelValue:e.visible,"onUpdate:modelValue":t[6]||(t[6]=y=>e.visible=y)}),{footer:G(()=>[D(h,{onClick:e.closeModal},{default:G(()=>[pt(Be(e.locale.exportCancel),1)]),_:1},8,["onClick"]),D(h,{loading:e.loading,type:"primary",onClick:e.handlePrint},{default:G(()=>[pt(Be(e.locale.exportOk),1)]),_:1},8,["loading","onClick"])]),default:G(()=>[D(f,{labelWidth:"80px",onSubmit:t[5]||(t[5]=Nl(()=>{},["prevent"])),class:"ele-tool-print-form"},{default:G(()=>[D(s,{label:e.locale.exportSelectData},{default:G(()=>[D(a,{modelValue:e.dataType,"onUpdate:modelValue":t[0]||(t[0]=y=>e.dataType=y),placeholder:e.locale.exportSelectData},{default:G(()=>[e.pageData!=null?(P(),se(i,{key:0,value:"pageData",label:e.locale.exportDataTypePage},null,8,["label"])):de("",!0),e.selections!=null?(P(),se(i,{key:1,value:"selections",label:e.locale.exportDataTypeSelected},null,8,["label"])):de("",!0),e.datasource!=null?(P(),se(i,{key:2,value:"data",label:e.locale.exportDataTypeAll},null,8,["label"])):de("",!0)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),D(s,{label:e.locale.exportSelectColumn},{default:G(()=>[we("div",wf,[we("div",Sf,[we("div",Rf,[D(u,{label:e.locale.columnTitle,modelValue:e.isCheckAll,indeterminate:e.isIndeterminate,"onUpdate:modelValue":e.handleCheckAllChange},null,8,["label","modelValue","indeterminate","onUpdate:modelValue"])]),we("div",{class:"ele-tool-column-link",onClick:t[1]||(t[1]=(...y)=>e.handleReset&&e.handleReset(...y))},Be(e.locale.columnReset),1)]),D(c,{data:e.colItems,sortable:!0,allowWidth:!0,columnWidthPlaceholder:e.locale.columnWidth,onSortChange:e.handleSortChange,onCheckedChange:e.handleCheckedChange,onColWidthChange:e.handleColWidthChange},null,8,["data","columnWidthPlaceholder","onSortChange","onCheckedChange","onColWidthChange"])])]),_:1},8,["label"]),D(s,{label:e.locale.exportOther},{default:G(()=>[we("div",xf,[D(u,{label:e.locale.exportOtherHeader,modelValue:e.showHeader,"onUpdate:modelValue":t[2]||(t[2]=y=>e.showHeader=y)},null,8,["label","modelValue"]),D(u,{label:e.locale.exportOtherFooter,modelValue:e.showFooter,"onUpdate:modelValue":t[3]||(t[3]=y=>e.showFooter=y),disabled:!e.showSummary},null,8,["label","modelValue","disabled"]),D(u,{label:e.locale.exportOtherTreeIndex,modelValue:e.showTreeIndex,"onUpdate:modelValue":t[4]||(t[4]=y=>e.showTreeIndex=y),disabled:e.treeIndexDisabled,onChange:e.handleTreeIndexChange},null,8,["label","modelValue","disabled","onChange"])])]),_:1},8,["label"])]),_:1})]),_:1},16,["title","modelValue"]),D(b,Te({target:"_iframe"},e.printerProps||{},{modelValue:e.printOptions.printing,"onUpdate:modelValue":t[7]||(t[7]=y=>e.printOptions.printing=y),onDone:e.handlePrintDone}),{default:G(()=>[Oe(e.$slots,"printTop",{data:e.printOptions.data}),D(w,Te({border:!0,printSkin:!0,hasHeader:e.printOptions.hasHeader,hasFooter:e.printOptions.hasFooter},e.tableProps||{}),{default:G(()=>[we("colgroup",null,[(P(!0),Y($e,null,Pe(e.printOptions.bodyCols,y=>(P(),Y("col",{key:y.key,width:y.width},null,8,kf))),128))]),e.printOptions.hasHeader?(P(),Y("thead",Tf,[(P(!0),Y($e,null,Pe(e.printOptions.headerData,(y,v)=>(P(),Y("tr",{key:v},[(P(!0),Y($e,null,Pe(y,(C,O)=>(P(),Y($e,{key:C.key},[C.isTreeIndex?(P(),Y($e,{key:0},[C.rowspan!==0&&C.colspan!==0?(P(),Y("th",{key:0,colspan:C.colspan,rowspan:C.rowspan,class:"ele-print-tree-index"},null,8,Ef)):de("",!0)],64)):C.rowspan!==0&&C.colspan!==0?(P(),se(g,{key:1,col:C,columnIndex:O,headerCellStyle:e.headerCellStyle,headerCellClass:e.headerCellClassName},dt({_:2},[Pe(Object.keys(e.$slots).filter(M=>!e.ownSlots.includes(M)),M=>({name:M,fn:G($=>[Oe(e.$slots,M,Te({ref_for:!0},$||{}))])}))]),1032,["col","columnIndex","headerCellStyle","headerCellClass"])):de("",!0)],64))),128))]))),128))])):de("",!0),we("tbody",null,[(P(!0),Y($e,null,Pe(e.printOptions.bodyData,(y,v)=>(P(),Y("tr",{key:v},[(P(!0),Y($e,null,Pe(y,(C,O)=>(P(),Y($e,{key:C.key},[C.isExpandCell?(P(),Y($e,{key:0},[C.rowspan!==0&&C.colspan!==0?(P(),Y("td",{key:0,rowspan:C.rowspan,colspan:C.colspan,style:{"padding-left":"0","padding-right":"0"},class:"ele-print-expand-td"},[C.column&&(C.column.printSlot||C.column.slot)&&!e.ownSlots.includes(C.column.printSlot||C.column.slot)?Oe(e.$slots,C.column.printSlot||C.column.slot,Te({key:0,ref_for:!0},{row:C.row,column:C.column,$index:C.index})):de("",!0)],8,Of)):de("",!0)],64)):C.isTreeIndex?(P(),Y($e,{key:1},[C.rowspan!==0&&C.colspan!==0?(P(),Y("td",{key:0,colspan:C.colspan,rowspan:C.rowspan,style:Xe({paddingLeft:0,paddingRight:0,textAlign:"center",verticalAlign:"top",borderLeftColor:C.hideLeftBorder?"transparent":void 0}),class:ke(["ele-print-tree-index",{"is-placeholder":!C.text}])},Be(C.text),15,Hf)):de("",!0)],64)):C.rowspan!==0&&C.colspan!==0?(P(),se(d,{key:2,col:C,columnIndex:O,bodyCellStyle:e.cellStyle,bodyCellClass:e.cellClassName},dt({_:2},[Pe(Object.keys(e.$slots).filter(M=>!e.ownSlots.includes(M)),M=>({name:M,fn:G($=>[Oe(e.$slots,M,Te({ref_for:!0},$||{}))])}))]),1032,["col","columnIndex","bodyCellStyle","bodyCellClass"])):de("",!0)],64))),128))]))),128))]),e.printOptions.hasFooter?(P(),Y("tfoot",Ff,[(P(!0),Y($e,null,Pe(e.printOptions.footerData,(y,v)=>(P(),Y("tr",{key:v},[(P(!0),Y($e,null,Pe(y,C=>(P(),Y($e,null,[C.rowspan!==0&&C.colspan!==0?(P(),Y("td",{key:C.key,colspan:C.colspan,rowspan:C.rowspan},[C.isExpandCell?de("",!0):(P(),se(p,{key:0,render:()=>C.text,params:[]},null,8,["render"]))],8,If)):de("",!0)],64))),256))]))),128))])):de("",!0)]),_:3},16,["hasHeader","hasFooter"]),Oe(e.$slots,"printBottom",{data:e.printOptions.data})]),_:3},16,["modelValue","onDone"])],64)}const $f=bf(Cf,[["render",Mf]]),Nf=["default","printTop","printBottom"],Df=Ne({name:"TableTools",components:{ElIcon:bt,ReloadOutlined:us,DownloadOutlined:ds,PrinterOutlined:cs,ColumnHeightOutlined:fs,FullscreenOutlined:hs,FullscreenExitOutlined:ms,EleDropdown:gs,EleTool:nr,ToolColumn:Zc,ToolExport:rf,ToolPrint:$f},props:{tools:{type:Array,required:!0},size:String,columns:Array,columnSortable:Boolean,columnFixed:Boolean,maximized:Boolean,cacheKey:String,locale:Object,selections:Array,pageData:Array,spanMethod:Function,tableHeader:Boolean,showSummary:Boolean,sumText:String,summaryMethod:Function,cellStyle:[Object,Function],cellClassName:[String,Function],headerCellStyle:[Object,Function],headerCellClassName:[String,Function],pageIndex:Number,treeProps:Object,fetch:Function,exportConfig:{type:Object,required:!0},printConfig:{type:Object,required:!0}},emits:{reload:()=>!0,"update:size":e=>!0,"update:columns":(e,t,l)=>!0,"update:maximized":e=>!0},setup(e,{emit:t}){const{lang:l}=vs("table",e),n=E(null),o=E(null),r=F(()=>e.maximized?"bottom":"top"),i=F(()=>[{title:l.value.sizeLarge,command:"large",icon:Pl(ps)},{title:l.value.sizeDefault,command:"default",icon:Pl(ys)},{title:l.value.sizeSmall,command:"small",icon:Pl(Cs)}]);return{ownSlots:Nf,lang:l,toolExportRef:n,toolPrintRef:o,placement:r,sizeDropdownItems:i,reload:()=>{t("reload")},updateSize:d=>{e.cacheKey&&localStorage.setItem(Za(e.cacheKey),d),t("update:size",d)},updateColumns:(d,p,w)=>{t("update:columns",d,p,w)},toggleMaximized:()=>{t("update:maximized",!e.maximized)},openExportModal:()=>{n.value&&n.value.openModal()},openPrintModal:()=>{o.value&&o.value.openModal()},printData:d=>{o.value&&o.value.printData(d)},exportData:d=>{n.value&&n.value.exportData(d)}}}}),Af=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function Pf(e,t,l,n,o,r){var b,y;const i=W("ToolExport"),a=W("ToolPrint"),s=W("ReloadOutlined"),u=W("ElIcon"),c=W("EleTool"),f=W("DownloadOutlined"),h=W("PrinterOutlined"),m=W("ColumnHeightOutlined"),g=W("EleDropdown"),d=W("ToolColumn"),p=W("FullscreenExitOutlined"),w=W("FullscreenOutlined");return P(),Y($e,null,[D(i,{ref:"toolExportRef",locale:e.lang,cacheKey:e.cacheKey,modalProps:e.exportConfig.modalProps,columns:e.exportConfig.columns||e.columns,selections:e.selections,pageData:e.pageData,datasource:e.exportConfig.datasource,spanMethod:e.spanMethod,tableHeader:(b=e.exportConfig.showHeader)!=null?b:e.tableHeader,showSummary:e.showSummary,sumText:e.sumText,summaryMethod:e.summaryMethod,pageIndex:e.pageIndex,treeProps:e.treeProps,fetch:e.fetch,defaultFileName:e.exportConfig.fileName,defaultDataType:e.exportConfig.dataType,defaultShowFooter:e.exportConfig.showFooter,defaultShowTreeIndex:e.exportConfig.showTreeIndex,beforeExport:e.exportConfig.beforeExport},null,8,["locale","cacheKey","modalProps","columns","selections","pageData","datasource","spanMethod","tableHeader","showSummary","sumText","summaryMethod","pageIndex","treeProps","fetch","defaultFileName","defaultDataType","defaultShowFooter","defaultShowTreeIndex","beforeExport"]),D(a,{ref:"toolPrintRef",locale:e.lang,cacheKey:e.cacheKey,modalProps:e.printConfig.modalProps,printerProps:e.printConfig.printerProps,tableProps:e.printConfig.tableProps,columns:e.printConfig.columns||e.columns,selections:e.selections,pageData:e.pageData,datasource:e.printConfig.datasource,spanMethod:e.spanMethod,tableHeader:(y=e.printConfig.showHeader)!=null?y:e.tableHeader,showSummary:e.showSummary,sumText:e.sumText,summaryMethod:e.summaryMethod,cellStyle:e.cellStyle,cellClassName:e.cellClassName,headerCellStyle:e.headerCellStyle,headerCellClassName:e.headerCellClassName,pageIndex:e.pageIndex,treeProps:e.treeProps,fetch:e.fetch,defaultDataType:e.printConfig.dataType,defaultShowFooter:e.printConfig.showFooter,defaultShowTreeIndex:e.printConfig.showTreeIndex,beforePrint:e.printConfig.beforePrint},dt({_:2},[Pe(Object.keys(e.$slots),v=>({name:v,fn:G(C=>[Oe(e.$slots,v,et(ht(C||{})))])}))]),1032,["locale","cacheKey","modalProps","printerProps","tableProps","columns","selections","pageData","datasource","spanMethod","tableHeader","showSummary","sumText","summaryMethod","cellStyle","cellClassName","headerCellStyle","headerCellClassName","pageIndex","treeProps","fetch","defaultDataType","defaultShowFooter","defaultShowTreeIndex","beforePrint"]),(P(!0),Y($e,null,Pe(e.tools,(v,C)=>(P(),Y($e,null,[v==="reload"?(P(),se(c,{key:C+"-reload",placement:e.placement,title:e.lang.refresh,onClick:e.reload},{default:G(()=>[D(u,null,{default:G(()=>[D(s)]),_:1})]),_:2},1032,["placement","title","onClick"])):v==="export"?(P(),se(c,{key:C+"-export",title:e.lang.export,placement:e.placement,clickHideTooltip:!0,onClick:e.openExportModal},{default:G(()=>[D(u,{style:{transform:"scale(1.1)","transform-origin":"bottom"}},{default:G(()=>[D(f)]),_:1})]),_:2},1032,["title","placement","onClick"])):v==="print"?(P(),se(c,{key:C+"-print",title:e.lang.print,placement:e.placement,clickHideTooltip:!0,onClick:e.openPrintModal},{default:G(()=>[D(u,null,{default:G(()=>[D(h)]),_:1})]),_:2},1032,["title","placement","onClick"])):v==="size"?(P(),se(c,{key:C+"-size",placement:e.placement,title:e.lang.sizes},{default:G(()=>[D(g,{trigger:"click",placement:"bottom",popperClass:"ele-tool-size-popper",modelValue:e.size,items:e.sizeDropdownItems,popperOptions:{modifiers:[{name:"offset",options:{offset:[0,10]}}]},onCommand:e.updateSize},{default:G(()=>[D(u,null,{default:G(()=>[D(m)]),_:1})]),_:1},8,["modelValue","items","onCommand"])]),_:2},1032,["placement","title"])):v==="columns"?(P(),se(d,{key:C+"-columns",placement:e.placement,locale:e.lang,columns:e.columns,sortable:e.columnSortable,allowFixed:e.columnFixed,cacheKey:e.cacheKey,"onUpdate:columns":e.updateColumns},null,8,["placement","locale","columns","sortable","allowFixed","cacheKey","onUpdate:columns"])):v==="maximized"?(P(),se(c,{key:C+"-maximized",placement:e.placement,title:e.lang.maximized,clickHideTooltip:!0,onClick:e.toggleMaximized},{default:G(()=>[D(u,null,{default:G(()=>[e.maximized?(P(),se(p,{key:0})):(P(),se(w,{key:1}))]),_:1})]),_:2},1032,["placement","title","onClick"])):v&&!e.ownSlots.includes(v)&&e.$slots[v]?Oe(e.$slots,v,{key:6,pageIndex:e.pageIndex,fetch:e.fetch}):de("",!0)],64))),256))],64)}const Lf=Af(Df,[["render",Pf]]),zf={..._t(Dl,["data","pageIndex","errorText","cacheData"]),rowKey:{type:[String,Function],required:!1},loading:Boolean,datasource:{type:[Array,Function],required:!0},where:Object,request:Object,response:Object,parseData:Function,loadOnCreated:{type:Boolean,default:!0},loadOnChanged:{type:Boolean,default:!0},selections:Array,current:Object,toolbar:{type:[Boolean,Object],default:()=>null},tools:{type:[Boolean,Array],default:()=>null},columnSortable:{type:Boolean,default:!0},columnFixed:{type:Boolean,default:!0},maximizedIndex:Number,maximizedHeight:[String,Number],tableStyle:Object,footerStyle:Object,pagination:{type:[Boolean,Object],default:()=>null},loadingProps:Object,cacheKey:String,virtual:Boolean,rowHeight:Number,locale:Object,exportConfig:Object,printConfig:Object},Kf={...Dn,done:(e,t)=>!0,"update:selections":e=>!0,"update:current":e=>!0,columnsChange:(e,t,l)=>!0,sizeChange:e=>!0,maximizedChange:e=>!0,refresh:()=>!0},or=["default","toolbar","tools","footer"],ar=[...or,"empty","append"],Wf=[...or,"printTop","printBottom"],Vf=[...ar,"printTop","printBottom"],Bf=Ne({name:"EleProTable",components:{EleLoading:ws,ElePagination:Ss,EleDataTable:rd,EleVirtualTable:vc,EleToolbar:Is,TableTools:Lf},props:zf,emits:Kf,setup(e,{emit:t}){var ve,pe;const l=Nn(t),n=Pa(()=>Ye()),o=bs("table"),r={sorter:(ve=e.defaultSort)!=null?ve:{},filter:bc(e.columns),where:(pe=e.where)!=null?pe:{}},i=E(null),a=E(null),s=E([]),u=E(pc(e.pagination,o.value.pagination)),c=E(yc(e.pagination,o.value.pagination)),f=E(0),h=E(e.loading),m=E([]),g=E(Vl(e.cacheKey,e.size,o.value.size)),d=E(!1),p=E(""),w=E(),b=Ht(Oo(e.rowKey)),y=F(()=>{var I,j;return(((I=u.value)!=null?I:1)-1)*((j=c.value)!=null?j:0)+1}),v=F(()=>An(g.value,e.pagination,o.value.pagination,{total:f.value,pageSize:c.value,currentPage:u.value,hasNext:s.value.length>=c.value})),C=F(()=>Il(e.emptyProps,o.value.emptyProps)),O=F(()=>typeof e.datasource=="function"),M=F(()=>{var j,ee,be,Fe;const I=d.value&&e.maximizedHeight;return{...Lo(e,ad),height:I?e.maximizedHeight:e.height,border:(ee=(j=e.border)!=null?j:o.value.border)!=null?ee:!1,stripe:(Fe=(be=e.stripe)!=null?be:o.value.stripe)!=null?Fe:!1,load:V,size:g.value,data:s.value,columns:m.value,cacheData:w.value,errorText:p.value,pageIndex:y.value,emptyProps:C.value,rowHeight:e.virtual?e.rowHeight:void 0,rowKey:b.value,style:e.tableStyle,class:"ele-pro-table-view",...l,onSelectionChange:xe,onSortChange:x,onFilterChange:K,onCurrentChange:ie,onHeaderDragend:Q}}),$=F(()=>{var j,ee;const I=(ee=(j=e.tools)!=null?j:o.value.tools)!=null?ee:!0;return I===!0?["reload","size","columns","maximized"]:I||[]}),S=F(()=>Il(e.toolbar,o.value.toolbar)),R=F(()=>{const I=o.value.exportConfig||{},j=e.exportConfig||{};return{...I,...j,modalProps:{...I.modalProps||{},...j.modalProps||{}}}}),k=F(()=>{const I=o.value.printConfig||{},j=e.printConfig||{};return{...I,...j,modalProps:{...I.modalProps||{},...j.modalProps||{}},printerProps:{...I.printerProps||{},...j.printerProps||{}},tableProps:{...I.tableProps||{},...j.tableProps||{}}}}),A=F(()=>{var j;const I=(j=e.maximizedIndex)!=null?j:o.value.maximizedIndex;return{...e.loadingProps||{},loading:h.value,class:["ele-pro-table",{"is-maximized":d.value},{"is-border":M.value.border}],style:d.value?{zIndex:I}:void 0}}),N=(I,j,ee)=>{I&&(I.page&&(u.value=I.page),I.limit&&(c.value=I.limit),I.where&&(r.where=I.where),I.sorter&&(r.sorter=I.sorter),I.filter&&(r.filter=I.filter)),p.value="";const be=r.sorter;if(!O.value){const{data:Ie,page:Me,total:X}=Sc(e.datasource,be,v.value?u.value:void 0,c.value);w.value=e.datasource,s.value=Ie,u.value=Me,f.value=X,q({data:Ie,page:Me,total:X,response:e.datasource});return}j||(h.value=!0);const Fe=r.filter,_e=xo(be,e.request,o.value.request);e.datasource({page:u.value,limit:c.value,pages:To(u.value,c.value,e.request,o.value.request),where:Object.assign({},r.where),orders:_e,filters:ko(Fe),sorter:be,filter:Fe,parent:j}).then(Ie=>{var fe;const Me=(fe=e.parseData)!=null?fe:o.value.parseData,X=Me?Me(Ie):Ie,{data:ne,total:me}=wc(X,e.response,o.value.response,e.lazy,e.treeProps);B(ne,me,j,X,ee)}).catch(Ie=>{B(Ie==null?void 0:Ie.message),ee&&console.error(Ie)})},B=(I,j,ee,be,Fe)=>{var _e;if(!Array.isArray(I)){if(s.value=[],h.value=!1,typeof I=="string"&&I){p.value=I;return}p.value="获取数据失败",console.error("返回的数据格式与配置的不一致, 返回的数据:",be,"需要的格式:",Ga(o.value.response,e.response));return}if(Fe)ee!=null&&(ee[((_e=e.treeProps)==null?void 0:_e.children)||"children"]=I),Fe(I);else{if(Cc(e.pagination,o.value.pagination)&&!I.length&&j&&j!=="*"&&u.value&&c.value){const Me=Math.ceil(j/c.value);if(Me&&u.value>Me){u.value=Me,N();return}}s.value=I,f.value=j||I.length}h.value=!1;const Ie={data:s.value,page:u.value,total:f.value,response:be};q(Ie,ee)},V=(I,j,ee)=>{if(e.load){e.load(I,j,ee);return}N(void 0,I,ee)},q=(I,j)=>{lt(()=>{e.current!=null&&n.setCurrentRowKey(Ke(e.current,b.value)),e.selections!=null&&e.selections.length&&n.setSelectedRowKeys(Dt(e.selections,b.value))}),t("done",I,j)},le=()=>{if(O.value){N();return}t("refresh")},he=I=>{g.value=I,t("sizeChange",I)},L=(I,j,ee)=>{m.value=I,t("columnsChange",I,j,ee)},U=I=>{d.value=I,t("maximizedChange",I)},oe=I=>{if(c.value!==I){if(c.value=I,f.value!=="*"){const j=Math.ceil(f.value/I);j&&u.value>j&&(u.value=j)}N()}},ue=I=>{u.value!==I&&(u.value=I,N())},x=I=>{e.loadOnChanged&&(r.sorter=I,N()),l.onSortChange(I)},K=I=>{e.loadOnChanged&&(r.filter=I,N()),l.onFilterChange(I)},Q=(I,j,ee,be)=>{kc(I,ee,e.cacheKey),l.onHeaderDragend(I,j,ee,be)},ie=(I,j)=>{ge(I),l.onCurrentChange(I,j)},xe=I=>{Se(I),l.onSelectionChange(I)},ge=I=>{I!==e.current&&t("update:current",I)},Se=I=>{ft(I,e.selections)&&t("update:selections",I)},Ae=()=>{n.doLayout()},Ye=()=>a.value,je=()=>s.value,We=I=>{s.value=I},Ve=I=>{if(!v.value||c.value==null||O.value)return;const j=b.value,be=Xa(e.datasource,r.sorter).findIndex(_e=>Ke(_e,j)===I),Fe=Math.floor(be/c.value)+1;u.value!==Fe&&N({page:Fe})},He=I=>{const{sorter:j,filter:ee}=r,be=xo(j,e.request,o.value.request);I({page:u.value,limit:c.value,pages:To(u.value,c.value,e.request,o.value.request),where:Object.assign({},r.where),orders:be,filters:ko(ee),sorter:j,filter:ee})},Ze=()=>{i.value&&i.value.openPrintModal()},Z=I=>{i.value&&i.value.printData(I)},J=()=>{i.value&&i.value.openExportModal()},re=I=>{i.value&&i.value.exportData(I)};return ye(()=>e.columns,I=>{I?m.value=Rc(I,e.cacheKey,e.columnSortable):m.value.length&&(m.value=[])},{immediate:!0,deep:!0}),ye(()=>e.datasource,()=>{N()},{deep:!0}),ye(()=>e.loading,I=>{h.value=I}),ye(()=>e.size,I=>{g.value=Vl(void 0,I,o.value.size)}),ye(()=>e.current,I=>{n.setCurrentRowKey(Ke(I,b.value))}),ye(()=>e.selections,I=>{n.setSelectedRowKeys(Dt(I,b.value))}),ye(()=>e.rowKey,()=>{b.value=Oo(e.rowKey)}),ye(o,I=>{g.value=Vl(e.cacheKey,e.size,I.size)},{deep:!0}),Ct(()=>{e.loadOnCreated&&N()}),{toolsSlotExcludes:ar,tableSlotExcludes:Wf,pageSlotExcludes:Vf,...n,tableToolsRef:i,tableViewRef:a,tableData:s,tableSize:g,tableMaximized:d,tableIndex:y,paginationProps:v,tableProps:M,toolNames:$,tableToolbarProps:S,toolExportConfig:R,toolPrintConfig:k,loadingProps:A,handleRefresh:le,handleSizeChange:he,handleColumnsChange:L,handleMaximizedChange:U,handlePageSizeChange:oe,handlePageCurrentChange:ue,reload:N,reloadTable:Ae,getTableRef:Ye,getData:je,setData:We,goPageByRowKey:Ve,fetch:He,openPrintModal:Ze,printData:Z,openExportModal:J,exportData:re}}}),jf=(e,t)=>{const l=e.__vccOpts||e;for(const[n,o]of t)l[n]=o;return l};function _f(e,t,l,n,o,r){const i=W("TableTools"),a=W("EleToolbar"),s=W("EleVirtualTable"),u=W("EleDataTable"),c=W("ElePagination"),f=W("EleLoading");return P(),se(f,et(ht(e.loadingProps)),{default:G(()=>[e.tableToolbarProps?(P(),se(a,et(Te({key:0},e.tableToolbarProps===!0?{}:e.tableToolbarProps)),{tools:G(()=>[Oe(e.$slots,"tools"),e.toolNames&&e.toolNames.length?(P(),se(i,{key:0,ref:"tableToolsRef",tools:e.toolNames,size:e.tableSize,columns:e.columns,columnSortable:e.columnSortable,columnFixed:e.columnFixed,maximized:e.tableMaximized,cacheKey:e.cacheKey,locale:e.locale,selections:e.selections,pageData:e.tableData,spanMethod:e.spanMethod,tableHeader:e.showHeader,showSummary:e.showSummary,sumText:e.sumText,summaryMethod:e.summaryMethod,cellStyle:e.cellStyle,cellClassName:e.cellClassName,headerCellStyle:e.headerCellStyle,headerCellClassName:e.headerCellClassName,pageIndex:e.tableIndex,treeProps:e.treeProps,fetch:e.fetch,exportConfig:e.toolExportConfig,printConfig:e.toolPrintConfig,onReload:e.handleRefresh,"onUpdate:size":e.handleSizeChange,"onUpdate:columns":e.handleColumnsChange,"onUpdate:maximized":e.handleMaximizedChange},dt({_:2},[Pe(Object.keys(e.$slots).filter(h=>!e.toolsSlotExcludes.includes(h)),h=>({name:h,fn:G(m=>[Oe(e.$slots,h,et(ht(m||{})))])}))]),1032,["tools","size","columns","columnSortable","columnFixed","maximized","cacheKey","locale","selections","pageData","spanMethod","tableHeader","showSummary","sumText","summaryMethod","cellStyle","cellClassName","headerCellStyle","headerCellClassName","pageIndex","treeProps","fetch","exportConfig","printConfig","onReload","onUpdate:size","onUpdate:columns","onUpdate:maximized"])):de("",!0)]),default:G(()=>[Oe(e.$slots,"toolbar")]),_:3},16)):de("",!0),Oe(e.$slots,"default"),e.virtual?(P(),se(s,Te({key:1},e.tableProps,{ref:"tableViewRef"}),dt({_:2},[Pe(Object.keys(e.$slots).filter(h=>!e.tableSlotExcludes.includes(h)),h=>({name:h,fn:G(m=>[Oe(e.$slots,h,et(ht(m||{})))])}))]),1040)):(P(),se(u,Te({key:2},e.tableProps,{ref:"tableViewRef"}),dt({_:2},[Pe(Object.keys(e.$slots).filter(h=>!e.tableSlotExcludes.includes(h)),h=>({name:h,fn:G(m=>[Oe(e.$slots,h,et(ht(m||{})))])}))]),1040)),e.paginationProps||e.$slots.footer?(P(),Y("div",{key:3,class:"ele-pro-table-footer",style:Xe(e.footerStyle)},[Oe(e.$slots,"footer"),e.paginationProps&&e.paginationProps.total?(P(),se(c,Te({key:0},e.paginationProps,{"onUpdate:currentPage":e.handlePageCurrentChange,"onUpdate:pageSize":e.handlePageSizeChange}),dt({_:2},[Pe(Object.keys(e.$slots).filter(h=>!e.pageSlotExcludes.includes(h)),h=>({name:h,fn:G(m=>[Oe(e.$slots,h,et(ht(m||{})))])}))]),1040,["onUpdate:currentPage","onUpdate:pageSize"])):de("",!0)],4)):de("",!0)]),_:3},16)}const th=jf(Bf,[["render",_f]]);export{td as a,th as i};
