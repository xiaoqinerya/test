import{W as ve,bv as ee,bw as he,bx as Be,by as Te,bz as le,bA as fe,bB as xe,aV as ce,bC as ze,r as J,a4 as Fe,bD as re,n as se,K as f,bE as Ie,aY as Ke,b8 as _e,w as oe,bF as Ve,bG as Xe,bH as Ye,bI as we,d as te,X as ge,b as Ce,bJ as me,o as M,F as I,f as Me,e as Se,B as G,h as Ae,i as t,Z as K,bK as Re,C as H,a1 as Le,b0 as ke,bL as $e,b4 as We,bM as Ue,bN as pe,a$ as Oe,c as ie,a0 as ae,G as ne,H as ue,j as je,a2 as He}from"./index-BiiIy8BH.js";import{E as Ge}from"./input-number-DVnd-AS5.js";const Ne=Symbol("sliderContextKey"),Je=ve({modelValue:{type:ee([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:he,inputSize:he,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:ee(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:ee(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Be,default:"top"},marks:{type:ee(Object)},validateEvent:{type:Boolean,default:!0},...Te(["ariaLabel"])}),de=e=>ce(e)||ze(e)&&e.every(ce),Ze={[le]:de,[fe]:de,[xe]:de},qe=(e,l,d)=>{const a=J();return Fe(async()=>{e.range?(Array.isArray(e.modelValue)?(l.firstValue=Math.max(e.min,e.modelValue[0]),l.secondValue=Math.min(e.max,e.modelValue[1])):(l.firstValue=e.min,l.secondValue=e.max),l.oldValue=[l.firstValue,l.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?l.firstValue=e.min:l.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),l.oldValue=l.firstValue),re(window,"resize",d),await se(),d()}),{sliderWrapper:a}},Qe=e=>f(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,a)=>d-a).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),De=(e,l,d)=>{const{form:a,formItem:i}=Ie(),m=Ke(),u=J(),b=J(),y={firstButton:u,secondButton:b},c=f(()=>e.disabled||(a==null?void 0:a.disabled)||!1),v=f(()=>Math.min(l.firstValue,l.secondValue)),n=f(()=>Math.max(l.firstValue,l.secondValue)),k=f(()=>e.range?`${100*(n.value-v.value)/(e.max-e.min)}%`:`${100*(l.firstValue-e.min)/(e.max-e.min)}%`),N=f(()=>e.range?`${100*(v.value-e.min)/(e.max-e.min)}%`:"0%"),z=f(()=>e.vertical?{height:e.height}:{}),_=f(()=>e.vertical?{height:k.value,bottom:N.value}:{width:k.value,left:N.value}),P=()=>{m.value&&(l.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},T=s=>{const h=e.min+s*(e.max-e.min)/100;if(!e.range)return u;let V;return Math.abs(v.value-h)<Math.abs(n.value-h)?V=l.firstValue<l.secondValue?"firstButton":"secondButton":V=l.firstValue>l.secondValue?"firstButton":"secondButton",y[V]},E=s=>{const h=T(s);return h.value.setPosition(s),h},L=s=>{l.firstValue=s!=null?s:e.min,Y(e.range?[v.value,n.value]:s!=null?s:e.min)},B=s=>{l.secondValue=s,e.range&&Y([v.value,n.value])},Y=s=>{d(le,s),d(fe,s)},A=async()=>{await se(),d(xe,e.range?[v.value,n.value]:e.modelValue)},U=s=>{var h,V,p,O,$,j;if(c.value||l.dragging)return;P();let x=0;if(e.vertical){const w=(p=(V=(h=s.touches)==null?void 0:h.item(0))==null?void 0:V.clientY)!=null?p:s.clientY;x=(m.value.getBoundingClientRect().bottom-w)/l.sliderSize*100}else{const w=(j=($=(O=s.touches)==null?void 0:O.item(0))==null?void 0:$.clientX)!=null?j:s.clientX,C=m.value.getBoundingClientRect().left;x=(w-C)/l.sliderSize*100}if(!(x<0||x>100))return E(x)};return{elFormItem:i,slider:m,firstButton:u,secondButton:b,sliderDisabled:c,minValue:v,maxValue:n,runwayStyle:z,barStyle:_,resetSize:P,setPosition:E,emitChange:A,onSliderWrapperPrevent:s=>{var h,V;((h=y.firstButton.value)!=null&&h.dragging||(V=y.secondButton.value)!=null&&V.dragging)&&s.preventDefault()},onSliderClick:s=>{U(s)&&A()},onSliderDown:async s=>{const h=U(s);h&&(await se(),h.value.onButtonDown(s))},onSliderMarkerDown:s=>{c.value||l.dragging||E(s)},setFirstValue:L,setSecondValue:B}},{left:el,down:ll,right:tl,up:al,home:nl,end:ol,pageUp:rl,pageDown:sl}=Xe,il=(e,l,d)=>{const a=J(),i=J(!1),m=f(()=>l.value instanceof Function),u=f(()=>m.value&&l.value(e.modelValue)||e.modelValue),b=Ve(()=>{d.value&&(i.value=!0)},50),y=Ve(()=>{d.value&&(i.value=!1)},50);return{tooltip:a,tooltipVisible:i,formatValue:u,displayTooltip:b,hideTooltip:y}},ul=(e,l,d)=>{const{disabled:a,min:i,max:m,step:u,showTooltip:b,precision:y,sliderSize:c,formatTooltip:v,emitChange:n,resetSize:k,updateDragging:N}=_e(Ne),{tooltip:z,tooltipVisible:_,formatValue:P,displayTooltip:T,hideTooltip:E}=il(e,v,b),L=J(),B=f(()=>`${(e.modelValue-i.value)/(m.value-i.value)*100}%`),Y=f(()=>e.vertical?{bottom:B.value}:{left:B.value}),A=()=>{l.hovering=!0,T()},U=()=>{l.hovering=!1,l.dragging||E()},Z=o=>{a.value||(o.preventDefault(),j(o),window.addEventListener("mousemove",x),window.addEventListener("touchmove",x),window.addEventListener("mouseup",w),window.addEventListener("touchend",w),window.addEventListener("contextmenu",w),L.value.focus())},F=o=>{a.value||(l.newPosition=Number.parseFloat(B.value)+o/(m.value-i.value)*100,C(l.newPosition),n())},q=()=>{F(-u.value)},R=()=>{F(u.value)},s=()=>{F(-u.value*4)},h=()=>{F(u.value*4)},V=()=>{a.value||(C(0),n())},p=()=>{a.value||(C(100),n())},O=o=>{let g=!0;[el,ll].includes(o.key)?q():[tl,al].includes(o.key)?R():o.key===nl?V():o.key===ol?p():o.key===sl?s():o.key===rl?h():g=!1,g&&o.preventDefault()},$=o=>{let g,S;return o.type.startsWith("touch")?(S=o.touches[0].clientY,g=o.touches[0].clientX):(S=o.clientY,g=o.clientX),{clientX:g,clientY:S}},j=o=>{l.dragging=!0,l.isClick=!0;const{clientX:g,clientY:S}=$(o);e.vertical?l.startY=S:l.startX=g,l.startPosition=Number.parseFloat(B.value),l.newPosition=l.startPosition},x=o=>{if(l.dragging){l.isClick=!1,T(),k();let g;const{clientX:S,clientY:X}=$(o);e.vertical?(l.currentY=X,g=(l.startY-l.currentY)/c.value*100):(l.currentX=S,g=(l.currentX-l.startX)/c.value*100),l.newPosition=l.startPosition+g,C(l.newPosition)}},w=()=>{l.dragging&&(setTimeout(()=>{l.dragging=!1,l.hovering||E(),l.isClick||C(l.newPosition),n()},0),window.removeEventListener("mousemove",x),window.removeEventListener("touchmove",x),window.removeEventListener("mouseup",w),window.removeEventListener("touchend",w),window.removeEventListener("contextmenu",w))},C=async o=>{if(o===null||Number.isNaN(+o))return;o<0?o=0:o>100&&(o=100);const g=100/((m.value-i.value)/u.value);let X=Math.round(o/g)*g*(m.value-i.value)*.01+i.value;X=Number.parseFloat(X.toFixed(y.value)),X!==e.modelValue&&d(le,X),!l.dragging&&e.modelValue!==l.oldValue&&(l.oldValue=e.modelValue),await se(),l.dragging&&T(),z.value.updatePopper()};return oe(()=>l.dragging,o=>{N(o)}),re(L,"touchstart",Z,{passive:!1}),{disabled:a,button:L,tooltip:z,tooltipVisible:_,showTooltip:b,wrapperStyle:Y,formatValue:P,handleMouseEnter:A,handleMouseLeave:U,onButtonDown:Z,onKeyDown:O,setPosition:C}},dl=(e,l,d,a)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const u=(e.max-e.min)/e.step,b=100*e.step/(e.max-e.min),y=Array.from({length:u-1}).map((c,v)=>(v+1)*b);return e.range?y.filter(c=>c<100*(d.value-e.min)/(e.max-e.min)||c>100*(a.value-e.min)/(e.max-e.min)):y.filter(c=>c>100*(l.firstValue-e.min)/(e.max-e.min))}),getStopStyle:u=>e.vertical?{bottom:`${u}%`}:{left:`${u}%`}}),cl=(e,l,d,a,i,m)=>{const u=c=>{i(le,c),i(fe,c)},b=()=>e.range?![d.value,a.value].every((c,v)=>c===l.oldValue[v]):e.modelValue!==l.oldValue,y=()=>{var c,v;e.min>e.max&&Ye("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&Array.isArray(n)?n[1]<e.min?u([e.min,e.min]):n[0]>e.max?u([e.max,e.max]):n[0]<e.min?u([e.min,n[1]]):n[1]>e.max?u([n[0],e.max]):(l.firstValue=n[0],l.secondValue=n[1],b()&&(e.validateEvent&&((c=m==null?void 0:m.validate)==null||c.call(m,"change").catch(k=>we())),l.oldValue=n.slice())):!e.range&&typeof n=="number"&&!Number.isNaN(n)&&(n<e.min?u(e.min):n>e.max?u(e.max):(l.firstValue=n,b()&&(e.validateEvent&&((v=m==null?void 0:m.validate)==null||v.call(m,"change").catch(k=>we())),l.oldValue=n)))};y(),oe(()=>l.dragging,c=>{c||y()}),oe(()=>e.modelValue,(c,v)=>{l.dragging||Array.isArray(c)&&Array.isArray(v)&&c.every((n,k)=>n===v[k])&&l.firstValue===c[0]&&l.secondValue===c[1]||y()},{deep:!0}),oe(()=>[e.min,e.max],()=>{y()})},ml=ve({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Be,default:"top"}}),vl={[le]:e=>ce(e)},fl=te({name:"ElSliderButton"}),gl=te({...fl,props:ml,emits:vl,setup(e,{expose:l,emit:d}){const a=e,i=ge("slider"),m=Ce({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),{disabled:u,button:b,tooltip:y,showTooltip:c,tooltipVisible:v,wrapperStyle:n,formatValue:k,handleMouseEnter:N,handleMouseLeave:z,onButtonDown:_,onKeyDown:P,setPosition:T}=ul(a,m,d),{hovering:E,dragging:L}=me(m);return l({onButtonDown:_,onKeyDown:P,setPosition:T,hovering:E,dragging:L}),(B,Y)=>(M(),I("div",{ref_key:"button",ref:b,class:K([t(i).e("button-wrapper"),{hover:t(E),dragging:t(L)}]),style:H(t(n)),tabindex:t(u)?-1:0,onMouseenter:t(N),onMouseleave:t(z),onMousedown:t(_),onFocus:t(N),onBlur:t(z),onKeydown:t(P)},[Me(t(Re),{ref_key:"tooltip",ref:y,visible:t(v),placement:B.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":B.tooltipClass,disabled:!t(c),persistent:""},{content:Se(()=>[G("span",null,Ae(t(k)),1)]),default:Se(()=>[G("div",{class:K([t(i).e("button"),{hover:t(E),dragging:t(L)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Ee=Le(gl,[["__file","button.vue"]]);const bl=ve({mark:{type:ee([String,Object]),default:void 0}});var yl=te({name:"ElSliderMarker",props:bl,setup(e){const l=ge("slider"),d=f(()=>ke(e.mark)?e.mark:e.mark.label),a=f(()=>ke(e.mark)?void 0:e.mark.style);return()=>$e("div",{class:l.e("marks-text"),style:a.value},d.value)}});const hl=te({name:"ElSlider"}),Vl=te({...hl,props:Je,emits:Ze,setup(e,{expose:l,emit:d}){const a=e,i=ge("slider"),{t:m}=We(),u=Ce({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:b,slider:y,firstButton:c,secondButton:v,sliderDisabled:n,minValue:k,maxValue:N,runwayStyle:z,barStyle:_,resetSize:P,emitChange:T,onSliderWrapperPrevent:E,onSliderClick:L,onSliderDown:B,onSliderMarkerDown:Y,setFirstValue:A,setSecondValue:U}=De(a,u,d),{stops:Z,getStopStyle:F}=dl(a,u,k,N),{inputId:q,isLabeledByFormItem:R}=Ue(a,{formItemContext:b}),s=pe(),h=f(()=>a.inputSize||s.value),V=f(()=>a.ariaLabel||m("el.slider.defaultLabel",{min:a.min,max:a.max})),p=f(()=>a.range?a.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):V.value),O=f(()=>a.formatValueText?a.formatValueText(g.value):`${g.value}`),$=f(()=>a.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),j=f(()=>a.formatValueText?a.formatValueText(S.value):`${S.value}`),x=f(()=>[i.b(),i.m(s.value),i.is("vertical",a.vertical),{[i.m("with-input")]:a.showInput}]),w=Qe(a);cl(a,u,k,N,d,b);const C=f(()=>{const r=[a.min,a.max,a.step].map(be=>{const Q=`${be}`.split(".")[1];return Q?Q.length:0});return Math.max.apply(null,r)}),{sliderWrapper:o}=qe(a,u,P),{firstValue:g,secondValue:S,sliderSize:X}=me(u),Pe=r=>{u.dragging=r};return re(o,"touchstart",E,{passive:!1}),re(o,"touchmove",E,{passive:!1}),Oe(Ne,{...me(a),sliderSize:X,disabled:n,precision:C,emitChange:T,resetSize:P,updateDragging:Pe}),l({onSliderClick:L}),(r,be)=>{var Q,ye;return M(),I("div",{id:r.range?t(q):void 0,ref_key:"sliderWrapper",ref:o,class:K(t(x)),role:r.range?"group":void 0,"aria-label":r.range&&!t(R)?t(V):void 0,"aria-labelledby":r.range&&t(R)?(Q=t(b))==null?void 0:Q.labelId:void 0},[G("div",{ref_key:"slider",ref:y,class:K([t(i).e("runway"),{"show-input":r.showInput&&!r.range},t(i).is("disabled",t(n))]),style:H(t(z)),onMousedown:t(B),onTouchstartPassive:t(B)},[G("div",{class:K(t(i).e("bar")),style:H(t(_))},null,6),Me(Ee,{id:r.range?void 0:t(q),ref_key:"firstButton",ref:c,"model-value":t(g),vertical:r.vertical,"tooltip-class":r.tooltipClass,placement:r.placement,role:"slider","aria-label":r.range||!t(R)?t(p):void 0,"aria-labelledby":!r.range&&t(R)?(ye=t(b))==null?void 0:ye.labelId:void 0,"aria-valuemin":r.min,"aria-valuemax":r.range?t(S):r.max,"aria-valuenow":t(g),"aria-valuetext":t(O),"aria-orientation":r.vertical?"vertical":"horizontal","aria-disabled":t(n),"onUpdate:modelValue":t(A)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),r.range?(M(),ie(Ee,{key:0,ref_key:"secondButton",ref:v,"model-value":t(S),vertical:r.vertical,"tooltip-class":r.tooltipClass,placement:r.placement,role:"slider","aria-label":t($),"aria-valuemin":t(g),"aria-valuemax":r.max,"aria-valuenow":t(S),"aria-valuetext":t(j),"aria-orientation":r.vertical?"vertical":"horizontal","aria-disabled":t(n),"onUpdate:modelValue":t(U)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ae("v-if",!0),r.showStops?(M(),I("div",{key:1},[(M(!0),I(ne,null,ue(t(Z),(W,D)=>(M(),I("div",{key:D,class:K(t(i).e("stop")),style:H(t(F)(W))},null,6))),128))])):ae("v-if",!0),t(w).length>0?(M(),I(ne,{key:2},[G("div",null,[(M(!0),I(ne,null,ue(t(w),(W,D)=>(M(),I("div",{key:D,style:H(t(F)(W.position)),class:K([t(i).e("stop"),t(i).e("marks-stop")])},null,6))),128))]),G("div",{class:K(t(i).e("marks"))},[(M(!0),I(ne,null,ue(t(w),(W,D)=>(M(),ie(t(yl),{key:D,mark:W.mark,style:H(t(F)(W.position)),onMousedown:je(Sl=>t(Y)(W.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):ae("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),r.showInput&&!r.range?(M(),ie(t(Ge),{key:0,ref:"input","model-value":t(g),class:K(t(i).e("input")),step:r.step,disabled:t(n),controls:r.showInputControls,min:r.min,max:r.max,precision:t(C),debounce:r.debounce,size:t(h),"onUpdate:modelValue":t(A),onChange:t(T)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):ae("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var wl=Le(Vl,[["__file","slider.vue"]]);const Bl=He(wl);export{Bl as E};
