import{s as L,cQ as z,cR as A,d as F,v as K,cS as O,r as u,b as j,K as q,cT as M,F as V,f as s,e as n,B as d,i as t,cU as $,o as v,g as h,h as g,c as H,aR as D,cV as Q,aK as W,A as G,j as J,a0 as k,cW as X,E as N,L as Y,k as Z,l as ee,cy as oe,y as se,x as te,a8 as ae,a9 as ne,_ as le}from"./index-BiiIy8BH.js";import{i as re}from"./index-CIoy1qQK.js";async function ie(r){var p;const e=await L.Post("/acting/ActingLogin",r,{meta:{postType:z.FORM}});return e.code===0?(A((p=e.data)==null?void 0:p.token,r.remember),e.message):Promise.reject(new Error(e.message))}const ce=r=>(ae("data-v-66277f2f"),r=r(),ne(),r),de={class:"login-wrapper"},ue=ce(()=>d("div",{class:"login-cover"},[d("h1",{class:"login-title"},"代理后台"),d("h4",{class:"login-subtitle"},"管理系统")],-1)),me={class:"login-body"},pe={class:"login-captcha-group"},ge={key:1,class:"login-tips"},_e={class:"i18n"},fe=F({__name:"index",setup(r){const{t:e}=K.useI18n(),{currentRoute:p}=$(),{goHomeRoute:E,cleanPageTabs:T}=O(),I=u(1),y=u(null),_=u(!1),b=u(""),R=l=>{b.value=l},a=j({actingNum:"",password:"",code:"",remember:!0}),C=q(()=>({actingNum:[{required:!0,message:e("login.actingNum"),type:"string",trigger:"blur"}],password:[{required:!0,message:e("login.password"),type:"string",trigger:"blur"}]}));u(""),u("");const x=()=>{var l,o;(o=(l=y.value)==null?void 0:l.validate)==null||o.call(l,f=>{f&&(_.value=!0,ie(a).then(i=>{N.success(i),T(),w()}).catch(i=>{_.value=!1,N.error(i.message)}))})},w=()=>{const{query:l}=t(p);E(l.from)};return M()&&w(),(l,o)=>{const f=Y,i=Z,m=ee,B=oe,P=se,S=te,U=re;return v(),V("div",de,[s(U,{shadow:"always",class:"login-card"},{default:n(()=>[ue,d("div",me,[s(f,{type:"heading",style:{"font-size":"24px","margin-bottom":"18px"}},{default:n(()=>[h(g(t(e)("login.title")),1)]),_:1}),I.value==1?(v(),H(S,{key:0,ref_key:"formRef",ref:y,size:"large",model:a,rules:C.value,onKeyup:G(x,["enter"]),onSubmit:o[4]||(o[4]=J(()=>{},["prevent"]))},{default:n(()=>[s(m,{prop:"actingNum"},{default:n(()=>[s(i,{clearable:"",modelValue:a.actingNum,"onUpdate:modelValue":o[0]||(o[0]=c=>a.actingNum=c),placeholder:t(e)("login.actingNum"),"prefix-icon":t(D)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),s(m,{prop:"password"},{default:n(()=>[s(i,{"show-password":"",modelValue:a.password,"onUpdate:modelValue":o[1]||(o[1]=c=>a.password=c),placeholder:t(e)("login.password"),"prefix-icon":t(Q)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),s(m,{prop:"code"},{default:n(()=>[d("div",pe,[s(i,{clearable:"",modelValue:a.code,"onUpdate:modelValue":o[2]||(o[2]=c=>a.code=c),placeholder:t(e)("login.code"),"prefix-icon":t(W)},null,8,["modelValue","placeholder","prefix-icon"])])]),_:1}),s(m,null,{default:n(()=>[s(B,{modelValue:a.remember,"onUpdate:modelValue":o[3]||(o[3]=c=>a.remember=c)},{default:n(()=>[h(g(t(e)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),s(m,null,{default:n(()=>[s(P,{size:"large",type:"primary",loading:_.value,style:{width:"100%"},onClick:x},{default:n(()=>[h(g(t(e)("login.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])):k("",!0),b.value=="zh_CN"?(v(),V("div",ge,[d("p",null,g(t(e)("common.loginTips")),1)])):k("",!0)])]),_:1}),d("div",_e,[s(X,{"icon-style":{transform:"scale(2.15)"},onChangeLang:R})])])}}}),ye=le(fe,[["__scopeId","data-v-66277f2f"]]);export{ye as default};
