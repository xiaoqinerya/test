import{cj as k,K as d,ep as J,b3 as Q,eq as m,bv as b,W as N,cK as ee,d as te,X as F,r as B,b as ne,er as re,i as p,w as ae,a_ as se,bL as P,j as oe}from"./index-BiiIy8BH.js";const le=e=>k?window.requestAnimationFrame(e):setTimeout(e,16),ie=e=>k?window.cancelAnimationFrame(e):clearTimeout(e);var G=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function ce(e,t){return!!(e===t||G(e)&&G(t))}function ue(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!ce(e[r],t[r]))return!1;return!0}function de(e,t){t===void 0&&(t=ue);var r=null;function i(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var c=e.apply(this,a);return r={lastResult:c,lastArgs:a,lastThis:this},c}return i.clear=function(){r=null},i}const Re=()=>{const t=Q().proxy.$props;return d(()=>{const r=(i,a,s)=>({});return t.perfMode?J(r):de(r)})},Le=50,we="itemRendered",Ae="scroll",me="forward",fe="backward",Me="auto",_e="smart",ze="start",Ce="center",Ie="end",T="horizontal",q="vertical",ve="ltr",H="rtl",he="negative",be="positive-ascending",ge="positive-descending",Se={[T]:"left",[q]:"top"},ye=20,w=m({type:b([Number,Function]),required:!0}),A=m({type:Number}),M=m({type:Number,default:2}),pe=m({type:String,values:["ltr","rtl"],default:"ltr"}),_=m({type:Number,default:0}),E=m({type:Number,required:!0}),$=m({type:String,values:["horizontal","vertical"],default:q}),V=N({className:{type:String,default:""},containerElement:{type:b([String,Object]),default:"div"},data:{type:b(Array),default:()=>ee([])},direction:pe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:b([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Oe=N({cache:M,estimatedItemSize:A,layout:$,initScrollOffset:_,total:E,itemSize:w,...V}),z={type:Number,default:6},j={type:Number,default:0},K={type:Number,default:2},xe=N({columnCache:M,columnWidth:w,estimatedColumnWidth:A,estimatedRowHeight:A,initScrollLeft:_,initScrollTop:_,itemKey:{type:b(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:M,rowHeight:w,totalColumn:E,totalRow:E,hScrollbarSize:z,vScrollbarSize:z,scrollbarStartGap:j,scrollbarEndGap:K,role:String,...V}),Te=N({alwaysOn:Boolean,class:String,layout:$,total:E,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:z,startGap:j,endGap:K,visible:Boolean}),De=(e,t)=>e<t?me:fe,Fe=e=>e===ve||e===H||e===T,Be=e=>e===H;let v=null;function Pe(e=!1){if(v===null||e){const t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";const i=document.createElement("div"),a=i.style;return a.width="100px",a.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?v=ge:(t.scrollLeft=1,t.scrollLeft===0?v=he:v=be),document.body.removeChild(t),v}return v}function Ee({move:e,size:t,bar:r},i){const a={},s=`translate${r.axis}(${e}px)`;return a[r.size]=t,a.transform=s,a.msTransform=s,a.webkitTransform=s,i==="horizontal"?a.height="100%":a.width="100%",a}const Ge=te({name:"ElVirtualScrollBar",props:Te,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const r=d(()=>e.startGap+e.endGap),i=F("virtual-scrollbar"),a=F("scrollbar"),s=B(),c=B();let C=null,R=null;const l=ne({isDragging:!1,traveled:0}),o=d(()=>re[e.layout]),I=d(()=>e.clientSize-p(r)),W=d(()=>({position:"absolute",width:`${T===e.layout?I.value:e.scrollbarSize}px`,height:`${T===e.layout?e.scrollbarSize:I.value}px`,[Se[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),L=d(()=>{const n=e.ratio,u=e.clientSize;if(n>=100)return Number.POSITIVE_INFINITY;if(n>=50)return n*u/100;const f=u/3;return Math.floor(Math.min(Math.max(n*u,ye),f))}),U=d(()=>{if(!Number.isFinite(L.value))return{display:"none"};const n=`${L.value}px`;return Ee({bar:o.value,size:n,move:l.traveled},e.layout)}),h=d(()=>Math.floor(e.clientSize-L.value-p(r))),Z=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",g);const n=p(c);n&&(R=document.onselectstart,document.onselectstart=()=>!1,n.addEventListener("touchmove",S,{passive:!0}),n.addEventListener("touchend",g))},O=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",g),document.onselectstart=R,R=null;const n=p(c);n&&(n.removeEventListener("touchmove",S),n.removeEventListener("touchend",g))},x=n=>{n.stopImmediatePropagation(),!(n.ctrlKey||[1,2].includes(n.button))&&(l.isDragging=!0,l[o.value.axis]=n.currentTarget[o.value.offset]-(n[o.value.client]-n.currentTarget.getBoundingClientRect()[o.value.direction]),t("start-move"),Z())},g=()=>{l.isDragging=!1,l[o.value.axis]=0,t("stop-move"),O()},S=n=>{const{isDragging:u}=l;if(!u||!c.value||!s.value)return;const f=l[o.value.axis];if(!f)return;ie(C);const y=(s.value.getBoundingClientRect()[o.value.direction]-n[o.value.client])*-1,Y=c.value[o.value.offset]-f,D=y-Y;C=le(()=>{l.traveled=Math.max(e.startGap,Math.min(D,h.value)),t("scroll",D,h.value)})},X=n=>{const u=Math.abs(n.target.getBoundingClientRect()[o.value.direction]-n[o.value.client]),f=c.value[o.value.offset]/2,y=u-f;l.traveled=Math.max(0,Math.min(y,h.value)),t("scroll",y,h.value)};return ae(()=>e.scrollFrom,n=>{l.isDragging||(l.traveled=Math.ceil(n*h.value))}),se(()=>{O()}),()=>P("div",{role:"presentation",ref:s,class:[i.b(),e.class,(e.alwaysOn||l.isDragging)&&"always-on"],style:W.value,onMousedown:oe(X,["stop","prevent"]),onTouchstartPrevent:x},P("div",{ref:c,class:a.e("thumb"),style:U.value,onMousedown:x},[]))}});export{Me as A,fe as B,Ce as C,Le as D,Ie as E,me as F,T as H,we as I,H as R,Ae as S,q as V,be as a,he as b,ie as c,Ge as d,De as e,ge as f,Pe as g,ze as h,Fe as i,_e as j,xe as k,Be as l,Te as m,le as r,Re as u,Oe as v};
